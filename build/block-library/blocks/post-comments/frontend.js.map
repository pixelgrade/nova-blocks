{"version":3,"sources":["webpack://novablocks/webpack/bootstrap","webpack://novablocks/@novablocks/block-library/src/blocks/post-comments/frontend.js","webpack://novablocks/external {\"this\":[\"novablocks\",\"icons\"]}","webpack://novablocks/external {\"this\":[\"novablocks\",\"utils\"]}"],"names":["FORM_SELECTOR","MASK_SELECTOR","USER_REPLYING_CLASS","COPY_LINK_SELECTOR","NOTIFICATION_VISIBLE_CLASS","TRANSITION_DURATION","TRANSITION_EASING","$","window","undefined","$commentForm","$conversationsBlock","$commentPlaceholder","$commentList","$commentListHeight","outerHeight","$commentCheckboxes","find","$commentDropdown","children","wrap","removeClass","parent","addClass","$notification","formIsMoved","scrollPos","prevScroll","currScroll","scrollDir","frameRendered","$block","each","i","element","$form","handleMarkup","bindEvents","onResize","$button","on","copyLinkToClipboard","highlightCommentOnClick","$temporaryForm","addTemporaryForm","updateTemporaryFormHeight","handleCommentReplyingClass","scrollTop","update","length","changeCommentFormPosition","updateLoop","requestAnimationFrame","one","onFocus","document","uncheckCheckboxes","updateMasksHeights","$comment","$others","nextAll","$commentLabel","$commentDescription","add","wrapAll","$masks","data","animated","obj","$mask","height","css","overflow","resetMasksHeights","e","$textarea","closest","textareaHeight","targetHeight","velocity","tween","duration","easing","begin","progress","elements","percentComplete","remaining","tweenValue","activeCall","$element","parseInt","newHeight","complete","unbind","$this","ajax","url","highlight_comments_ajax_object","ajaxurl","type","success","response","action","attr","comment_id","$this_and_comment","siblings","event","target","is","prop","scrollIsUp","$thirdComment","eq","thirdCommentIsInViewport","placeholderIsInViewport","formIsInViewport","insertAfter","insertBefore","temporaryFieldMarkup","$commentFormHeight","observer","MutationObserver","mutations","contains","observe","body","childList","subtree","preventDefault","copyText","succeeded","addEventListener","clipboardData","setData","execCommand","err","setTimeout","jQuery"],"mappings":"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","file":"./build/block-library/blocks/post-comments/frontend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./packages/block-library/build/blocks/post-comments/frontend.js\");\n","import { isAnyPartOfElementInViewport } from \"@novablocks/utils\";\nimport \"@novablocks/icons\";\n\nconst FORM_SELECTOR = '.comment-form';\nconst MASK_SELECTOR = '.comment-fields-mask';\nconst USER_REPLYING_CLASS = 'user-is-replying';\nconst COPY_LINK_SELECTOR = '.copy-comment-link';\nconst NOTIFICATION_VISIBLE_CLASS = 'notification--is-visible';\n\n// Keep it a snappy transition.\nconst TRANSITION_DURATION = 800;\nconst TRANSITION_EASING = \"easeOutCirc\";\n\n(function( $, window, undefined ) {\n\n\tlet $commentForm = $( '.novablocks-conversations__form' ),\n\t\t$conversationsBlock = $( '.novablocks-conversations' ),\n\t\t$commentPlaceholder = $( '#second-comment-form-marker' ),\n\t\t$commentList = $('.comment-list'),\n\t\t$commentListHeight = $commentList.outerHeight(),\n\t\t$commentCheckboxes = $commentList.find('.comment-dropdown-open'),\n\t\t$commentDropdown = $commentList.find('.comment-dropdown').children();\n\n\t// Hackish way to avoid replying comment form being moved.\n\t$commentForm.wrap( '<div>' );\n\t$commentForm.removeClass( 'novablocks-conversations__form' );\n\t$commentForm = $commentForm.parent();\n\t$commentForm.addClass( 'novablocks-conversations__form' );\n\n\tconst $notification = $('.novablocks-conversations__notification-text');\n\n\tlet formIsMoved = false,\n\t\tscrollPos = 0,\n\t\tprevScroll = 0,\n\t\tcurrScroll = 0,\n\t\tscrollDir = 'down',\n\t\tframeRendered = true,\n\t\t$block = $('.novablocks-conversations');\n\n\t$( FORM_SELECTOR ).each( function( i, element ) {\n\t\tconst $form = $( element );\n\n\t\thandleMarkup( $form );\n\t\tbindEvents( $form );\n\t\tonResize( $form );\n\t} );\n\n\t$( COPY_LINK_SELECTOR ).each(function(i, element){\n\t\tconst $button = $(element);\n\t\t$button.on('click', copyLinkToClipboard );\n\t});\n\n\thighlightCommentOnClick();\n\n\tlet $temporaryForm = addTemporaryForm();\n\tupdateTemporaryFormHeight();\n\thandleCommentReplyingClass();\n\n\t$(window).on('scroll', () => {\n\t\tcurrScroll = $( 'html, body' ).scrollTop();\n\t\tscrollDir = currScroll >= prevScroll ? 'down' : 'up';\n\t\tframeRendered = false;\n\t\tprevScroll = currScroll;\n\t} );\n\n\tfunction update() {\n\n\t\t// If we cannot find our comment form, do nothing.\n\t\t// If the placeholder does not exist, do nothing.\n\t\tif ( $commentPlaceholder.length && $commentForm.length ) {\n\t\t\tchangeCommentFormPosition();\n\t\t}\n\t}\n\n\tfunction updateLoop() {\n\n\t\tif ( ! frameRendered ) {\n\t\t\tupdate();\n\t\t\tframeRendered = true;\n\t\t}\n\n\t\trequestAnimationFrame( updateLoop );\n\t}\n\n\trequestAnimationFrame( updateLoop );\n\n\tfunction bindEvents( $form ) {\n\t\t$( window ).on( 'resize', function() {\n\t\t\tonResize( $form );\n\t\t} );\n\n\t\t$form.one('focusin', 'input, textarea, trix-editor', onFocus);\n\t\t$( document ).on( 'click', uncheckCheckboxes );\n\t}\n\n\tfunction onResize( $form ) {\n\t\tupdateMasksHeights( $form );\n\t}\n\n\tfunction handleMarkup( $form ) {\n\t\tlet $comment = $form.find( '.comment-form-comment' ),\n\t\t\t$others = $comment.nextAll(),\n\t\t\t$commentLabel = $comment.find( 'label' ),\n\t\t\t$commentDescription = $comment.find( '.field-description' );\n\n\t\t$commentLabel.add( $commentDescription )\n\t\t\t.wrapAll( '<div class=\"comment-fields-mask\">' )\n\t\t\t.wrapAll( '<div class=\"comment-fields-wrapper  comment-fields-wrapper--comment\">' );\n\n\t\t$others.wrapAll( '<div class=\"comment-fields-mask\">' )\n\t\t\t.wrapAll( '<div class=\"comment-fields-wrapper  comment-fields-wrapper--others\">' );\n\t}\n\n\tfunction updateMasksHeights( $form ) {\n\t\tconst $masks = $form.find( MASK_SELECTOR );\n\t\tconst { animated } = $form.data();\n\n\t\tif ( !! animated ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$masks.each( function( i, obj ) {\n\t\t\tconst $mask = $( obj );\n\t\t\tconst height = $mask.outerHeight();\n\n\t\t\t$mask.data( 'height', height );\n\t\t\t$mask.css( {\n\t\t\t\theight: 0,\n\t\t\t\toverflow: 'hidden'\n\t\t\t} );\n\t\t} );\n\n\t}\n\n\tfunction resetMasksHeights( $form ) {\n\t\tconst $masks = $form.find( MASK_SELECTOR );\n\n\t\t$masks.each( function( i, obj ) {\n\t\t\t$( obj ).css( {\n\t\t\t\theight: '',\n\t\t\t\toverflow: ''\n\t\t\t} );\n\t\t} );\n\t}\n\n\tfunction onFocus( e ) {\n\t\tconst $textarea = $( this );\n\t\tconst $form = $textarea.closest( FORM_SELECTOR );\n\t\tconst $masks = $form.find( MASK_SELECTOR );\n\n\t\tconst textareaHeight = $textarea.outerHeight();\n\t\tconst targetHeight = 200;\n\n\t\t$masks.velocity( {\n\t\t\ttween: [1, 0]\n\t\t}, {\n\t\t\tduration: TRANSITION_DURATION,\n\t\t\teasing: TRANSITION_EASING,\n\t\t\tbegin: function() {\n\t\t\t\tresetMasksHeights( $form );\n\t\t\t\tupdateMasksHeights( $form );\n\n\t\t\t\t$form.data( 'animated', true );\n\t\t\t\t$textarea.css( 'transition', 'none' );\n\t\t\t\t$commentForm.addClass('comment-form--is-expanded');\n\t\t\t},\n\t\t\tprogress: function( elements, percentComplete, remaining, tweenValue, activeCall ) {\n\n\t\t\t\t$( elements ).each( function( i, element ) {\n\t\t\t\t\tconst $element = $( element );\n\t\t\t\t\tconst height = parseInt( $element.data( 'height' ), 10 );\n\t\t\t\t\t$element.css( 'min-height', height * tweenValue );\n\t\t\t\t} );\n\n\t\t\t\tconst newHeight = textareaHeight + ( targetHeight - textareaHeight ) * tweenValue;\n\t\t\t\t$textarea.css( 'min-height', newHeight );\n\t\t\t},\n\t\t\tcomplete: function() {\n\t\t\t\tresetMasksHeights( $form );\n\t\t\t\tupdateTemporaryFormHeight();\n\n\t\t\t\t$textarea.css( 'transition', '' );\n\t\t\t}\n\t\t} )\n\t}\n\n\tfunction highlightCommentOnClick() {\n\n\t\t$('.feature-comments').unbind('click');\n\n\t\t$('body').on('click', '.feature-comments', function () {\n\t\t\tlet $this = $(this);\n\n\t\t\t$.ajax({\n\t\t\t\turl: highlight_comments_ajax_object.ajaxurl,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\t'action': 'handle_highlight_comment',\n\t\t\t\t\t'do': $this.data('do'),\n\t\t\t\t\t'comment_id': $this.data('comment_id'),\n\t\t\t\t\t'nonce': $this.data('nonce')\n\t\t\t\t},\n\t\t\t\tsuccess: function (response) {\n\t\t\t\t\tlet action = $this.attr('data-do'),\n\t\t\t\t\t\tcomment_id = $this.attr('data-comment_id'),\n\t\t\t\t\t\t$comment = $(\"#comment-\" + comment_id),\n\t\t\t\t\t\t$this_and_comment = $this.siblings('.feature-comments').add($comment).add($this);\n\t\t\t\t\tif (action === 'highlight')\n\t\t\t\t\t\t$this_and_comment.addClass('comment-highlighted');\n\t\t\t\t\tif (action === 'unhighlight')\n\t\t\t\t\t\t$this_and_comment.removeClass('comment-highlighted');\n\n\t\t\t\t\t$this.data('nonce', response);\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tfunction uncheckCheckboxes( event ) {\n\n\t\t// If checkbox is not available, do nothing.\n\t\t// Currently the dropdown is visibile for authors.\n\n\t\tif ( ! $commentCheckboxes.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! $( event.target ).is( $commentDropdown) ) {\n\t\t\t$commentCheckboxes.prop('checked', false);\n\t\t}\n\t}\n\n\tfunction changeCommentFormPosition() {\n\n\t\t// If the block is not in viewport, do nothing.\n\t\tif ( ! isAnyPartOfElementInViewport($conversationsBlock[0]) || $commentListHeight < $(window).height() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet scrollIsUp = scrollDir === 'up',\n\t\t\t$thirdComment = $commentList.find('.comment').eq(3),\n\t\t\tthirdCommentIsInViewport = isAnyPartOfElementInViewport($thirdComment[0]),\n\t\t\tplaceholderIsInViewport = isAnyPartOfElementInViewport($commentPlaceholder[0]),\n\t\t\tformIsInViewport = isAnyPartOfElementInViewport($commentForm[0]);\n\n\t\t// This is for the use-case when user has scrolled to bottom\n\t\t// and is refreshing the page. Whenever the placeholder is in viewport\n\t\t// The comment form should be after .comment-list.\n\n\t\t// The third comment is in viewport, we are scrolling down,\n\t\t// so we should move the comment form after comment list.\n\n\t\tif ( ! formIsMoved && ( placeholderIsInViewport || ( thirdCommentIsInViewport && !scrollIsUp ) ) && ! formIsInViewport ) {\n\t\t\t$commentForm.insertAfter($commentPlaceholder);\n\t\t\t$temporaryForm.insertBefore($commentList);\n\t\t\tformIsMoved = true;\n\t\t}\n\n\t\t// If the third comment is in viewport we are scrolling up,\n\t\t// so we should move the comment form before comment list.\n\t\tif ( thirdCommentIsInViewport && formIsMoved && scrollIsUp && ! formIsInViewport ) {\n\t\t\t$commentForm.insertBefore($commentList);\n\t\t\t$temporaryForm.insertAfter($commentPlaceholder);\n\t\t\tformIsMoved = false;\n\t\t}\n\t}\n\n\tfunction addTemporaryForm() {\n\n\t\t// If we cannot find our comment form, do nothing.\n\t\t// If we cannot find our placeholder, do nothing.\n\t\tif( ! $commentForm.length || ! $commentPlaceholder.length || $commentListHeight < $(window).height() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet\ttemporaryFieldMarkup = $(\"<div class='temporary-form'></div>\");\n\n\t\ttemporaryFieldMarkup.insertAfter( $commentPlaceholder );\n\n\t\treturn temporaryFieldMarkup;\n\t}\n\n\tfunction updateTemporaryFormHeight() {\n\t\t// If we cannot find temporary form markup, do nothing.\n\t\tif ( typeof $temporaryForm === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet $commentFormHeight = $commentForm.outerHeight();\n\n\t\t$temporaryForm.css('height', $commentFormHeight);\n\t}\n\n\tfunction handleCommentReplyingClass() {\n\n\t\t// If temporary form does not exist,\n\t\t// We do not need this class.\n\t\tif (typeof $temporaryForm === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (\"MutationObserver\" in window) {\n\n\t\t\t// We use an observer to better handle user replying.\n\t\t\tvar observer = new MutationObserver(function(mutations) {\n\t\t\t\tif (document.contains($('#wp-temp-form-div')[0]) ) {\n\t\t\t\t\t$block.addClass(USER_REPLYING_CLASS);\n\t\t\t\t} else {\n\t\t\t\t\t$block.removeClass(USER_REPLYING_CLASS);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tobserver.observe(document.body, { childList: true,  subtree: true });\n\t\t}\n\t}\n\n\tfunction copyLinkToClipboard (event) {\n\n\t\tevent.preventDefault();\n\n\t\tlet copyText = $(this).attr('href'),\n\t\t\tsucceeded;\n\n\t\t$notification.removeClass( NOTIFICATION_VISIBLE_CLASS );\n\n\t\tdocument.addEventListener('copy', function(e) {\n\t\t\te.clipboardData.setData('text/plain', copyText);\n\t\t\te.preventDefault();\n\t\t}, true);\n\n\t\ttry {\n\t\t\tsucceeded = document.execCommand( 'copy' );\n\t\t} catch (err) {\n\t\t\tsucceeded = false;\n\t\t}\n\n\t\tif ( succeeded ) {\n\t\t\tsetTimeout(function () {\n\t\t\t\t$notification.addClass( NOTIFICATION_VISIBLE_CLASS );\n\t\t\t}, 0);\n\t\t}\n\t}\n\n} )( jQuery, window );\n","(function() { module.exports = this[\"novablocks\"][\"icons\"]; }());","(function() { module.exports = this[\"novablocks\"][\"utils\"]; }());"],"sourceRoot":""}