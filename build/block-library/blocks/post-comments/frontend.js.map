{"version":3,"sources":["webpack://novablocks/webpack/bootstrap","webpack://novablocks/@novablocks/block-library/src/blocks/post-comments/frontend.js","webpack://novablocks/external {\"this\":[\"novablocks\",\"utils\"]}"],"names":["FORM_SELECTOR","MASK_SELECTOR","COMMENT_TEXTAREA_SELECTOR","TRANSITION_DURATION","TRANSITION_EASING","$","window","undefined","featureCommentOnClick","each","i","element","$form","handleMarkup","bindEvents","onResize","on","find","one","onFocus","updatePlaceholder","updateMasksHeights","$textarea","desktopPlaceholder","placeholder","attr","$comment","$others","nextAll","$commentLabel","$commentDescription","add","wrapAll","$masks","data","animated","obj","$mask","height","outerHeight","css","overflow","resetMasksHeights","e","closest","textareaHeight","targetHeight","velocity","tween","duration","easing","begin","progress","elements","percentComplete","remaining","tweenValue","activeCall","$element","parseInt","newHeight","complete","unbind","$this","ajax","url","featured_comments_ajax_object","ajaxurl","type","success","response","action","comment_id","$this_and_comment","siblings","addClass","removeClass","jQuery"],"mappings":"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","file":"./build/block-library/blocks/post-comments/frontend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./packages/block-library/build/blocks/post-comments/frontend.js\");\n","import { above } from \"@novablocks/utils\";\n\nconst FORM_SELECTOR = '.comment-form';\nconst MASK_SELECTOR = '.comment-fields-mask';\nconst COMMENT_TEXTAREA_SELECTOR = '.comment-form-comment textarea';\n\nconst TRANSITION_DURATION = 1000;\nconst TRANSITION_EASING = \"easeOutCirc\";\n\n(function( $, window, undefined ) {\n\n\tfeatureCommentOnClick();\n\n\t$( FORM_SELECTOR ).each( function( i, element ) {\n\t\tconst $form = $( element );\n\n\t\thandleMarkup( $form );\n\t\tbindEvents( $form );\n\t\tonResize( $form );\n\t} );\n\n\tfunction bindEvents( $form ) {\n\t\t$( window ).on( 'resize', function() {\n\t\t\tonResize( $form );\n\t\t} );\n\n\t\t$form.find( COMMENT_TEXTAREA_SELECTOR ).one( 'focusin', onFocus );\n\t}\n\n\n\tfunction onResize( $form ) {\n\t\tupdatePlaceholder( $form );\n\t\tupdateMasksHeights( $form );\n\t}\n\n\tfunction updatePlaceholder( $form ) {\n\t\tconst $textarea = $form.find( COMMENT_TEXTAREA_SELECTOR );\n\t\tconst desktopPlaceholder = 'Join the conversation, share your knowledge or ask a question...';\n\t\tconst placeholder = above( 'lap' ) ? desktopPlaceholder : '';\n\n\t\t$textarea.attr( \"placeholder\", placeholder );\n\t}\n\n\tfunction handleMarkup( $form ) {\n\t\tlet $comment = $form.find( '.comment-form-comment' ),\n\t\t\t$others = $comment.nextAll(),\n\t\t\t$commentLabel = $comment.find( 'label' ),\n\t\t\t$commentDescription = $comment.find( '.field-description' );\n\n\t\t$commentLabel.add( $commentDescription )\n\t\t             .wrapAll( '<div class=\"comment-fields-mask\">' )\n\t\t             .wrapAll( '<div class=\"comment-fields-wrapper  comment-fields-wrapper--comment\">' );\n\n\t\t$others.wrapAll( '<div class=\"comment-fields-mask\">' )\n\t\t       .wrapAll( '<div class=\"comment-fields-wrapper  comment-fields-wrapper--others\">' );\n\t}\n\n\tfunction updateMasksHeights( $form ) {\n\t\tconst $masks = $form.find( MASK_SELECTOR );\n\t\tconst { animated } = $form.data();\n\n\t\tif ( !! animated ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$masks.each( function( i, obj ) {\n\t\t\tconst $mask = $( obj );\n\t\t\tconst height = $mask.outerHeight();\n\n\t\t\t$mask.data( 'height', height );\n\t\t\t$mask.css( {\n\t\t\t\theight: 0,\n\t\t\t\toverflow: 'hidden'\n\t\t\t} );\n\t\t} );\n\n\t}\n\n\tfunction resetMasksHeights( $form ) {\n\t\tconst $masks = $form.find( MASK_SELECTOR );\n\n\t\t$masks.each( function( i, obj ) {\n\t\t\t$( obj ).css( {\n\t\t\t\theight: '',\n\t\t\t\toverflow: ''\n\t\t\t} );\n\t\t} );\n\t}\n\n\tfunction onFocus( e ) {\n\t\tconst $textarea = $( this );\n\t\tconst $form = $textarea.closest( FORM_SELECTOR );\n\t\tconst $masks = $form.find( MASK_SELECTOR );\n\n\t\tconst textareaHeight = $textarea.outerHeight();\n\t\tconst targetHeight = 200;\n\n\t\t$masks.velocity( {\n\t\t\ttween: [1, 0]\n\t\t}, {\n\t\t\tduration: TRANSITION_DURATION,\n\t\t\teasing: TRANSITION_EASING,\n\t\t\tbegin: function() {\n\t\t\t\tresetMasksHeights( $form );\n\t\t\t\tupdateMasksHeights( $form );\n\n\t\t\t\t$form.data( 'animated', true );\n\t\t\t\t$textarea.css( 'transition', 'none' );\n\t\t\t},\n\t\t\tprogress: function( elements, percentComplete, remaining, tweenValue, activeCall ) {\n\n\t\t\t\t$( elements ).each( function( i, element ) {\n\t\t\t\t\tconst $element = $( element );\n\t\t\t\t\tconst height = parseInt( $element.data( 'height' ), 10 );\n\t\t\t\t\t$element.css( 'height', height * tweenValue );\n\t\t\t\t} );\n\n\t\t\t\tconst newHeight = textareaHeight + ( targetHeight - textareaHeight ) * tweenValue;\n\t\t\t\t$textarea.css( 'height', newHeight );\n\t\t\t},\n\t\t\tcomplete: function() {\n\t\t\t\tresetMasksHeights( $form );\n\n\t\t\t\t$textarea.css( 'transition', '' );\n\t\t\t}\n\t\t} )\n\t}\n\n\tfunction featureCommentOnClick() {\n\n\t\t$('.feature-comments').unbind('click');\n\n\t\t$('body').on('click', '.feature-comments', function () {\n\t\t\tlet $this = $(this);\n\n\t\t\t$.ajax({\n\t\t\t\turl: featured_comments_ajax_object.ajaxurl,\n\t\t\t\ttype: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\t'action': 'handle_featured_comments',\n\t\t\t\t\t'do': $this.data('do'),\n\t\t\t\t\t'comment_id': $this.data('comment_id'),\n\t\t\t\t\t'nonce': $this.data('nonce')\n\t\t\t\t},\n\t\t\t\tsuccess: function (response) {\n\t\t\t\t\tlet action = $this.attr('data-do'),\n\t\t\t\t\t\tcomment_id = $this.attr('data-comment_id'),\n\t\t\t\t\t\t$comment = $(\"#comment-\" + comment_id),\n\t\t\t\t\t\t$this_and_comment = $this.siblings('.feature-comments').add($comment).add($this);\n\t\t\t\t\tif (action === 'feature')\n\t\t\t\t\t\t$this_and_comment.addClass('comment-featured');\n\t\t\t\t\tif (action === 'unfeature')\n\t\t\t\t\t\t$this_and_comment.removeClass('comment-featured');\n\n\t\t\t\t\t$this.data('nonce', response);\n\t\t\t\t}\n\t\t\t})\n\n\t\t\treturn false;\n\t\t});\n\t}\n\n} )( jQuery, window );\n","(function() { module.exports = this[\"novablocks\"][\"utils\"]; }());"],"sourceRoot":""}