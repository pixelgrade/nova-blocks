{"version":3,"sources":["webpack://novablocks/webpack/bootstrap","webpack://novablocks/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://novablocks/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://novablocks/./node_modules/@babel/runtime/helpers/createClass.js","webpack://novablocks/./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack://novablocks/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://novablocks/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://novablocks/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://novablocks/@novablocks/advanced-gallery/src/frontend.js","webpack://novablocks/@novablocks/advanced-gallery/src/grid-item.js","webpack://novablocks/@novablocks/advanced-gallery/src/utils.js","webpack://novablocks/external {\"this\":[\"novablocks\",\"blob/frontend\"]}","webpack://novablocks/external {\"this\":[\"novablocks\",\"utils\"]}","webpack://novablocks/external {\"this\":\"jQuery\"}"],"names":["each","i","gallery","$gallery","$grid","find","images","toArray","attributes","data","gridItemsCollection","GridItemCollection","gridItems","map","gridItem","index","$image","image","$item","closest","css","getStyle","getImageStyle","galleryStyle","propertyName","indexOf","style","setProperty","length","gridStyle","get","obj","ITEM_SIZE","placementVariation","groupStart","Math","floor","groupEnd","min","isGroupOfThree","GridItem","removeExtra","flipX","flipY","extraLeft","getExtraLeft","extraTop","getExtraTop","extraBetween","getExtraBetween","groupIndex","x","y","maxX","max","width","maxY","height","firstGroup","slice","maxBottom","sizeContrast","positionShift","objectPosition","imageResizing","imageRotation","idx","getIndex","col","row","getOffsets","offsetX","offsetY","size","rotation","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","transform","positionY","positionX","objectFit","getRandomAttributes","elementsDistance","stylePreset","getGalleryStyle","containerHeight","numerator","denominator","abs","paddingTop","getGridStyle","safariHeightFix","grid","isSafari","parent","parentNode","$parent","resetHeight","newHeight","outerHeight","debouncedResetHeight","window","ResizeObserver","observer","entries","observe","on"],"mappings":"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","file":"./build/advanced-gallery/frontend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./packages/advanced-gallery/build/frontend.js\");\n","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","import $ from 'jquery';\n\nimport '@novablocks/blob/frontend';\n\nimport { GridItemCollection } from './grid-item';\nimport { getGalleryStyle, getGridStyle, safariHeightFix } from './utils';\n\n$( function() {\n\n\t$( '.novablocks-advanced-gallery' ).each( ( i, gallery ) => {\n\n\t\tconst $gallery = $( gallery );\n\t\tconst $grid = $gallery.find( '.novablocks-advanced-gallery__grid' );\n\t\tconst images = $gallery.find( '.novablocks-advanced-gallery__image' ).toArray();\n\t\tconst attributes = $gallery.data();\n\t\tconst gridItemsCollection = new GridItemCollection( images, attributes );\n\n\t\tgridItemsCollection.gridItems.map( ( gridItem, index ) => {\n\t\t\tlet $image = $( gridItem.image ),\n\t\t\t\t$item = $image.closest( '.novablocks-advanced-gallery__grid-item' );\n\n\t\t\t$item.css( gridItem.getStyle() );\n\t\t\t$image.css( gridItem.getImageStyle() );\n\t\t} );\n\n\t\tconst galleryStyle = getGalleryStyle( attributes );\n\n\t\tfor ( let propertyName in galleryStyle ) {\n\t\t\t$gallery.css( galleryStyle );\n\n\t\t\tif ( propertyName.indexOf( '--' ) === 0 ) {\n\t\t\t\tgallery.style.setProperty( propertyName, galleryStyle[ propertyName ] );\n\t\t\t}\n\t\t}\n\n\t\tif ( $grid.length ) {\n\n\t\t\tconst gridStyle = getGridStyle( attributes );\n\n\t\t\t$grid.css( gridStyle );\n\n\t\t\tfor ( let propertyName in gridStyle ) {\n\t\t\t\tif ( propertyName.indexOf( '--' ) === 0 ) {\n\t\t\t\t\t$grid.get( 0 ).style.setProperty( propertyName, gridStyle[propertyName] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t} );\n\n\t$( '.novablocks-advanced-gallery__grid' ).each( function( i, obj ) {\n\t\tsafariHeightFix( obj );\n\t} );\n\n} );\n","const ITEM_SIZE = 20;\n\nexport class GridItemCollection {\n\n\tconstructor( images, attributes ) {\n\t\tconst placementVariation = attributes.placementVariation / 25 - 1;\n\n\t\tthis.gridItems = images.map( ( image, index ) => {\n\t\t\tconst groupStart = Math.floor( index / 4 ) * 4;\n\t\t\tconst groupEnd = Math.min( groupStart + 4, images.length );\n\t\t\tconst isGroupOfThree = groupEnd - groupStart === 3;\n\n\t\t\treturn new GridItem( image, index, attributes, isGroupOfThree );\n\t\t} );\n\n\t\tthis.removeExtra();\n\n\t\tif ( placementVariation === 1 || placementVariation === 2 ) {\n\t\t\tthis.flipX();\n\t\t}\n\n\t\tif ( placementVariation === 2 || placementVariation === 3 ) {\n\t\t\tthis.flipY();\n\t\t}\n\t}\n\n\tremoveExtra() {\n\t\tconst extraLeft = this.getExtraLeft();\n\t\tconst extraTop = this.getExtraTop();\n\t\tconst extraBetween = this.getExtraBetween();\n\n\t\tthis.gridItems = this.gridItems.map( ( gridItem, index ) => {\n\t\t\tconst groupIndex = Math.floor( index / 4 );\n\n\t\t\tgridItem.x = gridItem.x - extraLeft;\n\t\t\tgridItem.y = gridItem.y - extraTop - groupIndex * extraBetween;\n\n\t\t\treturn gridItem;\n\t\t} );\n\t}\n\n\tflipX() {\n\t\tconst maxX = Math.max( ...this.gridItems.map( gridItem => gridItem.x + gridItem.width ) );\n\n\t\tthis.gridItems = this.gridItems.map( ( gridItem, index ) => {\n\t\t\tgridItem.x = maxX - gridItem.x - gridItem.width + 1;\n\t\t\treturn gridItem;\n\t\t} );\n\t}\n\n\tflipY() {\n\t\tconst maxY = Math.max( ...this.gridItems.map( gridItem => gridItem.y + gridItem.height ) );\n\n\t\tthis.gridItems = this.gridItems.map( ( gridItem, index ) => {\n\t\t\tgridItem.y = maxY - gridItem.y - gridItem.height + 1;\n\t\t\treturn gridItem;\n\t\t} );\n\t}\n\n\tgetExtraLeft() {\n\t\treturn Math.min( ...this.gridItems.map( gridItem => gridItem.x ) ) - 1;\n\t}\n\n\tgetExtraTop() {\n\t\treturn Math.min( ...this.gridItems.map( gridItem => gridItem.y ) ) - 1;\n\t}\n\n\tgetExtraBetween() {\n\t\tconst firstGroup = this.gridItems.slice( 0, 4 );\n\t\tconst maxBottom = Math.max( ...firstGroup.map( gridItem => gridItem.y + gridItem.height ) );\n\n\t\treturn ITEM_SIZE * 2 - maxBottom + 1;\n\t}\n}\n\nexport class GridItem {\n\n\tconstructor( image, index, attributes, isGroupOfThree ) {\n\n\t\tthis.sizeContrast = attributes.sizeContrast / 20;\n\t\tthis.positionShift = attributes.positionShift / 5;\n\t\tthis.objectPosition = attributes.objectPosition;\n\t\tthis.imageResizing = attributes.imageResizing;\n\t\tthis.imageRotation = attributes.imageRotation;\n\n\t\tthis.image = image;\n\t\tthis.index = index;\n\n\t\tthis.idx = this.getIndex( index );\n\t\tthis.col = this.idx % 2;\n\t\tthis.row = Math.floor( index / 2 );\n\n\t\tif ( !! isGroupOfThree ) {\n\n\t\t\tif ( index === 0 ) {\n\t\t\t\tthis.positionShift = Math.min( this.positionShift, 10 );\n\t\t\t}\n\n\t\t\tif ( index === 2 ) {\n\t\t\t\tthis.positionShift = Math.max( this.positionShift, 10 );\n\t\t\t}\n\n\t\t}\n\n\t\tlet { offsetX, offsetY } = this.getOffsets();\n\t\tconst size = ITEM_SIZE - this.sizeContrast * ( index % 4 );\n\n\t\tthis.x = ITEM_SIZE * this.col + 1 + offsetX;\n\t\tthis.y = ITEM_SIZE * this.row + 1 + offsetY;\n\n\t\tthis.width = size;\n\t\tthis.height = size;\n\t}\n\n\tgetOffsets() {\n\t\tconst { row, col, index, sizeContrast, positionShift } = this;\n\n\t\t// offset for positioning\n\t\tlet offsetX = ( 1 - col % 2 ) * ( index % 4 ) * sizeContrast;\n\t\tlet offsetY = ( 1 - row % 2 ) * ( index % 4 ) * sizeContrast;\n\n\t\t// offset from offset\n\t\t// move 1st to right\n\t\toffsetX += ( 1 - col % 2 ) * ( 1 - row % 2 ) * positionShift;\n\t\t// move 3rd to left\n\t\toffsetX -= ( col % 2 ) * ( row % 2 ) * positionShift;\n\t\t// move 2nd down\n\t\toffsetY -= ( 1 - col % 2 ) * ( row % 2 ) * positionShift;\n\t\t// move 4th up\n\t\toffsetY += ( col % 2 ) * ( 1 - row % 2 ) * positionShift;\n\n\t\treturn {\n\t\t\toffsetX,\n\t\t\toffsetY,\n\t\t}\n\t}\n\n\t// reoder to display items clockwise\n\tgetIndex( index ) {\n\t\tif ( index % 4 === 3 ) return index - 1;\n\t\tif ( index % 4 === 2 ) return index + 1;\n\n\t\treturn index;\n\t}\n\n\tgetStyle() {\n\t\tconst { index, x, y, width, height, imageRotation } = this;\n\t\tconst rotation = `rotate(${ ( index % 2 - 0.5 ) * imageRotation / 10 }deg)`;\n\n\t\treturn {\n\t\t\tgridColumnStart: x + '',\n\t\t\tgridColumnEnd: `span ${ width }`,\n\t\t\tgridRowStart: y + '',\n\t\t\tgridRowEnd: `span ${ height }`,\n\t\t\ttransform: rotation,\n\t\t};\n\t}\n\n\tgetImageStyle() {\n\t\tconst { row, col, objectPosition, imageResizing } = this;\n\t\tconst positionY = row % 2 === 0 ? 100 - objectPosition : objectPosition;\n\t\tconst positionX = col % 2 === 0 ? 100 - objectPosition : objectPosition;\n\n\t\treturn {\n\t\t\tobjectFit: imageResizing === 'cropped' ? 'cover' : 'scale-down',\n\t\t\tobjectPosition: `${ positionX }% ${ positionY }%`,\n\t\t}\n\t}\n}\n","import $ from 'jquery';\nimport { debounce, isSafari, getRandomBetween } from \"@novablocks/utils\";\n\nexport const getRandomAttributes = () => {\n\treturn {\n\t\tsizeContrast: getRandomBetween(0, 5) * 20,\n\t\tpositionShift: getRandomBetween(0, 20) * 5,\n\t\telementsDistance: getRandomBetween(0, 5) * 20,\n\t\tplacementVariation: getRandomBetween(1, 4) * 25,\n\t\tstylePreset: 'just-my-style',\n\t};\n};\n\nexport const getGalleryStyle = ( attributes ) => {\n\tlet containerHeight = attributes.containerHeight / 50 - 1;\n\tlet numerator = 1;\n\tlet denominator = 1;\n\n\tcontainerHeight = Math.min( Math.max( -1, containerHeight ), 1 );\n\n\tif ( containerHeight > 0 ) {\n\t\tnumerator = 1 + containerHeight;\n\t}\n\n\tif ( containerHeight < 0 ) {\n\t\tdenominator = 1 + Math.abs( containerHeight );\n\t}\n\n\treturn {\n\t\tpaddingTop: `${ numerator * 100 / denominator }%`,\n\t}\n};\n\nexport const getGridStyle = ( attributes ) => {\n\tconst { elementsDistance } = attributes;\n\n\treturn {\n\t\t'--novablocks-advanced-gallery-grid-gap': `${ elementsDistance }px`\n\t}\n};\n\nexport const safariHeightFix = ( grid ) => {\n\n\tif ( ! isSafari ) {\n\t\treturn;\n\t}\n\n\tconst parent = grid.parentNode;\n\tconst $grid = $( grid );\n\tconst $parent = $( parent );\n\n\tconst resetHeight = () => {\n\t\tconst newHeight = $parent.outerHeight();\n\n\t\t$grid.css( 'height', newHeight );\n\t};\n\n\tconst debouncedResetHeight = debounce( resetHeight, 30 );\n\n\tresetHeight();\n\n\tif ( typeof window.ResizeObserver !== \"undefined\" ) {\n\t\tconst observer = new window.ResizeObserver( entries => {\n\t\t\tdebouncedResetHeight();\n\t\t} );\n\n\t\tobserver.observe( parent );\n\t} else {\n\t\t$( window ).on( 'resize', function() {\n\t\t\tdebouncedResetHeight();\n\t\t} );\n\t}\n};\n","(function() { module.exports = this[\"novablocks\"][\"blob/frontend\"]; }());","(function() { module.exports = this[\"novablocks\"][\"utils\"]; }());","(function() { module.exports = this[\"jQuery\"]; }());"],"sourceRoot":""}