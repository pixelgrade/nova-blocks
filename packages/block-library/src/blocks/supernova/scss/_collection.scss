.nb-collection__layout {
  --nb-grid-spacing: calc(var(--nb-spacing) * var(--nb-grid-spacing-modifier) * 0.02);
}

.nb-collection__layout--fixed-width {
  .supernova-item:not(.supernova-item--aspect-ratio-auto) {
    .novablocks-card__media-image {
      @include image-cover;
    }
  }
}

.supernova-item--aspect-ratio-auto {

  .novablocks-media-composition__image {
    position: static;

    display: block;
    width: 100%;
    height: auto;
    min-width: 0;
    min-height: 0;
    transform: none;
  }

  .novablocks-media-composition__grid-item-media {
    flex-grow: 0;
  }

  .blob-mix {
    position: relative;
  }

  .blob-mix__mask {
    position: static;
    height: auto;
  }

  .blob-mix__media {
    position: relative;
    height: auto;
  }
}

@mixin with-editor-layout-selectors {

  &:not(.nb-collection__layout--edit),
  &.nb-collection__layout--edit > .block-editor-inner-blocks > .block-editor-block-list__layout {
    @content;
  }
}

.nb-collection__layout--classic,
.nb-collection__layout--parametric {
  --nb-collection-columns: var(--nb-collection-columns-count);
  --nb-collection-columns-below-tablet: 1;
  
  @include below(tablet) {
    --nb-collection-columns: var(--nb-collection-columns-below-tablet, 1);
  }

  @include with-editor-layout-selectors {
    display: grid;
    grid-gap: var(--nb-grid-spacing);
    grid-template-columns: repeat(var(--nb-collection-columns, 1), 1fr);

    > * {
      width: 100%;
      margin: 0;
    }
  }
}

.nb-collection__layout--parametric {
  --parametric-gap: var(--nb-grid-spacing);
}
