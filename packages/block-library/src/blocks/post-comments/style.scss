:root {
	--avatar-column-size: 45px;
	--comments-grid-gap: 10px;
	--component-accent-color: var(--novablocks-color-1);
	--novablocks-conversations-width: 48em;
	--field-description-color: #67616B;
	--conversations-bg-color: #E4E3E4;
	--comment-author-color: var(--novablocks-color-1);
	--comment-links-color: var(--novablocks-color-1);
	--comment-highlighted-color: #FFF2CE;
	--label-font-size: 15px;
	--label-bg-color: #9195AB;
	--label-highlighted-bg-color: #1479D2;
	--label-border-radius: 999em;
	--field-description-font-size: 13px;

	@include above(tablet) {
		--field-description-font-size: 16px;
		--label-font-size: 18px;
		--avatar-column-size: 50px;
		--comments-grid-gap: 20px;
	}
}

.novablocks-conversations {

	.comment-form {
		position: relative;

		p:empty {
			display: none;
		}

		label {
			//font-size: var(--label-font-size);
			font-weight: bold;
		}

		.field-description {
			display: block;

			//font-size: var(--field-description-font-size);
			//color: var(--field-description-color);
		}
	}

	.comment-form-comment {
		margin-bottom: 0;

		.comment-fields-wrapper {
			padding-bottom: calc( var(--novablocks-spacing) * 0.25 );
		}
	}

	.comment-fields-wrapper--others {
		padding-top: calc( var(--novablocks-spacing) * 0.5 );
	}

	.novablocks-conversations__container > *,
	.comment-fields-wrapper,
	.comment-fields-wrapper > * {
		@include block-spacing;
	}

	.comment-fields-wrapper,
	.comment-fields-wrapper > * {
		--novablocks-element-spacing-multiplier: 0.5;
	}

	.comment-fields-wrapper > .field-description {
		--novablocks-element-spacing-multiplier: 0; // ??? possible
	}

	.comment-fields-wrapper > .field-description + *,
	.comment-fields-wrapper > label + :not(.field-description) {
		--novablocks-element-spacing-multiplier: 0.25;
	}

	.comment-author {
		font-weight: bold;
		//color: var(--comment-author-color);
	}

	.comment-posted-time,
	.reply {
		opacity: .5;
	}

	a {
		color: currentColor;
		text-decoration: underline;
	}

	.comment-edit-link,
	.comment-reply-link {
		margin-left: 1em;
	}

	.comment-list {

		.comment-respond {

			@include above(tablet) {
				padding-left: calc(var(--avatar-column-size) + var(--comments-grid-gap));
			}
		}
	}

	.avatar {
		max-width: 100%;
		height: auto;
		border-radius: 50%;
	}

	.form-grid {
		display: grid;
		grid-template-columns: auto;
		grid-column-gap: var(--comments-grid-gap);
		grid-auto-columns: 1fr;

		justify-content: stretch;
	}

	.comment-avatar {
		width: var(--avatar-column-size);
		grid-row: 1 / span 2;
	}

	.form-grid > .comment-avatar ~ * {
		grid-column: 2 / 3;
	}

	.parent {

		@include above(tablet) {

			> .comment {
				padding-left: calc( var(--comments-grid-gap) + var(--avatar-column-size) );
			}
		}

		@include below(tablet) {
			margin-left: calc( -1 * var(--site-container-spacings) );
			margin-right: calc( -1 * var(--site-container-spacings) );

			background-color: rgba(0,0,0,0.1);

			> .comment-wrapper {
				background-color: var(--conversations-bg-color);
			}

			> .comment,
			> .comment-wrapper,
			> .comment-respond {
				padding-left: var(--site-container-spacings);
				padding-right: var(--site-container-spacings);
			}
		}
	}

	.comment-respond,
	.comment-wrapper {
		--element-spacing: calc( var(--novablocks-spacing) * 0.5 );

		padding-top: var(--element-spacing);
		padding-bottom: var(--element-spacing);
		border-radius: 0 0 var(--element-spacing) var(--element-spacing);
	}

	.comment-body,
	.comment-meta {
		display: grid;
		grid-column-gap: var(--comments-grid-gap);
	}

	.comment-body {
		grid-template-columns: var(--avatar-column-size) 1fr;
	}

	.comment-meta {
		grid-column: 1 / span 2;
		grid-template-columns: var(--avatar-column-size) 1fr auto;
	}

	// layout
	.comment-author-avatar,
	.comment-author-info,
	.comment-content,
	.comment-footer-meta {
		grid-column: 2 / span 1;
	}

	.comment-author-avatar {
		grid-row-start: 1;
		grid-column: 1 / span 1;
	}

	.comment-author-info {
		grid-row-start: 1;
		grid-column: 2 / span 1;
	}

	// spacing
	.comment-author-avatar,
	.comment-author-info,
	.comment-content,
	.comment-footer-meta {
		@include block-spacing;
		--novablocks-element-spacing-multiplier: 0.25;
	}

	.comment-author-info {
		margin-top: 0;
	}

	.depth-1 > .comment-wrapper .comment-body {

		@include below(tablet) {

			> :not(.comment-author-avatar):not(.comment-author-info) {
				grid-column: 1 / span 2;
			}
		}
	}

	.comment-footer-meta {
		display: flex;
		align-items: center;

		.reply {
			display: flex;
			align-items: center;

			a {
				margin-bottom: 0;
			}
		}
	}

	.commenter-background {
		display: flex;
		margin-top: 0.125em;
	}

	.commenter-background-label {
		display: inline-block;
		padding: 0.15em 0.7em 0.2em 0.75em;

		border-radius: var(--label-border-radius);
		background-color: var(--label-bg-color);
		color: var(--novablocks-light-1);

		@include below(tablet) {
			padding: 0.1em 0.45em 0.15em 0.5em;
			--label-border-radius: 0.5em;
		}
	}

	.comment--is-highlighted {

		> .comment-wrapper {
			padding: 0;

			 > .comment-body {
				padding: 1em;
				//background-color: var(--comment-highlighted-color);

				@include above(tablet) {
					border-radius: 0 25px;
				}
			}
		}

		.commenter-background-label {
			--label-bg-color: var(--label-highlighted-bg-color);
		}
	}

	.comment.bypostauthor {

		.commenter-background-label {
			--label-bg-color: var(--label-highlighted-bg-color);
			--label-border-radius: 0;
		}
	}

	.comment-respond {
		display: flex;
		flex-direction: column;
	}

	[id="cancel-comment-reply-link"] {
		padding-left: calc(var(--avatar-column-size) + var(--comments-grid-gap));

		text-align: center;

		order: 2;
		opacity: .5;
	}

	textarea,
	input {
		width: 100%;
		display: block;
		min-height: auto;
	}

	.comment-respond {
		small {
			padding-left: 0;
		}
	}

	.form-submit {
		button {
			width: 100%;
		}
	}
}

.comment-author-avatar {
	grid-area: avatar;

	@include below(tablet) {
		align-self: center;
	}
}

.comment-author-info {
	align-self: center;
}

@include below(tablet) {

	.comment-form-details {
		grid-column: span 2 !important;
	}

	.comment-form-comment,
	.comment-form-details {
		grid-row: span 1;
	}

	.form-grid {
		grid-row-gap: var(--comments-grid-gap);
	}
}
