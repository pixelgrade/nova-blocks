@import 'scss/mixins';
@import 'scss/menu-toggle';
@import 'scss/reading-bar';

@import 'scss/header-mobile';
@import 'scss/header-secondary';

:root {
  --icons-size-multiplier: 1.3;
  --icons-horizontal-spacing-reducer: 2;
}

@property --nb-header-vertical-spacing-multiplier {
  syntax: '<number>'; /* <- defined as type number for the transition to work */
  initial-value: 1;
  inherits: false;
}

.novablocks-header[class] {
  width: 100%;
  --nb-navigation-item-spacing: calc(var(--nb-navigation-item-spacing-setting) * var(--nb-spacing) * 2 / 100);

  .novablocks-header-row {
    --nb-wrapper-sides-spacings: calc( var(--nb-spacing) * var(--nb-header-sides-spacing-setting, 50) * 2 / 100 );

    // Size down the vertical spacing of the header rows
    // by adding the `--nb-header-vertical-spacing-multiplier`
    // variable to the default formula.
    padding-top: calc(var(--nb-emphasis-top-spacing) * var(--nb-current-spacing) * var(--nb-header-vertical-spacing-multiplier));
    padding-bottom: calc(var(--nb-emphasis-bottom-spacing) * var(--nb-current-spacing) * var(--nb-header-vertical-spacing-multiplier));
  }

  @include above(lap) {

    :is(.novablocks-header-row, #specific) {
      transition: var(--nb-transition);
      transition-duration: .15s;
      transition-property: opacity, --nb-header-vertical-spacing-multiplier;
    }

    &:is(.is-sticky, .novablocks-header--secondary) .novablocks-header-row {
      --nb-header-vertical-spacing-multiplier: var(--nb-sticky-header-spacing-multiplier, 1);
    }
  }
}

:is(.novablocks-header, .novablocks-header--mobile, #more.specific) {
  --nb-block-top-spacing: 0;
}

.novablocks-header--sticky[class] {
  --header-background-opacity: 0.95;
}

.novablocks-header--mobile {

  @include above(lap) {
    display: none;
  }

  &.novablocks-header--scrolled {
    color: var(--sm-current-fg2-color, var(--nb-fg2-color));
  }
}

@include below(lap) {

  .novablocks-header__inner-container {
    display: flex;
    flex-direction: column;

    > .novablocks-header-row--primary {
      order: -1;
    }
  }
}

@include above(lap) {

  .novablocks-header--main {
    top: 0;
    left: 0;
    right: 0;
    z-index: 2001;

    transition: var(--theme-transition);
    transition-property: opacity;
  }

  .novablocks-header__inner-container {
    width: 100%;
  }
}

@import 'scss/mobile';
@import 'scss/mobile-transitions';

:where(.novablocks-header-background) {
  @include header-background;
}

:where(.novablocks-header-shadow) {
  @include header-shadow;
}

.novablocks-header:not(.novablocks-header--ready) {
  opacity: 0;
  --header-background-opacity: 0;
}

// Hide all header and header-row backgrounds when Header is *transparent*
.novablocks-header.novablocks-header--transparent:not(.novablocks-header--sticky) {

  @include above(lap) {
    --header-background-opacity: 0;
  }
}

.novablocks-header--mobile {

  &.novablocks-header--transparent {

    &:before {
      --header-background-opacity: 0;
    }
  }

  &:not(.novablocks-header--transparent) {
    --header-background-opacity: 0.95;
  }
}



/**
 * Badges for Menu Items
 *
 * Impose a few custom font rules outside of the Design System tokens.
 * Uppercase and letter-spacing helps small font sizes (10-11px) to be legible.
 * 
 * @todo: uppercase it's not working well with serif typefaces and we need to 
 * find a way to pass some exceptions based on font family
 */
.menu-item-label {
    @include badge(highlighted);
    --font-size-modifier: 0.7;

    // Custom font rules
    text-transform: uppercase;
    font-weight: bold;
    letter-spacing: 0.03em;
    
    vertical-align: middle;
    margin-left: var(--navigation-item-sub-elements-spacing);
}
