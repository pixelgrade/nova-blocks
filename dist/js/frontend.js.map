{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///./node_modules/classnames/index.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/unsplash-js/lib/unsplash.js","webpack:///./node_modules/js-cookie/src/js.cookie.js","webpack:///./node_modules/unsplash-js/lib/constants/index.js","webpack:///./node_modules/unsplash-js/lib/utils/index.js","webpack:///./node_modules/querystring-es3/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/querystring-es3/decode.js","webpack:///./node_modules/querystring-es3/encode.js","webpack:///./node_modules/form-urlencoded/form-urlencoded.js","webpack:///./node_modules/url-parse/index.js","webpack:///./node_modules/requires-port/index.js","webpack:///./node_modules/querystringify/index.js","webpack:///./node_modules/unsplash-js/lib/methods/auth.js","webpack:///./node_modules/unsplash-js/lib/methods/currentUser.js","webpack:///./node_modules/unsplash-js/lib/methods/users.js","webpack:///./node_modules/unsplash-js/lib/methods/photos.js","webpack:///./node_modules/lodash.get/index.js","webpack:///./node_modules/unsplash-js/lib/methods/collections.js","webpack:///./node_modules/unsplash-js/lib/methods/search.js","webpack:///./node_modules/unsplash-js/lib/methods/stats.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./src/utils/unsplash.js","webpack:///./src/utils/index.js","webpack:///./src/components/viewportObserver.js","webpack:///./src/blocks/announcement-bar/announcement-bar.js","webpack:///./src/blocks/announcement-bar/frontend.js","webpack:///./src/blocks/google-map/pin.js","webpack:///./src/blocks/google-map/default-map-center.js","webpack:///./src/blocks/google-map/styles/customized.js","webpack:///./src/blocks/google-map/styles/index.js","webpack:///./src/blocks/google-map/utils.js","webpack:///./src/components/with-parallax/util.js","webpack:///./src/blocks/google-map/frontend.js","webpack:///./src/blocks/hero/frontend.js","webpack:///./src/blocks/slideshow/frontend.js","webpack:///./src/components/advanced-gallery/util.js","webpack:///./src/components/advanced-gallery/grid-item.js","webpack:///./src/blocks/media/frontend.js","webpack:///./src/components/grid-generator/utils.js","webpack:///./src/components/grid-generator/layoutEngine.js","webpack:///./src/blocks/posts-collection/frontend.js","webpack:///./src/blocks/openhours/hoursparser.js","webpack:///./src/components/advanced-gallery/frontend.js","webpack:///./src/frontend.js"],"names":["APP_NAME","COLLECTION_ID","URL_PARAMS","encodeURI","PlaceholderImagesCollection","fetchedImages","images","normalize","bind","apiKey","window","pixcare","themeConfig","unsplashApiKey","api","Unsplash","accessKey","collections","getCollectionPhotos","then","toJson","photos","map","finally","fetch","photo","id","url","urls","full","type","width","height","sizes","large","regular","medium","small","thumbnail","thumb","novablocks_huge","novablocks_large","novablocks_medium","novablocks_tiny","title","description","caption","user","links","html","name","download","downloadPhoto","instance","getPlaceholderImages","get","getRandomBetween","min","max","random","Math","Number","MIN_VALUE","floor","getRandomArrayFromArray","arr","n","result","Array","len","length","taken","x","getRandomBooleanValue","debounce","func","wait","timeout","context","args","arguments","later","apply","clearTimeout","setTimeout","range","array","i","push","isSafari","test","navigator","userAgent","hasTouchScreen","maxTouchPoints","msMaxTouchPoints","mQ","matchMedia","media","matches","UA","findParents","target","query","parents","traverse","item","parent","parentNode","HTMLElement","shuffleArray","currentIndex","temporaryValue","randomIndex","defaultSnapValues","y","maybeSnapFocalPoint","focalPoint","snapValues","parseFloat","thereshold","forEach","snapValue","getSnapClassname","classNames","includes","join","getControlsClasses","attributes","compileAttributes","classes","compiledAttributes","Object","keys","some","key","classnames","getCardMediaPaddingTop","containerHeight","compiledHeight","numerator","denominator","abs","breakpoints","desktop","lap","tablet","mobile","below","breakpoint","innerWidth","above","viewportObserver","useOrientation","bindEvents","$window","$","updateViewportUnits","on","one","root","document","documentElement","windowWidth","screen","availWidth","windowHeight","availHeight","innerHeight","vw","vh","style","setProperty","AnnouncementBar","element","pieces","getPieces","jQuery","data","cookieName","disabled","Cookies","loggedIn","hasClass","removeClass","$element","close","find","onClose","addClass","set","expires","undefined","announcementElements","getElementsByClassName","announcementElementsArray","from","AnnouncementCollection","defaultMapCenter","lat","lng","styles","slug","label","customized","addVisibilityToStyles","showLabels","showIcons","unshift","compileStyles","styleData","props","styleSlug","accentColor","getMapAccentColor","call","styleDataString","JSON","stringify","replace","parse","getMapStyles","shouldHaveCustomStyles","selectedStyles","styleDataBySlug","mapStyles","settings","colors","fallbackColor","primary","color","secondary","tertiary","getCenterFromMarkers","markers","google","maps","bounds","LatLngBounds","center","LatLng","geometry","location","markerString","marker","viewport","union","extend","getCenter","getMarkersCenter","userPrefersReducedMotion","mediaQuery","getIntermediateFocalPoint","focalPoint1","focalPoint2","progress","getStyles","config","getProps","getStylesFromProps","parallaxAmount","moveX","moveY","offsetX","offsetY","scale","minHeight","maxWidth","transform","objectPosition","transformOrigin","getIntermediateValue","initialValue","finalValue","getScales","scrollingEffect","initialBackgroundScale","finalBackgroundScale","maxScale","newScale","getFocalPoint","finalFocalPoint","getNewImageHeight","scrollContainerHeight","fixed","distance","smoothStart","smoothEnd","container","containerBox","containerWidth","scrollContainer","scrollContainerBox","newFocalPoint","newImageHeight","top","left","getState","followThroughStart","followThroughEnd","offsetWidth","offsetHeight","getBoundingClientRect","current","getScrollContainerHeight","parallaxInit","$blocks","frameRendered","each","$container","state","$parallax","parallaxUpdateState","newConfig","assign","parallaxUpdateLoop","obj","$background","$foreground","css","requestAnimationFrame","mapInit","$obj","zoom","hideControls","pinColor","mapOptions","mapTypeId","disableDefaultUI","clickableIcons","keyboardShortcuts","Map","pinMarkup","pin","Marker","icon","encodeURIComponent","position","$heroes","windowScrollY","scrollButtonHidden","$scrollButton","bulletsInit","scrollButtonInit","updateScroll","scrollY","hideScrollButton","$body","shouldHaveBullets","is","fn","bully","filter","$hero","closest","heroBox","heroBoxTop","scrollTo","behavior","BLOCK_SELECTOR","SLIDER_SELECTOR","SLIDE_SELECTOR","FOREGROUND_SELECTOR","TRANSITION_DURATION","TRANSITION_EASING","onDebouncedResize","onResize","index","block","$block","$slider","$arrowContainer","resetBlockMinHeight","children","appendTo","onBeforeSlideChange","slick","rows","fade","prevArrow","nextArrow","appendArrows","speed","getBlockMinHeight","trigger","sliderWidth","outerWidth","sliderMinHeight","parseInt","mediaMinHeight","slideMaxHeight","maxAspectRatio","$slide","$media","aspectRatio","slideHeight","outerHeight","event","currentSlide","nextSlide","$currentSlide","$slides","$nextSlide","transition","getDirection","hasFixedBackground","$current","$next","sign","slideWidth","move","isFixed","velocity","tween","duration","easing","begin","elements","percentComplete","remaining","tweenValue","activeCall","next","nextBg","nextFg","currentBg","currentFg","complete","direction","slideCount","getRandomAttributes","sizeContrast","positionShift","elementsDistance","placementVariation","stylePreset","getGalleryStyle","paddingTop","getGridStyle","safariHeightFix","grid","$grid","$parent","resetHeight","newHeight","debouncedResetHeight","ResizeObserver","observer","entries","observe","ITEM_SIZE","GridItemCollection","gridItems","image","groupStart","groupEnd","isGroupOfThree","GridItem","removeExtra","flipX","flipY","extraLeft","getExtraLeft","extraTop","getExtraTop","extraBetween","getExtraBetween","gridItem","groupIndex","maxX","maxY","firstGroup","slice","maxBottom","imageResizing","imageRotation","idx","getIndex","col","row","getOffsets","size","rotation","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","positionY","positionX","objectFit","gallery","$gallery","toArray","verticalSpacing","gridItemsCollection","$image","$item","getStyle","getImageStyle","galleryStyle","propertyName","indexOf","gridStyle","getGridColumnsAndRows","gridcolumns","gridrows","display","gridTemplateColumns","gridTemplateRows","getPostsCount","areaColumns","reduce","total","areaColumn","areas","columnTotal","area","postsCount","redistributeCardsInAreas","cardsCount","totalSpots","totalPosts","remainingPosts","totalRatio","areaColumnSpotRatio","j","spotRatio","getCardRatio","extraPosts","areaExtraPosts","round","getOptimalHeaderPosition","positions","columnIndex","areaIndex","ratio","isLandscape","nth","initialPostsCount","subfeature","getParametricLayoutAreaClassName","getAreaBaseClassname","getAreaClassnameByWidthRatio","getAreaClassnameByHeightRatio","getAreaClassnameByAspectRatio","widthRatio","heightRatio","flipcolsrows","transposeMatrix","source","column","applyLayoutEngine","debug","console","log","emptyChar","nthMatrix","initBidimensionalMatrix","imageWeightMatrix","metaDetailsMatrix","widthMatrix","initUnidimensionalMatrix","verticalFragmentSizeMatrix","widthIdx","featureposition","featuresize","frgIdx","cutMarker","fragmentation","padEnd","end","imageweightleft","imageweightright","metadetailsleft","metadetailsright","balancemdandiw","boostfeature","maxMetaDetailsPos","maxImageWeightPos","featureValue","maxValue","maxMetaDetailsValue","maxImageWeightValue","currentNth","currentColumnStartCol","currentPostStartRow","maxNth","hierachyCrossingStrenth","hierarchycrossing","currentPostDetails","getNthPostDetails","endGridColumn","topNeighborPostDetails","startGridRow","bottomNeighborPostDetails","endGridRow","replacedPostScore","imageWeight","metaDetails","counter","postDetails","currentPostScore","pow","startGridColumn","renumberNthMatrix","finalNthMatrix","finalMetaMatrix","finalImageMatrix","getGroupedPostAreas","moveLargestColumnToStart","firstRowColumns","sort","col1","col2","largestColumnIndex","findIndex","splice","logMatrix","matrix","areasArray","getAreasArray","mergeSimilarAreas","normalizeAreas","columns","currentColumn","currentArea","compareColumn","compareArea","merged","randomColumn","getNthValues","values","value","a","b","replaceNth","nth1","nth2","getMaxNth","mergeAreaNeighbours","getAreaWidth","getAreaHeight","initialWidth","initialHeight","currentAreaIndex","isArray","nextRow","nextCol","nextWidth","nextHeight","nextNth","nextNthStart","searching","mergeable","getFirstOccurence","fillArea","newNth","character","nullChar","defaultBlockWidth","$cards","$posts","addedCards","imagepadding","thumbnailaspectratio","imageresizing","layoutstyle","islandscape","$title","detach","$subtitle","createLayout","blockWidth","empty","remove","columnsCount","firstSet","secondSet","removeSmallestColumn","maxcolumns","acc","maxrows","headerposition","clone","insertBefore","$column","attr","blockWidthRatio","areaClassName","getAreaClassname","$area","$gridItem","$card","eq","landscape","toggleClass","$header","recreateLayout","contents","replaceWith","gridTemplateRowss","widthRatioMultiplier","obj1","obj2","indexToRemove","normalizeColumns","moveColumnsToLeft","moveColumnsToTop","spaceLeft","movingLeft","overlapLeft","spaceTop","movingTop","overlapTop","fourSq","util","Hours","padTimes","text","toTimeframe","days","startMinutes","endMinutes","startFormatted","formatMinutes","endFormatted","open","start","minutes","hh","mm","intoNextDay","minutesAfterMidnight","hoursText","minutesText","meridiem","hours","HoursParser","toLowerCase","dayCanonicals","_","dayI","allNames","dayAliases","canonical","head","aliases","tail","reverse","alias","RegExp","dayPattern","timePattern","globTimePattern","globTimeRangePattern","forwardTimeframePattern","backwardTimeframePattern","forwardPosition","search","backwardPosition","isForward","ungroupedPattern","ungroupedRegex","dayRangePattern","timeRangePattern","timeframePattern","dayTimeMatcher","dayTimeMatch","exec","timeRangeMatcher","timeRangeMatch","timeframes","match","day1","day2","startDay","endDay","day","startHour","startMinute","startMeridiem","endHour","endMinute","endMeridiem","startTime","endTime","sortBy","removeClosedDays","schedule","hoursString","lines","split","parseContent","currentValue"],"mappings":"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ACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpFA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;;AAEvB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC,UAAU,EAAE;AAChD;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;;;;;;;AC7DA,8CAAa;;AAEb,eAAe,mBAAO,CAAC,EAAe;AACtC,SAAS,mBAAO,CAAC,EAAgB;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,cAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yDAAyD;AACzD,GAAG;AACH,sCAAsC;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,cAAc,OAAO;AACrB,cAAc,QAAQ;AACtB,cAAc,OAAO;AACrB;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,gBAAgB;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,WAAW,iBAAiB;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,QAAQ,yBAAyB;AACjC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,WAAW,iBAAiB;AAC5B;AACA;AACA;AACA,aAAa,IAAI;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,kBAAkB;AACnC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,iBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;AC/aa;;AAEb;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;ACrCa;;AAEb;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,YAAY;AACzB;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;ACrHa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,mBAAmB,mBAAO,CAAC,CAAa;;AAExC;;AAEA,iBAAiB,mBAAO,CAAC,CAAc;;AAEvC,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;ACvDa;;AAEb;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,C;;;;;;;ACtDa;;AAEb;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,C;;;;;;;AC/Fa;;AAEb;AACA;AACA,CAAC;AACD;;AAEA,aAAa,mBAAO,CAAC,CAAU;;AAE/B,cAAc,mBAAO,CAAC,EAAY;;AAElC;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,C;;;;;;AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,aAAa;AACxB,aAAa,EAAE;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,aAAa,EAAE;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,OAAO;AAClB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,cAAc;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,SAAS;AACpB,aAAa,SAAS;AACtB;AACA;AACA,iBAAiB;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,iBAAiB;AACjB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,EAAE;AACb,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,aAAa;AACxB,WAAW,EAAE;AACb,aAAa,EAAE;AACf;AACA;AACA,iBAAiB,QAAQ,OAAO,SAAS,EAAE;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;ACl6Ba;;AAEb;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH,C;;;;;;;ACnHa;;AAEb;AACA;AACA,C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","file":"./dist/js/frontend.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 29);\n","module.exports = jQuery;","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.toJson = toJson;\n\nvar _constants = require(\"./constants\");\n\nvar _utils = require(\"./utils\");\n\nvar _auth = require(\"./methods/auth\");\n\nvar _auth2 = _interopRequireDefault(_auth);\n\nvar _currentUser = require(\"./methods/currentUser\");\n\nvar _currentUser2 = _interopRequireDefault(_currentUser);\n\nvar _users = require(\"./methods/users\");\n\nvar _users2 = _interopRequireDefault(_users);\n\nvar _photos = require(\"./methods/photos\");\n\nvar _photos2 = _interopRequireDefault(_photos);\n\nvar _collections = require(\"./methods/collections\");\n\nvar _collections2 = _interopRequireDefault(_collections);\n\nvar _search = require(\"./methods/search\");\n\nvar _search2 = _interopRequireDefault(_search);\n\nvar _stats = require(\"./methods/stats\");\n\nvar _stats2 = _interopRequireDefault(_stats);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Unsplash = function () {\n  function Unsplash(options) {\n    _classCallCheck(this, Unsplash);\n\n    this._apiUrl = options.apiUrl || _constants.API_URL;\n    this._apiVersion = options.apiVersion || _constants.API_VERSION;\n    this._accessKey = options.accessKey;\n    this._secret = options.secret;\n    this._callbackUrl = options.callbackUrl;\n    this._bearerToken = options.bearerToken;\n    this._headers = options.headers || {};\n    this._timeout = options.timeout || 0; // 0 defaults to the OS timeout behaviour.\n\n    this.auth = _auth2.default.bind(this)();\n    this.currentUser = _currentUser2.default.bind(this)();\n    this.users = _users2.default.bind(this)();\n    this.photos = _photos2.default.bind(this)();\n    this.collections = _collections2.default.bind(this)();\n    this.search = _search2.default.bind(this)();\n    this.stats = _stats2.default.bind(this)();\n  }\n\n  _createClass(Unsplash, [{\n    key: \"request\",\n    value: function request(requestOptions) {\n      var _buildFetchOptions$bi = _utils.buildFetchOptions.bind(this)(requestOptions),\n          url = _buildFetchOptions$bi.url,\n          options = _buildFetchOptions$bi.options;\n\n      return fetch(url, options);\n    }\n  }]);\n\n  return Unsplash;\n}();\n\nexports.default = Unsplash;\nfunction toJson(res) {\n  return typeof res.json === \"function\" ? res.json() : res;\n}","/*!\n * JavaScript Cookie v2.2.1\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction decode (s) {\n\t\treturn s.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent);\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api() {}\n\n\t\tfunction set (key, value, attributes) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tattributes = extend({\n\t\t\t\tpath: '/'\n\t\t\t}, api.defaults, attributes);\n\n\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\tattributes.expires = new Date(new Date() * 1 + attributes.expires * 864e+5);\n\t\t\t}\n\n\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\ttry {\n\t\t\t\tvar result = JSON.stringify(value);\n\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\tvalue = result;\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\n\t\t\tvalue = converter.write ?\n\t\t\t\tconverter.write(value, key) :\n\t\t\t\tencodeURIComponent(String(value))\n\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\n\t\t\tkey = encodeURIComponent(String(key))\n\t\t\t\t.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n\t\t\t\t.replace(/[\\(\\)]/g, escape);\n\n\t\t\tvar stringifiedAttributes = '';\n\t\t\tfor (var attributeName in attributes) {\n\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Considers RFC 6265 section 5.2:\n\t\t\t\t// ...\n\t\t\t\t// 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n\t\t\t\t//     character:\n\t\t\t\t// Consume the characters of the unparsed-attributes up to,\n\t\t\t\t// not including, the first %x3B (\";\") character.\n\t\t\t\t// ...\n\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n\t\t\t}\n\n\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t}\n\n\t\tfunction get (key, json) {\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar jar = {};\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all.\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = decode(parts[0]);\n\t\t\t\t\tcookie = (converter.read || converter)(cookie, name) ||\n\t\t\t\t\t\tdecode(cookie);\n\n\t\t\t\t\tif (json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tjar[name] = cookie;\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn key ? jar[key] : jar;\n\t\t}\n\n\t\tapi.set = set;\n\t\tapi.get = function (key) {\n\t\t\treturn get(key, false /* read as raw */);\n\t\t};\n\t\tapi.getJSON = function (key) {\n\t\t\treturn get(key, true /* read as json */);\n\t\t};\n\t\tapi.remove = function (key, attributes) {\n\t\t\tset(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.defaults = {};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar API_URL = exports.API_URL = \"https://api.unsplash.com\";\nvar API_VERSION = exports.API_VERSION = \"v1\";\nvar OAUTH_AUTHORIZE_URL = exports.OAUTH_AUTHORIZE_URL = \"https://unsplash.com/oauth/authorize\";\nvar OAUTH_TOKEN_URL = exports.OAUTH_TOKEN_URL = \"https://unsplash.com/oauth/token\";","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.formUrlEncode = formUrlEncode;\nexports.getUrlComponents = getUrlComponents;\nexports.buildFetchOptions = buildFetchOptions;\n\nvar _querystring = require(\"querystring\");\n\nvar _formUrlencoded = require(\"form-urlencoded\");\n\nvar _formUrlencoded2 = _interopRequireDefault(_formUrlencoded);\n\nvar _urlParse = require(\"url-parse\");\n\nvar _urlParse2 = _interopRequireDefault(_urlParse);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction formUrlEncode(body) {\n  return (0, _formUrlencoded2.default)(body);\n}\n\nfunction getUrlComponents(uri) {\n  return (0, _urlParse2.default)(uri, {}, true);\n}\n\nfunction buildFetchOptions(options) {\n  var method = options.method,\n      query = options.query,\n      oauth = options.oauth,\n      body = options.body;\n\n  var url = oauth === true ? options.url : \"\" + this._apiUrl + options.url;\n  var headers = _extends({}, this._headers, options.headers, {\n    \"Accept-Version\": this._apiVersion,\n    \"Authorization\": this._bearerToken ? \"Bearer \" + this._bearerToken : \"Client-ID \" + this._accessKey\n  });\n  var timeout = this._timeout;\n\n  if (body) {\n    headers[\"Content-Type\"] = \"application/x-www-form-urlencoded\";\n  }\n\n  if (query) {\n    url = decodeURIComponent(url + \"?\" + (0, _querystring.stringify)(query));\n  }\n\n  return {\n    url: url,\n    options: {\n      method: method,\n      headers: headers,\n      timeout: timeout,\n      body: method !== \"GET\" && body ? formUrlEncode(body) : undefined\n    }\n  };\n}","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","// Filename: formurlencoded.js\n// Timestamp: 2016.01.18-15:36:37 (last modified)\n// Author(s): Bumblehead (www.bumblehead.com), JBlashill (james@blashill.com)\n//\n// http://www.w3.org/TR/html5/forms.html#url-encoded-form-data\n// input: {one:1,two:2} return: '[one]=1&[two]=2'\n\nvar formurlencoded = module.exports = function (data, opts) {\n  opts = typeof opts === 'object' ? opts : {};\n\n  function encode (value) {\n    return String(value)\n      .replace(/[^ !'()~\\*]*/g, encodeURIComponent)\n      .replace(/ /g, '+')\n      .replace(/[!'()~\\*]/g, function (ch) {\n        return '%' + ch.charCodeAt().toString(16).slice(-2).toUpperCase();\n      });\n  }\n\n  function keys (obj) {\n    var keys = Object.keys(obj);\n\n    return opts.sorted ? keys.sort() : keys;\n  }\n\n  function filterjoin (arr) {\n    return arr.filter(function (e) { return e; }).join('&');\n  }\n\n  function objnest (name, obj) {\n    return filterjoin(keys(obj).map(function (key) {\n      return nest(name + '[' + key + ']', obj[key]);\n    }));\n  }\n\n  function arrnest (name, arr) {\n    return filterjoin(arr.map(function (elem) {\n      return nest(name + '[]', elem);\n    }));\n  }\n\n  function nest (name, value) {\n    var type = typeof value,\n        f = null;\n\n    if (value === f) {\n      f = opts.ignorenull ? f : encode(name) + '=' + f;\n    } else if (/string|number|boolean/.test(type)) {\n      f = encode(name) + '=' + encode(value);\n    } else if (Array.isArray(value)) {\n      f = arrnest(name, value);\n    } else if (type === 'object') {\n      f = objnest(name, value);\n    }\n\n    return f;\n  }\n\n  return filterjoin(keys(data).map(function (key) {\n    return nest(key, data[key]);\n  }));\n};\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\S\\s]*)/i\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//;\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address) {          // Sanitize what is left of the address\n    return address.replace('\\\\', '/');\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d+)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address) {\n  var match = protocolre.exec(address);\n\n  return {\n    protocol: match[1] ? match[1].toLowerCase() : '',\n    slashes: !!match[2],\n    rest: match[3]\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '');\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (!extracted.slashes) instructions[3] = [/(.*)/, 'pathname'];\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0] || '';\n    url.password = instruction[1] || '';\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:'\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    default:\n      url[part] = value;\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:'\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result = protocol + (url.slashes ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encodeURIComponent(key);\n      value = encodeURIComponent(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = auth;\n\nvar _querystring = require(\"querystring\");\n\nvar _querystring2 = _interopRequireDefault(_querystring);\n\nvar _constants = require(\"../constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction auth() {\n  var _this = this;\n\n  return {\n    getAuthenticationUrl: function getAuthenticationUrl() {\n      var scope = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [\"public\"];\n\n      var querystrings = _querystring2.default.stringify({\n        client_id: _this._accessKey,\n        redirect_uri: _this._callbackUrl,\n        response_type: \"code\",\n        scope: scope.length > 1 ? scope.join(\"+\") : scope.toString()\n      });\n\n      return decodeURIComponent(_constants.OAUTH_AUTHORIZE_URL + \"?\" + querystrings);\n    },\n\n    userAuthentication: function userAuthentication(code) {\n      var url = _constants.OAUTH_TOKEN_URL;\n\n      return _this.request({\n        url: url,\n        method: \"POST\",\n        body: {\n          client_id: _this._accessKey,\n          client_secret: _this._secret,\n          redirect_uri: _this._callbackUrl,\n          grant_type: \"authorization_code\",\n          code: code\n        },\n        oauth: true\n      });\n    },\n\n    setBearerToken: function setBearerToken(accessToken) {\n      if (accessToken) {\n        _this._bearerToken = accessToken;\n      }\n    }\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = currentUser;\nfunction currentUser() {\n  var _this = this;\n\n  return {\n    profile: function profile() {\n      var url = \"/me\";\n\n      return _this.request({\n        url: url,\n        method: \"GET\"\n      });\n    },\n\n    updateProfile: function updateProfile(options) {\n      var endpointUrl = \"/me\";\n      var username = options.username,\n          firstName = options.firstName,\n          lastName = options.lastName,\n          email = options.email,\n          url = options.url,\n          location = options.location,\n          bio = options.bio,\n          instagramUsername = options.instagramUsername;\n\n      var body = {\n        username: username,\n        first_name: firstName,\n        last_name: lastName,\n        email: email,\n        url: url,\n        location: location,\n        bio: bio,\n        instagram_username: instagramUsername\n      };\n\n      Object.keys(body).forEach(function (key) {\n        if (!body[key]) {\n          delete body[key];\n        }\n      });\n\n      return _this.request({\n        url: endpointUrl,\n        method: \"PUT\",\n        body: body\n      });\n    }\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = users;\nfunction users() {\n  var _this = this;\n\n  return {\n    profile: function profile(username) {\n      var url = \"/users/\" + username;\n\n      return _this.request({\n        url: url,\n        method: \"GET\"\n      });\n    },\n\n    photos: function photos(username) {\n      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var perPage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      var orderBy = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"latest\";\n      var stats = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n      var url = \"/users/\" + username + \"/photos\";\n      var query = {\n        page: page,\n        per_page: perPage,\n        order_by: orderBy,\n        stats: stats\n      };\n\n      return _this.request({\n        url: url,\n        method: \"GET\",\n        query: query\n      });\n    },\n\n    likes: function likes(username) {\n      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var perPage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      var orderBy = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"latest\";\n\n      var url = \"/users/\" + username + \"/likes\";\n      var query = {\n        page: page,\n        per_page: perPage,\n        order_by: orderBy\n      };\n\n      return _this.request({\n        url: url,\n        method: \"GET\",\n        query: query\n      });\n    },\n\n    collections: function collections(username) {\n      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var perPage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      var orderBy = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"published\";\n\n      var url = \"/users/\" + username + \"/collections\";\n      var query = {\n        page: page,\n        per_page: perPage,\n        order_by: orderBy\n      };\n\n      return _this.request({\n        url: url,\n        method: \"GET\",\n        query: query\n      });\n    },\n\n    statistics: function statistics(username) {\n      var resolution = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"days\";\n      var quantity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 30;\n\n      var url = \"/users/\" + username + \"/statistics\";\n      var query = {\n        resolution: resolution,\n        quantity: quantity\n      };\n\n      return _this.request({\n        url: url,\n        method: \"GET\",\n        query: query\n      });\n    }\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = photos;\n\nvar _utils = require(\"../utils\");\n\nvar _lodash = require(\"lodash.get\");\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction photos() {\n  var _this = this;\n\n  return {\n    listPhotos: function listPhotos() {\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var perPage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n      var orderBy = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"latest\";\n\n      var url = \"/photos\";\n      var query = {\n        page: page,\n        per_page: perPage,\n        order_by: orderBy\n      };\n\n      return _this.request({\n        url: url,\n        method: \"GET\",\n        query: query\n      });\n    },\n\n    getPhoto: function getPhoto(id) {\n      var url = \"/photos/\" + id;\n\n      return _this.request({\n        url: url,\n        method: \"GET\"\n      });\n    },\n\n    getPhotoStats: function getPhotoStats(id) {\n      var url = \"/photos/\" + id + \"/statistics\";\n\n      return _this.request({\n        url: url,\n        method: \"GET\"\n      });\n    },\n\n    getRandomPhoto: function getRandomPhoto() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      var url = \"/photos/random\";\n      var collections = options.collections || [];\n\n      var query = {\n        featured: options.featured,\n        username: options.username,\n        orientation: options.orientation,\n        collections: collections.join(),\n        query: options.query,\n        c: options.cacheBuster || new Date().getTime(), // Avoid ajax response caching\n        count: options.count\n      };\n\n      Object.keys(query).forEach(function (key) {\n        if (!query[key]) {\n          delete query[key];\n        }\n      });\n\n      return _this.request({\n        url: url,\n        method: \"GET\",\n        query: query\n      });\n    },\n\n    likePhoto: function likePhoto(id) {\n      if (!_this._bearerToken) {\n        throw new Error(\"Requires a bearerToken to be set.\");\n      }\n\n      var url = \"/photos/\" + id + \"/like\";\n\n      return _this.request({\n        url: url,\n        method: \"POST\"\n      });\n    },\n\n    unlikePhoto: function unlikePhoto(id) {\n      if (!_this._bearerToken) {\n        throw new Error(\"Requires a bearerToken to be set.\");\n      }\n\n      var url = \"/photos/\" + id + \"/like\";\n\n      return _this.request({\n        url: url,\n        method: \"DELETE\"\n      });\n    },\n\n    downloadPhoto: function downloadPhoto(photo) {\n      var downloadLocation = (0, _lodash2.default)(photo, \"links.download_location\", undefined);\n\n      if (downloadLocation === undefined) {\n        throw new Error(\"Object received is not a photo. \" + photo);\n      }\n\n      var urlComponents = (0, _utils.getUrlComponents)(downloadLocation);\n\n      return _this.request({\n        url: urlComponents.pathname,\n        method: \"GET\",\n        query: urlComponents.query\n      });\n    }\n  };\n}","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = collections;\nfunction collections() {\n  var _this = this;\n\n  return {\n    listCollections: function listCollections() {\n      var page = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n      var perPage = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10;\n\n      var url = \"/collections\";\n\n      var query = {\n        page: page,\n        per_page: perPage\n      };\n\n      return _this.request({\n        url: url,\n        method: \"GET\",\n        query: query\n      });\n    },\n\n    getCollection: collection.bind(this),\n\n    getCollectionPhotos: collectionPhotos.bind(this),\n\n    createCollection: createUpdateCollection.bind(this, null),\n\n    updateCollection: createUpdateCollection.bind(this),\n\n    deleteCollection: function deleteCollection(id) {\n      var url = \"/collections/\" + id;\n\n      return _this.request({\n        url: url,\n        method: \"DELETE\"\n      });\n    },\n\n    addPhotoToCollection: function addPhotoToCollection(collectionId, photoId) {\n      var url = \"/collections/\" + collectionId + \"/add\";\n\n      return _this.request({\n        url: url,\n        method: \"POST\",\n        body: {\n          photo_id: photoId\n        }\n      });\n    },\n\n    removePhotoFromCollection: function removePhotoFromCollection(collectionId, photoId) {\n      var url = \"/collections/\" + collectionId + \"/remove?photo_id=\" + photoId;\n\n      return _this.request({\n        url: url,\n        method: \"DELETE\"\n      });\n    },\n\n    listRelatedCollections: function listRelatedCollections(collectionId) {\n      var url = \"/collections/\" + collectionId + \"/related\";\n\n      return _this.request({\n        url: url,\n        method: \"GET\"\n      });\n    }\n  };\n}\n\nfunction collection(id) {\n  return this.request({\n    url: \"/collections/\" + id,\n    method: \"GET\"\n  });\n}\n\nfunction collectionPhotos(id) {\n  var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n  var perPage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n  var orderBy = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"latest\";\n\n  var query = {\n    page: page,\n    per_page: perPage,\n    order_by: orderBy\n  };\n\n  return this.request({\n    url: \"/collections/\" + id + \"/photos\",\n    method: \"GET\",\n    query: query\n  });\n}\n\nfunction createUpdateCollection(id, title, description, isPrivate) {\n  var url = id ? \"/collections/\" + id : \"/collections\";\n  var body = {\n    title: title,\n    description: description,\n    \"private\": isPrivate\n  };\n\n  return this.request({\n    url: url,\n    method: id ? \"PUT\" : \"POST\",\n    body: body\n  });\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = search;\nfunction search() {\n  var _this = this;\n\n  return {\n    photos: function photos() {\n      var keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var perPage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n      var filters = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n      var collections = filters.collections || [];\n      var query = {\n        query: encodeURIComponent(keyword),\n        per_page: perPage,\n        orientation: filters.orientation,\n        collections: collections.join(),\n        page: page\n      };\n\n      Object.keys(query).forEach(function (key) {\n        if (!query[key] && key != \"query\") {\n          delete query[key];\n        }\n      });\n\n      return _this.request({\n        url: \"/search/photos\",\n        method: \"GET\",\n        query: query\n      });\n    },\n\n    users: function users() {\n      var keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var perPage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n\n      var query = {\n        query: encodeURIComponent(keyword),\n        per_page: perPage,\n        page: page\n      };\n\n      return _this.request({\n        url: \"/search/users\",\n        method: \"GET\",\n        query: query\n      });\n    },\n\n    collections: function collections() {\n      var keyword = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      var page = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n      var perPage = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10;\n\n      var query = {\n        query: encodeURIComponent(keyword),\n        per_page: perPage,\n        page: page\n      };\n\n      return _this.request({\n        url: \"/search/collections\",\n        method: \"GET\",\n        query: query\n      });\n    }\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = stats;\nfunction stats() {\n  var _this = this;\n\n  return {\n    total: function total() {\n      var url = \"/stats/total\";\n\n      return _this.request({\n        url: url,\n        method: \"GET\"\n      });\n    }\n  };\n}","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","import Unsplash, { toJson } from \"unsplash-js\";\n\nconst APP_NAME = 'Nova Blocks';\nconst COLLECTION_ID = 10606015;\nconst URL_PARAMS = encodeURI( `utm_source=${ APP_NAME }&utm_medium=referral` );\n\nclass PlaceholderImagesCollection {\n\n\tconstructor() {\n\t\tthis.fetchedImages = false;\n\t\tthis.images = [];\n\t}\n\n\tfetch() {\n\t\tconst normalize = this.normalize.bind( this );\n\t\tconst apiKey = window?.pixcare?.themeConfig?.unsplashApiKey;\n\n\t\tif ( ! apiKey ) {\n\t\t\tthis.fetchedImages = true;\n\t\t\treturn [];\n\t\t}\n\n\t\tthis.api = new Unsplash( { accessKey: apiKey } );\n\n\t\treturn this.api.collections.getCollectionPhotos( COLLECTION_ID )\n\t\t               .then( toJson )\n\t\t               .then( photos => {\n\t\t\t                this.images = photos.map( normalize );\n\t\t\t                return this.images;\n\t\t               } )\n\t\t               .finally( () => {\n\t\t               \t    this.fetchedImages = true;\n\t\t               } );\n\t}\n\n\tget() {\n\t\tif ( this.fetchedImages ) {\n\t\t\treturn this.images;\n\t\t}\n\n\t\treturn this.fetch();\n\t}\n\n\tnormalize( photo ) {\n\t\treturn {\n\t\t\tid: photo.id,\n\t\t\turl: photo.urls.full,\n\t\t\ttype: 'image',\n\t\t\twidth: photo.width,\n\t\t\theight: photo.height,\n\t\t\tsizes: {\n\t\t\t\tfull: {\n\t\t\t\t\turl: photo.urls.full,\n\t\t\t\t\twidth: photo.width,\n\t\t\t\t\theight: photo.height,\n\t\t\t\t},\n\t\t\t\tlarge: {\n\t\t\t\t\turl: photo.urls.regular\n\t\t\t\t},\n\t\t\t\tmedium: {\n\t\t\t\t\turl: photo.urls.small\n\t\t\t\t},\n\t\t\t\tthumbnail: {\n\t\t\t\t\turl: photo.urls.thumb\n\t\t\t\t},\n\t\t\t\tnovablocks_huge: {\n\t\t\t\t\turl: photo.urls.full\n\t\t\t\t},\n\t\t\t\tnovablocks_large: {\n\t\t\t\t\turl: photo.urls.regular\n\t\t\t\t},\n\t\t\t\tnovablocks_medium: {\n\t\t\t\t\turl: photo.urls.small\n\t\t\t\t},\n\t\t\t\tnovablocks_tiny: {\n\t\t\t\t\turl: photo.urls.thumb\n\t\t\t\t},\n\t\t\t},\n\t\t\ttitle: photo.description,\n\t\t\tcaption: `<p class=\"credits\">Photo by <a target=\"_blank\" href=\"${ photo.user.links.html }?${ URL_PARAMS }\">${ photo.user.name }</a> on <a target=\"_blank\" href=\"https://unsplash.com?${ URL_PARAMS }\">Unsplash</a></p>`,\n\t\t\tdownload: () => {\n\t\t\t\tthis.api.photos.downloadPhoto( photo );\n\t\t\t},\n\t\t};\n\t};\n}\n\nconst instance = new PlaceholderImagesCollection();\nconst getPlaceholderImages = instance.get.bind( instance );\n\nexport { getPlaceholderImages };\n","import classnames from \"classnames\";\n\nexport { getPlaceholderImages } from './unsplash';\n\nexport const getRandomBetween = ( min, max ) => {\n\tconst random = Math.max(0, Math.random() - Number.MIN_VALUE );\n\treturn Math.floor( random * (max - min + 1) + min );\n};\n\nexport const getRandomArrayFromArray = ( arr, n ) => {\n\n\tlet result = new Array( n ),\n\t\tlen = arr.length,\n\t\ttaken = new Array( len );\n\n\tif ( ! len ) {\n\t\treturn [];\n\t}\n\n\twhile ( n -- ) {\n\t\tconst x = Math.floor( Math.random() * len );\n\t\tresult[n] = arr[x in taken ? taken[x] : x];\n\t\ttaken[x] = -- len in taken ? taken[len] : len;\n\t}\n\n\treturn result;\n};\n\nexport const getRandomBooleanValue = () => {\n\treturn getRandomArrayFromArray( [ true, false ], 1 )[0];\n};\n\nexport const debounce = (func, wait) => {\n\tlet timeout = null;\n\n\treturn function () {\n\t\tconst context = this;\n\t\tconst args = arguments;\n\n\t\tconst later = () => {\n\t\t\tfunc.apply(context, args);\n\t\t};\n\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\t}\n};\n\nexport const range = function( min, max ) {\n\tconst array = [];\n\tfor ( let i = 0; i <= max - min; i++ ) {\n\t\tarray.push( i + min );\n\t}\n\treturn array;\n};\n\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\nexport const hasTouchScreen = function() {\n\tvar hasTouchScreen = false;\n\n\tif ( \"maxTouchPoints\" in navigator ) {\n\t\thasTouchScreen = navigator.maxTouchPoints > 0;\n\t} else if ( \"msMaxTouchPoints\" in navigator ) {\n\t\thasTouchScreen = navigator.msMaxTouchPoints > 0;\n\t} else {\n\t\tvar mQ = window.matchMedia && matchMedia( \"(pointer:coarse)\" );\n\t\tif ( mQ && mQ.media === \"(pointer:coarse)\" ) {\n\t\t\thasTouchScreen = !!mQ.matches;\n\t\t} else if ( 'orientation' in window ) {\n\t\t\thasTouchScreen = true;\n\t\t} else {\n\t\t\tvar UA = navigator.userAgent;\n\t\t\thasTouchScreen = (\n\t\t\t\t/\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test( UA ) || /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test( UA )\n\t\t\t);\n\t\t}\n\t}\n\n\treturn hasTouchScreen;\n};\n\nexport const findParents = ( target, query ) => {\n\tlet parents = [];\n\n\tfunction traverse( item ) {\n\t\tconst parent = item.parentNode;\n\t\tif ( parent instanceof HTMLElement ) {\n\t\t\tif ( parent.matches( query ) ) {\n\t\t\t\tparents.push( parent );\n\t\t\t}\n\t\t\ttraverse( parent );\n\t\t}\n\t}\n\n\ttraverse( target );\n\n\treturn parents;\n};\n\n// https://stackoverflow.com/a/2450976\nexport const shuffleArray = function( array ) {\n\tlet currentIndex = array.length,\n\t\ttemporaryValue,\n\t\trandomIndex;\n\n\t// While there remain elements to shuffle...\n\twhile ( 0 !== currentIndex ) {\n\t\t// eslint-disable-next-line no-restricted-syntax\n\t\trandomIndex = Math.floor( Math.random() * currentIndex );\n\t\tcurrentIndex -= 1;\n\n\t\t// And swap it with the current element.\n\t\ttemporaryValue = array[ currentIndex ];\n\t\tarray[ currentIndex ] = array[ randomIndex ];\n\t\tarray[ randomIndex ] = temporaryValue;\n\t}\n\n\treturn array;\n};\n\nexport const defaultSnapValues = {\n\tx: [0, 0.5, 1],\n\ty: [0, 0.5, 1]\n};\n\nexport const maybeSnapFocalPoint = function( focalPoint, snapValues = defaultSnapValues ) {\n\tlet x = parseFloat( focalPoint.x );\n\tlet y = parseFloat( focalPoint.y );\n\tlet thereshold = 0.05;\n\n\tsnapValues.x.forEach( snapValue => {\n\t\tif ( snapValue - thereshold < x && x < snapValue + thereshold ) {\n\t\t\tx = snapValue;\n\t\t}\n\t} );\n\n\tsnapValues.y.forEach( snapValue => {\n\t\tif ( snapValue - thereshold < y && y < snapValue + thereshold ) {\n\t\t\ty = snapValue;\n\t\t}\n\t} );\n\n\treturn { x, y }\n};\n\nexport const getSnapClassname = focalPoint => {\n\tconst classNames = [];\n\n\tif ( defaultSnapValues.x.includes( parseFloat( focalPoint.x ) ) ) {\n\t\tclassNames.push( 'is-snapped-x' );\n\t}\n\n\tif ( defaultSnapValues.y.includes( parseFloat( focalPoint.y ) ) ) {\n\t\tclassNames.push( 'is-snapped-y' );\n\t}\n\n\treturn classNames.join( ' ' );\n};\n\nexport const getControlsClasses = ( attributes, compileAttributes ) => {\n\tconst classes = [ 'novablocks-controls-wrap' ];\n\tconst compiledAttributes = compileAttributes( attributes );\n\n\tif ( Object.keys( compiledAttributes ).some( key => compiledAttributes[ key ] !== attributes[ key ] ) ) {\n\t\tclasses.push( 'novablocks-controls-wrap--dirty' );\n\t}\n\n\treturn classnames( classes );\n};\n\nexport const getCardMediaPaddingTop = ( containerHeight ) => {\n\tlet compiledHeight = containerHeight / 50 - 1;\n\n\tif ( compiledHeight < 0 ) {\n\t\tcompiledHeight *= 2;\n\t}\n\n\tlet numerator = 1;\n\tlet denominator = 1;\n\n\tcompiledHeight = Math.min( Math.max( -3, compiledHeight ), 1 );\n\n\tif ( compiledHeight > 0 ) {\n\t\tnumerator = 1 + compiledHeight;\n\t}\n\n\tif ( compiledHeight < 0 ) {\n\t\tdenominator = 1 + Math.abs( compiledHeight );\n\t}\n\n\treturn `${ numerator * 100 / denominator }%`;\n};\n\nconst breakpoints = {\n\tdesktop: 1366,\n\tlap: 1024,\n\ttablet: 768,\n\tmobile: 480,\n};\n\nexport const below = ( breakpoint ) => {\n\tconst width = breakpoints[breakpoint];\n\treturn window.innerWidth < width;\n};\n\nexport const above = ( breakpoint ) => {\n\tconst width = breakpoints[breakpoint];\n\treturn window.innerWidth >= width;\n};\n\n","import $ from 'jquery';\n\nimport { hasTouchScreen } from '../utils';\n\nclass viewportObserver {\n\n\tconstructor() {\n\t\tthis.useOrientation = hasTouchScreen() && 'orientation' in window;\n\t\tthis.bindEvents();\n\t}\n\n\tbindEvents() {\n\t\tconst $window = $( window );\n\t\tconst updateViewportUnits = this.updateViewportUnits.bind( this );\n\n\t\tupdateViewportUnits();\n\n\t\tif ( this.useOrientation ) {\n\t\t\t$window.on( 'orientationchange', function() {\n\t\t\t\t$window.one( 'resize', updateViewportUnits );\n\t\t\t} );\n\t\t} else {\n\t\t\t$window.on( 'resize', updateViewportUnits );\n\t\t}\n\t}\n\n\tupdateViewportUnits() {\n\t\tconst root = document.documentElement;\n\t\tconst windowWidth = this.useOrientation && window.screen && window.screen.availWidth || window.innerWidth;\n\t\tconst windowHeight = this.useOrientation && window.screen && window.screen.availHeight || window.innerHeight;\n\n\t\tconst vw = windowWidth / 100 + 'px';\n\t\tconst vh = windowHeight / 100 + 'px';\n\n\t\troot.style.setProperty( '--novablocks-1vw', vw );\n\t\troot.style.setProperty( '--novablocks-1vh', vh );\n\t}\n}\n\nexport default new viewportObserver();\n","import Cookies from 'js-cookie';\n\nexport default class AnnouncementBar {\n\n\tconstructor( element, args ) {\n\t\tthis.element = element;\n\t\tthis.pieces = this.getPieces();\n\t\tthis.id = jQuery( element ).data( 'id' );\n\t\tthis.cookieName = 'novablocks-announcement-' + this.id + '-disabled';\n\n\t\tconst disabled = Cookies.get( this.cookieName );\n\t\tconst loggedIn = jQuery( 'body' ).hasClass( 'logged-in' );\n\n\t\tif ( disabled && ! loggedIn ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.pieces.element.removeClass( 'is-hidden' );\n\t\tthis.bindEvents();\n\t}\n\n\tgetPieces() {\n\t\tconst $element = jQuery( this.element );\n\n\t\treturn {\n\t\t\telement: $element,\n\t\t\tclose: $element.find( '.novablocks-announcement-bar__close' ),\n\t\t}\n\t}\n\n\tbindEvents() {\n\t\tthis.pieces.close.on( 'click', this.onClose.bind( this ) );\n\t}\n\n\tonClose() {\n\t\tconst { cookieName } = this;\n\t\tthis.pieces.element.addClass( 'is-hidden' );\n\t\tCookies.set( cookieName, true, { expires: 365 } );\n\t}\n}\n","import AnnouncementBar from \"./announcement-bar\";\n\n(function($, window, undefined) {\n\n\t$( function() {\n\n\t\tconst announcementElements = document.getElementsByClassName( 'novablocks-announcement-bar' );\n\t\tconst announcementElementsArray = Array.from( announcementElements );\n\t\tconst AnnouncementCollection = announcementElementsArray.map( element => new AnnouncementBar( element ) );\n\n\t} );\n\n})( jQuery, window );\n","export default `<svg width=\"62\" height=\"75\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 62 75\">\n\t<defs>\n\t\t<path id=\"b\" d=\"M31 69s27-18 27-40C58 14.088 46 2 31 2S4 14.088 4 29c0 22 27 40 27 40zm7.725-31.206c-4.26 4.275-11.264 4.275-15.53 0-4.26-4.277-4.26-11.305 0-15.587 4.26-4.276 11.265-4.276 15.53 0 4.367 4.282 4.367 11.304 0 15.587z\"></path>\n\t\t<filter id=\"a\" width=\"200%\" height=\"200%\" x=\"-50%\" y=\"-50%\" filterUnits=\"objectBoundingBox\">\n\t\t\t<feOffset dy=\"2\" in=\"SourceAlpha\" result=\"shadowOffsetOuter1\"></feOffset>\n\t\t\t<feGaussianBlur in=\"shadowOffsetOuter1\" result=\"shadowBlurOuter1\" stdDeviation=\"2\"></feGaussianBlur>\n\t\t\t<feColorMatrix in=\"shadowBlurOuter1\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.5 0\"></feColorMatrix>\n\t\t</filter>\n\t</defs>\n\t<g fill=\"none\" fillRule=\"evenodd\">\n\t\t<use fill=\"#000\" filter=\"url(#a)\" xlink:href=\"#b\" style=\"display:none\"></use>\n\t\t<use fill=\"%ACCENT_COLOR%\" xlink:href=\"#b\"></use>\n\t</g>\n</svg>`;\n","const defaultMapCenter = {\n\tlat: 47.1665264,\n\tlng: 27.58285479999995\n};\n\nexport default defaultMapCenter;\n","export default [\n\t{\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"#f5f5f5\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"elementType\": \"labels.icon\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"saturation\": -100\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"lightness\": 60\n\t\t\t},\n\t\t]\n\t},\n\t{\n\t\t\"elementType\": \"labels.text.stroke\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"#f5f5f5\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"poi\",\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"#eeeeee\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"poi\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"#757575\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"road.arterial\",\n\t\t\"elementType\": \"geometry.fill\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"%ACCENT_COLOR%\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"lightness\": 90\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"road.arterial\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"#757575\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"road.highway\",\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"#dadada\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"road.highway\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"#616161\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"road.local\",\n\t\t\"elementType\": \"geometry.fill\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"%ACCENT_COLOR%\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"saturation\": -25\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"lightness\": 70\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"road.local\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"lightness\": 30\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"transit.line\",\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"#e5e5e5\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"water\",\n\t\t\"elementType\": \"geometry\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"#c9c9c9\"\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"water\",\n\t\t\"elementType\": \"geometry.fill\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"color\": \"%ACCENT_COLOR%\"\n\t\t\t},\n\t\t\t{\n\t\t\t\t\"lightness\": 60\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t\"featureType\": \"water\",\n\t\t\"elementType\": \"labels.text.fill\",\n\t\t\"stylers\": [\n\t\t\t{\n\t\t\t\t\"saturation\": -100\n\t\t\t}\n\t\t]\n\t}\n]\n","import customized from './customized';\n\nconst styles = [\n\t{ slug: 'customized', label: 'Customized', styles: customized },\n\t{ slug: 'original', label: 'Original', styles: [] },\n];\n\nexport default styles;\n","import defaultMapCenter from \"./default-map-center\";\nimport styles from \"./styles\";\n\nexport const addVisibilityToStyles = function( styles, showLabels, showIcons ) {\n\n\tif ( ! showLabels ) {\n\t\tstyles.unshift( {\n\t\t\t\"elementType\": \"labels.text\",\n\t\t\t\"stylers\": [ { \"visibility\": \"off\" } ]\n\t\t} )\n\t}\n\n\tif ( ! showIcons ) {\n\t\tstyles.unshift( {\n\t\t\t\"elementType\": \"labels.icon\",\n\t\t\t\"stylers\": [ { \"visibility\": \"off\" } ]\n\t\t} )\n\t}\n\n\treturn styles;\n};\n\nexport const compileStyles = function( styleData ) {\n\tconst {\n\t\tattributes: {\n\t\t\tshowLabels,\n\t\t\tshowIcons,\n\t\t\tstyleSlug,\n\t\t}\n\t} = this.props;\n\n\tconst accentColor = getMapAccentColor.call( this );\n\tconst styleDataString = JSON.stringify( styleData ).replace( /%ACCENT_COLOR%/g, accentColor );\n\treturn JSON.parse( styleDataString );\n};\n\nexport const getMapStyles = function() {\n\tconst { attributes } = this.props;\n\tconst { styleData, styleSlug } = attributes;\n\tconst shouldHaveCustomStyles = styleSlug !== 'original' && styleData.length !== 0;\n\tconst selectedStyles = styles.find( style => style.slug === styleSlug );\n\tconst styleDataBySlug = selectedStyles ? selectedStyles.styles : {};\n\tconst mapStyles = shouldHaveCustomStyles && styleDataBySlug || styleData;\n\treturn compileStyles.call( this, mapStyles );\n};\n\nexport const getMapAccentColor = function() {\n\tconst { settings } = this.props;\n\tconst { colors } = settings;\n\tconst fallbackColor = '#222222';\n\n\tif ( colors && colors.length ) {\n\n\t\tconst primary = colors.find( color => color.slug === 'sm-color-primary' );\n\t\tconst secondary = colors.find( color => color.slug === 'sm-color-secondary' );\n\t\tconst tertiary = colors.find( color => color.slug === 'sm-color-tertiary' );\n\n\t\tif ( primary ) {\n\t\t\treturn primary.color;\n\t\t}\n\n\t\tif ( secondary ) {\n\t\t\treturn secondary.color;\n\t\t}\n\n\t\tif ( tertiary ) {\n\t\t\treturn tertiary.color;\n\t\t}\n\n\t\treturn colors[0].color;\n\t}\n\n\treturn fallbackColor;\n};\n\nexport const getCenterFromMarkers = function( markers ) {\n\n\tif ( typeof google === \"undefined\" || typeof google.maps === \"undefined\" ) {\n\t\treturn defaultMapCenter;\n\t}\n\n\tconst bounds = new google.maps.LatLngBounds();\n\n\t// when there is only one marker bounds aren't accurate at great zoom levels\n\tif ( markers.length === 1 ) {\n\t\tconst center = JSON.parse( markers[0] );\n\t\treturn new google.maps.LatLng( center.geometry.location );\n\t}\n\n\tmarkers.forEach( markerString => {\n\t\tconst marker = JSON.parse( markerString );\n\n\t\tif ( ! marker.geometry ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( marker.geometry.viewport ) {\n\t\t\tbounds.union( marker.geometry.viewport );\n\t\t} else {\n\t\t\tbounds.extend( marker.geometry.location );\n\t\t}\n\t} );\n\n\treturn bounds.getCenter();\n};\n\nexport const getMarkersCenter = function() {\n\treturn getCenterFromMarkers( this.props.attributes.markers );\n};\n","import $ from 'jquery';\nimport {hasTouchScreen} from \"../../utils\";\n\nfunction userPrefersReducedMotion() {\n\tconst mediaQuery = window.matchMedia( '(prefers-reduced-motion: reduce)' );\n\treturn !! mediaQuery.matches;\n}\n\nexport const getIntermediateFocalPoint = function( focalPoint1, focalPoint2, progress ) {\n\n\tif ( ! focalPoint1 && ! focalPoint2 ) {\n\t\treturn {\n\t\t\tx: 0.5,\n\t\t\ty: 0.5,\n\t\t}\n\t}\n\n\tif ( ! focalPoint1 ) {\n\t\treturn focalPoint2;\n\t}\n\n\tif ( ! focalPoint2 ) {\n\t\treturn focalPoint1;\n\t}\n\n\treturn {\n\t\tx: parseFloat( focalPoint1.x ) + ( parseFloat( focalPoint2.x ) - parseFloat( focalPoint1.x ) ) * progress,\n\t\ty: parseFloat( focalPoint1.y ) + ( parseFloat( focalPoint2.y ) - parseFloat( focalPoint1.y ) ) * progress,\n\t}\n}\n\nexport const getStyles = function( config ) {\n\tconst props = getProps( config );\n\tconst styles = getStylesFromProps( props );\n\treturn styles;\n}\n\nexport const getStylesFromProps = function( props ) {\n\n\tconst {\n\t\tparallaxAmount,\n\t\twidth,\n\t\theight,\n\t\tmoveX,\n\t\tmoveY,\n\t\toffsetX,\n\t\toffsetY,\n\t\tscale,\n\t\tfocalPoint,\n\t} = props;\n\n\treturn {\n\t\twidth: width || '',\n\t\theight: height || '',\n\t\tminHeight: 0,\n\t\tmaxWidth: 'none',\n\t\ttransform: `translate(${ moveX },${ moveY * parallaxAmount }px) translateX(${ offsetX }) translateY(${ offsetY }px) scale(${ scale })`,\n\t\tobjectPosition: focalPoint.x * 100 + '% ' + focalPoint.y * 100 + '%',\n\t\ttransformOrigin: focalPoint.x * 100 + '% 50%',\n\t};\n}\n\nfunction getIntermediateValue( initialValue, finalValue, progress ) {\n\treturn initialValue + ( finalValue - initialValue ) * progress;\n}\n\nfunction getScales( config ) {\n\n\tlet {\n\t\tscrollingEffect,\n\t\tinitialBackgroundScale,\n\t\tfinalBackgroundScale,\n\t\tprogress,\n\t} = config;\n\n\tinitialBackgroundScale = initialBackgroundScale || 1;\n\n\tif ( scrollingEffect === 'parallax' ) {\n\t\tfinalBackgroundScale = initialBackgroundScale;\n\t}\n\n\tlet maxScale = Math.max( initialBackgroundScale, finalBackgroundScale );\n\n\tinitialBackgroundScale = initialBackgroundScale / maxScale;\n\tfinalBackgroundScale = finalBackgroundScale / maxScale;\n\n\tif ( userPrefersReducedMotion() ) {\n\t\treturn {\n\t\t\tmaxScale: 1,\n\t\t\tnewScale: 1,\n\t\t};\n\t}\n\n\treturn {\n\t\tmaxScale: maxScale,\n\t\tnewScale: getIntermediateValue( initialBackgroundScale, finalBackgroundScale, progress ),\n\t}\n}\n\nfunction getFocalPoint( config ) {\n\n\tlet {\n\t\tscrollingEffect,\n\t\tfocalPoint,\n\t\tfinalFocalPoint,\n\t\tprogress,\n\t} = config;\n\n\tif ( ! focalPoint ) {\n\t\tfocalPoint = {\n\t\t\tx: 0.5,\n\t\t\ty: 0.5,\n\t\t}\n\t}\n\n\tif ( scrollingEffect !== 'doppler' ) {\n\t\treturn focalPoint;\n\t}\n\n\treturn getIntermediateFocalPoint( focalPoint, finalFocalPoint, progress );\n}\n\nfunction getNewImageHeight( config, parallaxAmount ) {\n\n\tconst {\n\t\tscrollContainerHeight,\n\t\tcontainerHeight,\n\t} = config;\n\n\treturn containerHeight + ( scrollContainerHeight - containerHeight ) * parallaxAmount;\n}\n\nexport const getProps = function( config, fixed ) {\n\n\tconst {\n\t\tdistance,\n\t\tprogress,\n\t\tsmoothStart,\n\t\tsmoothEnd,\n\n\t\tscrollingEffect,\n\t\tfocalPoint,\n\t\tfinalFocalPoint,\n\t\tinitialBackgroundScale,\n\t\tfinalBackgroundScale,\n\n\t\tcontainer,\n\t\tcontainerBox,\n\t\tcontainerWidth,\n\t\tcontainerHeight,\n\n\t\tscrollContainer,\n\t\tscrollContainerBox,\n\t\tscrollContainerHeight,\n\t} = config;\n\n\tconst newFocalPoint = getFocalPoint( config );\n\n\tif ( scrollingEffect === 'static' ) {\n\n\t\treturn {\n\t\t\twidth: containerWidth,\n\t\t\theight: containerHeight,\n\t\t\tscale: initialBackgroundScale || 1,\n\t\t\tmoveX: 0,\n\t\t\tmoveY: 0,\n\t\t\toffsetX: 0,\n\t\t\toffsetY: 0,\n\t\t\tparallaxAmount: 0,\n\t\t\tfocalPoint: newFocalPoint,\n\t\t};\n\t}\n\n\tconst parallaxAmount = userPrefersReducedMotion() ? 0 : scrollingEffect === 'parallax' ? 0.75 : 1;\n\tconst { maxScale, newScale } = getScales( config );\n\tconst newImageHeight = getNewImageHeight( config, parallaxAmount );\n\n\t// keep in sync with scroll\n\tlet moveY = scrollContainerBox.top - containerBox.top;\n\n\tif ( ! smoothStart ) {\n\t\tif ( !! fixed && containerBox.top < 0 ) {\n\t\t\tmoveY = scrollContainerBox.top;\n\t\t}\n\n\t\tif ( ! fixed && 0 > scrollContainerBox.top - containerBox.top ) {\n\t\t\tmoveY = 0;\n\t\t}\n\t}\n\n\tif ( ! smoothEnd ) {\n\n\t\tif ( scrollContainerBox.top - containerBox.top > containerHeight - scrollContainerHeight ) {\n\t\t\tif ( !! fixed ) {\n\t\t\t\tmoveY = scrollContainerBox.top - containerBox.top - containerHeight + scrollContainerHeight;\n\t\t\t} else {\n\t\t\t\tmoveY = containerHeight - scrollContainerHeight;\n\t\t\t}\n\t\t}\n\t}\n\n\n\t// align top\n\tlet offsetY = newImageHeight * maxScale * ( newScale - 1 ) * 0.5;\n\n\t// position according to focalPoint\n\toffsetY += newImageHeight * ( 1 - maxScale * newScale ) * newFocalPoint.y;\n\n\treturn {\n\t\tdistance: distance,\n\t\tparallaxAmount: parallaxAmount,\n\t\tprogress: progress,\n\t\twidth: containerWidth * maxScale,\n\t\theight: newImageHeight * maxScale,\n\t\tmoveX: `${ fixed ? containerBox.left - scrollContainerBox.left : 0 }px`,\n\t\tmoveY: moveY,\n\t\toffsetX: ( 1 / maxScale - 1 ) * newFocalPoint.x * 100 + '%',\n\t\toffsetY: offsetY,\n\t\tscale: newScale,\n\t\tfocalPoint: newFocalPoint,\n\t};\n}\n\nexport const getState = function( container, config ) {\n\n\tif ( ! container || ! config ) {\n\t\treturn {};\n\t}\n\n\tconst {\n\t\tfollowThroughStart,\n\t\tfollowThroughEnd,\n\t\tscrollingEffect,\n\t\tscrollContainerHeight,\n\t\tscrollContainerBox,\n\t} = config;\n\n\tconst containerWidth = container.offsetWidth;\n\tconst containerHeight = container.offsetHeight;\n\tconst containerBox = container.getBoundingClientRect();\n\n\tconst smoothStart = followThroughStart || scrollingEffect === 'parallax';\n\tconst smoothEnd = followThroughEnd || scrollingEffect === 'parallax';\n\n\tlet current = scrollContainerBox.top - containerBox.top;\n\tlet distance = containerHeight - scrollContainerHeight;\n\n\tif ( smoothStart ) {\n\t\tcurrent += scrollContainerHeight;\n\t\tdistance += scrollContainerHeight;\n\t}\n\n\tif ( smoothEnd ) {\n\t\tdistance += scrollContainerHeight;\n\t}\n\n\tlet progress = distance <= 0 ? 0.5 : current / distance;\n\n\tif ( ! smoothStart ) {\n\t\tprogress = Math.max( 0, progress );\n\t}\n\n\tif ( ! smoothEnd ) {\n\t\tprogress = Math.min( 1, progress );\n\t}\n\n\tif ( userPrefersReducedMotion() ) {\n\t\tprogress = 0.5;\n\t}\n\n\treturn {\n\t\tprogress,\n\t\tdistance,\n\t\tsmoothStart,\n\t\tsmoothEnd,\n\n\t\tcontainerBox,\n\t\tcontainerHeight,\n\t\tcontainerWidth,\n\n\t\tscrollContainerHeight,\n\t\tscrollContainerBox,\n\t}\n};\n\nfunction getScrollContainerHeight() {\n\tconst useOrientation = hasTouchScreen() && 'orientation' in window;\n\treturn useOrientation && window.screen && window.screen.availHeight || window.innerHeight\n}\n\nexport const parallaxInit = function( $blocks ) {\n\n\tlet frameRendered = false;\n\tlet scrollContainerHeight = getScrollContainerHeight();\n\n\t$blocks.each( function( i, container ) {\n\t\tvar $container = $( container );\n\t\tvar followThroughStart = !! $container.data( 'smooth-start' );\n\t\tvar followThroughEnd = !! $container.data( 'smooth-end' );\n\t\tvar scrollingEffect = $container.data( 'scrolling-effect' );\n\t\tvar focalPoint = $container.data( 'focal-point' );\n\t\tvar finalFocalPoint = $container.data( 'final-focal-point' );\n\t\tvar initialBackgroundScale = $container.data( 'initial-background-scale' );\n\t\tvar finalBackgroundScale = $container.data( 'final-background-scale' );\n\t\tvar scrollContainerBox = {\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t};\n\n\t\tvar config = {\n\t\t\tfollowThroughStart,\n\t\t\tfollowThroughEnd,\n\t\t\tscrollingEffect,\n\t\t\tscrollContainerHeight,\n\t\t\tscrollContainerBox,\n\t\t\tfocalPoint,\n\t\t\tfinalFocalPoint,\n\t\t\tinitialBackgroundScale,\n\t\t\tfinalBackgroundScale,\n\t\t};\n\n\t\t$container.data( {\n\t\t\tstate: getState( container, config ),\n\t\t\tconfig: config,\n\t\t} );\n\n\t\tvar $parallax = $container.find( '.novablocks-parallax' );\n\n\t\t$container.data( 'parallax', $parallax );\n\n\t\tfunction parallaxUpdateState() {\n\t\t\tvar newConfig = Object.assign( {}, config, {\n\t\t\t\tscrollContainerHeight: getScrollContainerHeight()\n\t\t\t} );\n\t\t\tvar state = getState( container, newConfig );\n\t\t\t$container.data( 'state', state );\n\t\t\t$container.data( 'config', newConfig );\n\t\t\tframeRendered = false;\n\t\t}\n\n\t\t$( window ).on( 'scroll', parallaxUpdateState );\n\t\t$( window ).on( 'resize', parallaxUpdateState );\n\t} );\n\n\tfunction parallaxUpdateLoop() {\n\t\tif ( ! frameRendered ) {\n\t\t\t$blocks.each( function( i, obj ) {\n\t\t\t\tlet $container = $( obj );\n\t\t\t\tlet $background = $container.data( 'parallax' );\n\t\t\t\tlet $foreground = $background.find( '.novablocks-foreground' );\n\t\t\t\tlet state = $container.data( 'state' );\n\t\t\t\tlet config = $container.data( 'config' );\n\n\t\t\t\tconfig = Object.assign( {}, state, config );\n\n\t\t\t\tlet props = getProps( config, true );\n\n\t\t\t\t$foreground.css( 'transform', `translate3d(0,${ -props.moveY * props.parallaxAmount }px,0)` );\n\n\t\t\t\t// because of fixed positioning\n\t\t\t\tprops.moveY = -1 * props.moveY;\n\n\t\t\t\tif ( 0 < props.progress && props.progress < 1 ) {\n\t\t\t\t\tprops.parallaxAmount = 1 - props.parallaxAmount;\n\t\t\t\t}\n\n\t\t\t\tlet styles = getStylesFromProps( props );\n\n\t\t\t\t$container.data( 'parallax' ).css( styles );\n\t\t\t} );\n\t\t\tframeRendered = true;\n\t\t}\n\t\trequestAnimationFrame( parallaxUpdateLoop );\n\t}\n\n\trequestAnimationFrame( parallaxUpdateLoop );\n}\n","import pin from \"./pin\";\nimport { addVisibilityToStyles, getCenterFromMarkers } from \"./utils\";\nimport { parallaxInit } from \"../../components/with-parallax/util\";\n\n(function( $, window, undefined ) {\n\n\tconst $blocks = $( '.novablocks-map' );\n\n\tparallaxInit( $blocks );\n\tmapInit();\n\n\tfunction mapInit() {\n\n\t\tif ( typeof google === \"undefined\" || typeof google.maps === \"undefined\" ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$( '.js-novablocks-google-map' ).each( function( i, obj ) {\n\n\t\t\tvar $obj = $( obj ),\n\t\t\t\tmarkers = $obj.data( 'markers' ),\n\t\t\t\tshowLabels = $obj.data( 'show-labels' ),\n\t\t\t\tshowIcons = $obj.data( 'show-icons' ),\n\t\t\t\tstyles = $obj.data( 'styles' ),\n\t\t\t\tzoom = $obj.data( 'zoom' ),\n\t\t\t\thideControls = ! $obj.data( 'controls' ),\n\t\t\t\tpinColor = $obj.data( 'pin-color' ),\n\t\t\t\tmapOptions = {\n\t\t\t\t\tmapTypeId: 'roadmap',\n\t\t\t\t\tcenter: getCenterFromMarkers( markers ),\n\t\t\t\t\tzoom: zoom,\n\t\t\t\t\tstyles: addVisibilityToStyles( styles, showLabels, showIcons ),\n\t\t\t\t\tdisableDefaultUI: hideControls,\n\t\t\t\t\tclickableIcons: false,\n\t\t\t\t\tkeyboardShortcuts: false,\n\t\t\t\t},\n\t\t\t\tmap = new google.maps.Map( obj, mapOptions );\n\n\t\t\tvar pinMarkup = pin.replace( /%ACCENT_COLOR%/g, pinColor );\n\n\t\t\tmarkers.forEach( markerString => {\n\t\t\t\tconst marker = JSON.parse( markerString );\n\n\t\t\t\tnew google.maps.Marker( {\n\t\t\t\t\tmap: map,\n\t\t\t\t\ticon: { url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent( pinMarkup ) },\n\t\t\t\t\ttitle: marker.title,\n\t\t\t\t\tposition: marker.geometry.location,\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n})( jQuery, window );\n","import { parallaxInit } from \"../../components/with-parallax/util\";\n\n(function($, window, undefined) {\n\n\tlet $heroes = $( '.novablocks-hero' );\n\tlet windowScrollY;\n\tlet scrollButtonHidden = false;\n\n\tconst $scrollButton = $( '.novablocks-hero__indicator' );\n\n\tparallaxInit( $heroes );\n\tbulletsInit();\n\tscrollButtonInit();\n\tupdateScroll();\n\n\t$( window ).on( 'scroll', updateScroll );\n\n\tfunction updateScroll() {\n\t\twindowScrollY = window.scrollY;\n\n\t\tif ( windowScrollY > 200 ) {\n\t\t\thideScrollButton();\n\t\t}\n\t}\n\n\tfunction bulletsInit() {\n\t\tconst $body = $( 'body' );\n\t\tconst shouldHaveBullets = $body.is( '.novablocks-has-position-indicators' ) && $( '.novablocks-hero' ).length > 1;\n\n\t\tif ( shouldHaveBullets && typeof $.fn.bully !== 'undefined' ) {\n\t\t\t$( '.novablocks-hero' ).bully();\n\t\t}\n\t}\n\n\tfunction hideScrollButton() {\n\n\t\tif ( scrollButtonHidden ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$scrollButton.filter( '.novablocks-hero__indicator--middle' ).addClass( 'novablocks-hero__indicator--hidden' );\n\t\tscrollButtonHidden = true;\n\n\t}\n\n\tfunction scrollButtonInit() {\n\t\tconst $hero = $scrollButton.closest( '.novablocks-hero' );\n\n\t\tif ( $hero.length ) {\n\t\t\t$scrollButton.on( 'click', function() {\n\t\t\t\tconst heroBox = $hero.get(0).getBoundingClientRect();\n\t\t\t\tconst heroBoxTop = heroBox.y || heroBox.top;\n\n\t\t\t\twindow.scrollTo( {\n\t\t\t\t\ttop: heroBoxTop + heroBox.height + windowScrollY,\n\t\t\t\t\tbehavior: 'smooth'\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t}\n\n})(jQuery, window);\n","import { parallaxInit } from \"../../components/with-parallax/util\";\n\nimport {\n\tdebounce,\n\thasTouchScreen\n} from '../../utils';\n\nconst BLOCK_SELECTOR = '.novablocks-slideshow';\nconst SLIDER_SELECTOR = '.novablocks-slideshow__slider';\nconst SLIDE_SELECTOR = '.novablocks-slideshow__slide';\nconst FOREGROUND_SELECTOR = '.novablocks-slideshow__foreground';\nconst TRANSITION_DURATION = 1000;\nconst TRANSITION_EASING = \"easeInOutCirc\";\n\n(function($, window, undefined) {\n\n\tconst $window = $( window );\n\tconst $blocks = $( BLOCK_SELECTOR );\n\tconst useOrientation = hasTouchScreen() && 'orientation' in window;\n\tconst onDebouncedResize = debounce( onResize, 300 );\n\n\t$blocks.each( function( index, block ) {\n\t\tvar $block = $( block ),\n\t\t\t$slider = $block.find( SLIDER_SELECTOR ),\n\t\t\t$arrowContainer;\n\n\t\tresetBlockMinHeight( $block );\n\n\t\tif ( $slider.children().length > 1 ) {\n\t\t\t$arrowContainer = $( '<div class=\"novablocks-slideshow__controls\">' ).appendTo( $block );\n\n\t\t\t$slider.on( 'beforeChange', onBeforeSlideChange );\n\n\t\t\t$slider.slick({\n\t\t\t\trows: 0,\n\t\t\t\t// for simpler reveal transitions between slides\n\t\t\t\tfade: true,\n\t\t\t\tprevArrow: '<div class=\"novablocks-slideshow__arrow novablocks-slideshow__arrow--prev\"></div>',\n\t\t\t\tnextArrow: '<div class=\"novablocks-slideshow__arrow novablocks-slideshow__arrow--next\"></div>',\n\t\t\t\tappendArrows: $arrowContainer,\n\t\t\t\tspeed: 0,\n\t\t\t});\n\t\t}\n\n\t\t$block.addClass( 'is-ready' );\n\t});\n\n\tparallaxInit( $blocks );\n\n\tif ( useOrientation ) {\n\t\t$window.on( 'orientationchange', function() {\n\t\t\t$window.one( 'resize', onResize );\n\t\t} );\n\t} else {\n\t\t$window.on( 'resize', onDebouncedResize );\n\t}\n\n\tfunction resetBlockMinHeight( $block ) {\n\t\t$block.css( 'minHeight', '' );\n\t\t$block.css( 'minHeight', getBlockMinHeight( $block ) );\n\n\t\t$( window ).trigger( 'scroll' );\n\t}\n\n\tfunction getBlockMinHeight( $block ) {\n\t\tvar windowWidth = window.innerWidth;\n\t\tvar $slider = $block.find( SLIDER_SELECTOR );\n\t\tvar sliderWidth = $block.find( SLIDER_SELECTOR ).outerWidth();\n\t\tvar windowHeight = window.innerHeight;\n\t\tvar sliderMinHeight = parseInt( $block.data( 'min-height' ) ) * windowHeight / 100;\n\t\tvar mediaMinHeight = 0;\n\t\tvar slideMaxHeight = 0;\n\t\tvar maxAspectRatio = 0;\n\n\t\t$block.find( SLIDE_SELECTOR ).each( function( i, obj ) {\n\t\t\tvar $slide = $( obj ),\n\t\t\t\t$media = $slide.find( '.novablocks-slideshow__media' ),\n\t\t\t\twidth = $media.data( 'width' ),\n\t\t\t\theight = $media.data( 'height' ),\n\t\t\t\taspectRatio = width / height,\n\t\t\t\tslideHeight = $slide.outerHeight();\n\n\t\t\tmaxAspectRatio = aspectRatio > maxAspectRatio ? aspectRatio : maxAspectRatio;\n\t\t\tmediaMinHeight = sliderWidth / maxAspectRatio;\n\t\t\tslideMaxHeight = slideHeight > slideMaxHeight ? slideHeight : slideMaxHeight;\n\n\t\t} );\n\n\t\treturn Math.max( sliderMinHeight, slideMaxHeight, mediaMinHeight );\n\t}\n\n\tfunction onResize() {\n\n\t\t$blocks.each( function( index, block ) {\n\t\t\tvar $block = $( block );\n\t\t\tvar $slider = $block.find( SLIDER_SELECTOR );\n\n\t\t\tresetBlockMinHeight( $block );\n\n\t\t\tif ( $slider.is( '.slick-initialized' ) ) {\n\t\t\t\t$slider.slick( 'setPosition' );\n\t\t\t}\n\t\t});\n\n\t}\n\n\tfunction onBeforeSlideChange( event, slick, currentSlide, nextSlide ) {\n\t\tconst $currentSlide = $( slick.$slides[currentSlide] );\n\t\tconst $nextSlide = $( slick.$slides[nextSlide] );\n\t\tconst $slides = $( slick.$slides );\n\n\t\ttransition( $currentSlide, $nextSlide, getDirection( slick, currentSlide, nextSlide ) );\n\t}\n\n\tfunction hasFixedBackground( $slide ) {\n\t\tlet fixed = false;\n\n\t\tif ( $slide.find( '.novablocks-parallax' ).css( 'position' ) === 'fixed' ) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn fixed;\n\t}\n\n\tfunction transition( $current, $next, sign = 1 ) {\n\t\tconst slideWidth = $current.outerWidth();\n\t\tconst move = 300;\n\t\tconst isFixed = hasFixedBackground( $current );\n\n\t\t$current.velocity( {\n\t\t\ttween: [0, 1]\n\t\t}, {\n\t\t\tduration: TRANSITION_DURATION,\n\t\t\teasing: TRANSITION_EASING,\n\t\t\tbegin: function() {\n\t\t\t\t$current.addClass( 'novablocks-slideshow__slide--current' );\n\t\t\t\t$next.addClass( 'novablocks-slideshow__slide--next' );\n\t\t\t},\n\t\t\tprogress: function(elements, percentComplete, remaining, tweenValue, activeCall) {\n\t\t\t\tconst next = $next.find( '.novablocks-slideshow__slide-wrap' ).get(0);\n\t\t\t\tconst nextBg = $next.find( '.novablocks-slideshow__media' ).get(0);\n\t\t\t\tconst nextFg = $next.find( FOREGROUND_SELECTOR ).get(0);\n\t\t\t\tconst current = $current.get(0);\n\t\t\t\tconst currentBg = $current.find( '.novablocks-slideshow__media' ).get(0);\n\t\t\t\tconst currentFg = $current.find( FOREGROUND_SELECTOR ).get(0);\n\n\t\t\t\tif ( isFixed ) {\n\t\t\t\t\tnext.style.left = slideWidth * tweenValue + 'px';\n\t\t\t\t\tnextBg.style.left = move * tweenValue + 'px';\n\t\t\t\t\tnextFg.style.left = slideWidth * -tweenValue + 'px';\n\t\t\t\t\tcurrentBg.style.left =  move * (tweenValue - 1) + 'px';\n\t\t\t\t} else {\n\t\t\t\t\tnext.style.left = slideWidth * tweenValue + 'px';\n\t\t\t\t\tnextBg.style.left = (move - slideWidth) * tweenValue + 'px';\n\t\t\t\t\tnextFg.style.left = (move - slideWidth) * tweenValue + 'px';\n\t\t\t\t\tcurrentBg.style.left =  move * (tweenValue - 1) + 'px';\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomplete: function() {\n\t\t\t\t$current.removeClass( 'novablocks-slideshow__slide--current' );\n\t\t\t\t$next.removeClass( 'novablocks-slideshow__slide--next' );\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction getDirection( slick, currentSlide, nextSlide ) {\n\t\tlet direction = 1;\n\t\tif ( slick.slideCount > 2 ) {\n\t\t\tif ( currentSlide === 0 && nextSlide === slick.slideCount - 1 ) {\n\t\t\t\tdirection = -1;\n\t\t\t}\n\t\t\tif ( nextSlide < currentSlide && ( nextSlide !== 0 || currentSlide !== slick.slideCount - 1 ) ) {\n\t\t\t\tdirection = -1;\n\t\t\t}\n\t\t}\n\t\treturn direction;\n\t}\n\n})(jQuery, window);\n","import $ from 'jquery';\nimport { debounce, isSafari, getRandomBetween } from \"../../utils\";\n\nexport const getRandomAttributes = () => {\n\treturn {\n\t\tsizeContrast: getRandomBetween(0, 5) * 20,\n\t\tpositionShift: getRandomBetween(0, 20) * 5,\n\t\telementsDistance: getRandomBetween(0, 5) * 20,\n\t\tplacementVariation: getRandomBetween(1, 4) * 25,\n\t\tstylePreset: 'just-my-style',\n\t};\n};\n\nexport const getGalleryStyle = ( attributes ) => {\n\tlet containerHeight = attributes.containerHeight / 50 - 1;\n\tlet numerator = 1;\n\tlet denominator = 1;\n\n\tcontainerHeight = Math.min( Math.max( -1, containerHeight ), 1 );\n\n\tif ( containerHeight > 0 ) {\n\t\tnumerator = 1 + containerHeight;\n\t}\n\n\tif ( containerHeight < 0 ) {\n\t\tdenominator = 1 + Math.abs( containerHeight );\n\t}\n\n\treturn {\n\t\tpaddingTop: `${ numerator * 100 / denominator }%`,\n\t}\n};\n\nexport const getGridStyle = ( attributes ) => {\n\tconst { elementsDistance } = attributes;\n\n\treturn {\n\t\t'--novablocks-advanced-gallery-grid-gap': `${ elementsDistance }px`\n\t}\n};\n\nexport const safariHeightFix = ( grid ) => {\n\n\tif ( ! isSafari ) {\n\t\treturn;\n\t}\n\n\tconst parent = grid.parentNode;\n\tconst $grid = $( grid );\n\tconst $parent = $( parent );\n\n\tconst resetHeight = () => {\n\t\tconst newHeight = $parent.outerHeight();\n\n\t\t$grid.css( 'height', newHeight );\n\t};\n\n\tconst debouncedResetHeight = debounce( resetHeight, 30 );\n\n\tresetHeight();\n\n\tif ( typeof window.ResizeObserver !== \"undefined\" ) {\n\t\tconst observer = new ResizeObserver( entries => {\n\t\t\tdebouncedResetHeight();\n\t\t} );\n\n\t\tobserver.observe( parent );\n\t} else {\n\t\t$( window ).on( 'resize', function() {\n\t\t\tdebouncedResetHeight();\n\t\t} );\n\t}\n};\n","const ITEM_SIZE = 20;\n\nexport class GridItemCollection {\n\n\tconstructor( images, attributes ) {\n\t\tconst placementVariation = attributes.placementVariation / 25 - 1;\n\n\t\tthis.gridItems = images.map( ( image, index ) => {\n\t\t\tconst groupStart = Math.floor( index / 4 ) * 4;\n\t\t\tconst groupEnd = Math.min( groupStart + 4, images.length );\n\t\t\tconst isGroupOfThree = groupEnd - groupStart === 3;\n\n\t\t\treturn new GridItem( image, index, attributes, isGroupOfThree );\n\t\t} );\n\n\t\tthis.removeExtra();\n\n\t\tif ( placementVariation === 1 || placementVariation === 2 ) {\n\t\t\tthis.flipX();\n\t\t}\n\n\t\tif ( placementVariation === 2 || placementVariation === 3 ) {\n\t\t\tthis.flipY();\n\t\t}\n\t}\n\n\tremoveExtra() {\n\t\tconst extraLeft = this.getExtraLeft();\n\t\tconst extraTop = this.getExtraTop();\n\t\tconst extraBetween = this.getExtraBetween();\n\n\t\tthis.gridItems = this.gridItems.map( ( gridItem, index ) => {\n\t\t\tconst groupIndex = Math.floor( index / 4 );\n\n\t\t\tgridItem.x = gridItem.x - extraLeft;\n\t\t\tgridItem.y = gridItem.y - extraTop - groupIndex * extraBetween;\n\n\t\t\treturn gridItem;\n\t\t} );\n\t}\n\n\tflipX() {\n\t\tconst maxX = Math.max( ...this.gridItems.map( gridItem => gridItem.x + gridItem.width ) );\n\n\t\tthis.gridItems = this.gridItems.map( ( gridItem, index ) => {\n\t\t\tgridItem.x = maxX - gridItem.x - gridItem.width + 1;\n\t\t\treturn gridItem;\n\t\t} );\n\t}\n\n\tflipY() {\n\t\tconst maxY = Math.max( ...this.gridItems.map( gridItem => gridItem.y + gridItem.height ) );\n\n\t\tthis.gridItems = this.gridItems.map( ( gridItem, index ) => {\n\t\t\tgridItem.y = maxY - gridItem.y - gridItem.height + 1;\n\t\t\treturn gridItem;\n\t\t} );\n\t}\n\n\tgetExtraLeft() {\n\t\treturn Math.min( ...this.gridItems.map( gridItem => gridItem.x ) ) - 1;\n\t}\n\n\tgetExtraTop() {\n\t\treturn Math.min( ...this.gridItems.map( gridItem => gridItem.y ) ) - 1;\n\t}\n\n\tgetExtraBetween() {\n\t\tconst firstGroup = this.gridItems.slice( 0, 4 );\n\t\tconst maxBottom = Math.max( ...firstGroup.map( gridItem => gridItem.y + gridItem.height ) );\n\n\t\treturn ITEM_SIZE * 2 - maxBottom + 1;\n\t}\n}\n\nexport default class GridItem {\n\n\tconstructor( image, index, attributes, isGroupOfThree ) {\n\n\t\tthis.sizeContrast = attributes.sizeContrast / 20;\n\t\tthis.positionShift = attributes.positionShift / 5;\n\t\tthis.objectPosition = attributes.objectPosition;\n\t\tthis.imageResizing = attributes.imageResizing;\n\t\tthis.imageRotation = attributes.imageRotation;\n\n\t\tthis.image = image;\n\t\tthis.index = index;\n\n\t\tthis.idx = this.getIndex( index );\n\t\tthis.col = this.idx % 2;\n\t\tthis.row = Math.floor( index / 2 );\n\n\t\tif ( !! isGroupOfThree ) {\n\n\t\t\tif ( index === 0 ) {\n\t\t\t\tthis.positionShift = Math.min( this.positionShift, 10 );\n\t\t\t}\n\n\t\t\tif ( index === 2 ) {\n\t\t\t\tthis.positionShift = Math.max( this.positionShift, 10 );\n\t\t\t}\n\n\t\t}\n\n\t\tlet { offsetX, offsetY } = this.getOffsets();\n\t\tconst size = ITEM_SIZE - this.sizeContrast * ( index % 4 );\n\n\t\tthis.x = ITEM_SIZE * this.col + 1 + offsetX;\n\t\tthis.y = ITEM_SIZE * this.row + 1 + offsetY;\n\n\t\tthis.width = size;\n\t\tthis.height = size;\n\t}\n\n\tgetOffsets() {\n\t\tconst { row, col, index, sizeContrast, positionShift } = this;\n\n\t\t// offset for positioning\n\t\tlet offsetX = ( 1 - col % 2 ) * ( index % 4 ) * sizeContrast;\n\t\tlet offsetY = ( 1 - row % 2 ) * ( index % 4 ) * sizeContrast;\n\n\t\t// offset from offset\n\t\t// move 1st to right\n\t\toffsetX += ( 1 - col % 2 ) * ( 1 - row % 2 ) * positionShift;\n\t\t// move 3rd to left\n\t\toffsetX -= ( col % 2 ) * ( row % 2 ) * positionShift;\n\t\t// move 2nd down\n\t\toffsetY -= ( 1 - col % 2 ) * ( row % 2 ) * positionShift;\n\t\t// move 4th up\n\t\toffsetY += ( col % 2 ) * ( 1 - row % 2 ) * positionShift;\n\n\t\treturn {\n\t\t\toffsetX,\n\t\t\toffsetY,\n\t\t}\n\t}\n\n\t// reoder to display items clockwise\n\tgetIndex( index ) {\n\t\tif ( index % 4 === 3 ) return index - 1;\n\t\tif ( index % 4 === 2 ) return index + 1;\n\n\t\treturn index;\n\t}\n\n\tgetStyle() {\n\t\tconst { index, x, y, width, height, imageRotation } = this;\n\t\tconst rotation = `rotate(${ ( index % 2 - 0.5 ) * imageRotation / 10 }deg)`;\n\n\t\treturn {\n\t\t\tgridColumnStart: x + '',\n\t\t\tgridColumnEnd: `span ${ width }`,\n\t\t\tgridRowStart: y + '',\n\t\t\tgridRowEnd: `span ${ height }`,\n\t\t\ttransform: rotation,\n\t\t};\n\t}\n\n\tgetImageStyle() {\n\t\tconst { row, col, objectPosition, imageResizing } = this;\n\t\tconst positionY = row % 2 === 0 ? 100 - objectPosition : objectPosition;\n\t\tconst positionX = col % 2 === 0 ? 100 - objectPosition : objectPosition;\n\n\t\treturn {\n\t\t\tobjectFit: imageResizing === 'cropped' ? 'cover' : 'scale-down',\n\t\t\tobjectPosition: `${ positionX }% ${ positionY }%`,\n\t\t}\n\t}\n}\n","import {\n\tgetGalleryStyle,\n\tgetGridStyle,\n} from \"../../components/advanced-gallery/util\";\n\nimport { GridItemCollection } from \"../../components/advanced-gallery/grid-item\";\n\n(function($, window, undefined) {\n\n\t$( '.novablocks-advanced-gallery' ).each( ( i, gallery ) => {\n\n\t\tlet $gallery = $( gallery ),\n\t\t\t$grid = $gallery.find( '.novablocks-advanced-gallery__grid' ),\n\t\t\timages = $gallery.find( '.novablocks-advanced-gallery__image' ).toArray();\n\n\t\tconst attributes = {\n\t\t\timageResizing: $gallery.data( 'imageresizing' ),\n\t\t\tcontainerHeight: $gallery.data( 'containerheight' ),\n\t\t\tpositionShift: $gallery.data( 'positionshift' ),\n\t\t\tsizeContrast: $gallery.data( 'sizecontrast' ),\n\t\t\timageRotation: $gallery.data( 'imagerotation' ),\n\t\t\tplacementVariation: $gallery.data( 'placementvariation' ),\n\t\t\telementsDistance: $gallery.data( 'elementsdistance' ),\n\t\t\tverticalSpacing: $gallery.data( 'verticalspacing' ),\n\t\t\tobjectPosition: $gallery.data( 'objectposition' ),\n\t\t};\n\n\t\tconst gridItemsCollection = new GridItemCollection( images, attributes );\n\n\t\tgridItemsCollection.gridItems.map( ( gridItem, index ) => {\n\t\t\tlet $image = $( gridItem.image ),\n\t\t\t\t$item = $image.closest( '.novablocks-advanced-gallery__grid-item' );\n\n\t\t\t$item.css( gridItem.getStyle() );\n\t\t\t$image.css( gridItem.getImageStyle() );\n\t\t} );\n\n\t\tconst galleryStyle = getGalleryStyle( attributes );\n\n\t\tfor ( let propertyName in galleryStyle ) {\n\t\t\t$gallery.css( galleryStyle );\n\n\t\t\tif ( propertyName.indexOf( '--' ) === 0 ) {\n\t\t\t\tgallery.style.setProperty( propertyName, galleryStyle[ propertyName ] );\n\t\t\t}\n\t\t}\n\n\t\tif ( $grid.length ) {\n\n\t\t\tconst gridStyle = getGridStyle( attributes );\n\n\t\t\t$grid.css( gridStyle );\n\n\t\t\tfor ( let propertyName in gridStyle ) {\n\t\t\t\tif ( propertyName.indexOf( '--' ) === 0 ) {\n\t\t\t\t\t$grid.get( 0 ).style.setProperty( propertyName, gridStyle[propertyName] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} );\n\n})(jQuery, window);\n","import classnames from \"classnames\";\n\nexport const getGridStyle = ( attributes ) => {\n\n\tconst { gridcolumns, gridrows } = getGridColumnsAndRows( attributes );\n\n\treturn {\n\t\tdisplay: 'grid',\n\t\tgridTemplateColumns: `repeat( ${ gridcolumns }, 1fr )`,\n\t\tgridTemplateRows: `repeat( ${ gridrows }, auto )`,\n\t};\n};\n\n// Sums optimal posts count value from each area\nexport const getPostsCount = ( areaColumns ) => {\n\treturn areaColumns.reduce( ( total, areaColumn ) => {\n\t\treturn total + areaColumn.areas.reduce( ( columnTotal, area ) => {\n\t\t\treturn columnTotal + area.postsCount;\n\t\t}, 0 );\n\t}, 0 );\n};\n\nexport const redistributeCardsInAreas = ( areaColumns, cardsCount, attributes ) => {\n\tlet totalSpots = getPostsCount( areaColumns );\n\tlet totalPosts = cardsCount;\n\tlet remainingPosts = totalPosts;\n\tlet totalRatio = 0;\n\n\tfor ( let i = 0; i < areaColumns.length; i++ ) {\n\t\tlet areaColumn = areaColumns[i];\n\t\tlet areaColumnSpotRatio = 0;\n\n\t\tfor ( let j = 0; j < areaColumn.areas.length; j ++ ) {\n\t\t\tlet area = areaColumn.areas[j];\n\t\t\t// we shouldn't fill the area with the featured card\n\t\t\tarea.spotRatio = getCardRatio( area, attributes );\n\t\t\tareaColumnSpotRatio += area.spotRatio;\n\t\t\ttotalRatio += area.spotRatio;\n\t\t}\n\n\t\tareaColumn.spotRatio = areaColumnSpotRatio;\n\t}\n\n\tlet extraPosts = totalPosts - totalSpots;\n\n\tif ( totalSpots === totalPosts ) {\n\t\treturn;\n\t}\n\n\tfor ( let i = 0; i < areaColumns.length; i++ ) {\n\t\tlet areaColumn = areaColumns[i];\n\t\tlet { areas } = areaColumn;\n\n\t\tfor ( let j = 0; j < areas.length; j++ ) {\n\t\t\tlet area = areas[j];\n\t\t\tlet areaExtraPosts = Math.round( extraPosts * area.spotRatio / totalRatio );\n\t\t\tarea.postsCount = Math.max( 0, area.postsCount + areaExtraPosts );\n\t\t\ttotalRatio -= area.spotRatio;\n\t\t\textraPosts -= areaExtraPosts;\n\n\t\t\tif ( remainingPosts <= 0 ) return;\n\t\t}\n\t}\n};\n\nexport const getOptimalHeaderPosition = areaColumns => {\n\tlet index = 1;\n\tlet positions = [0];\n\n\tfor ( let columnIndex = 0; columnIndex < areaColumns.length; columnIndex++ ) {\n\t\tconst areaColumn = areaColumns[columnIndex];\n\t\tconst { areas, row } = areaColumn;\n\n\t\tfor ( let areaIndex = 0; areaIndex < areas.length; areaIndex++ ) {\n\t\t\tconst area = areas[areaIndex];\n\n\t\t\tif ( row === 1 && areaIndex === 0 ) {\n\t\t\t\tpositions.push( index );\n\t\t\t}\n\n\t\t\tindex += area.postsCount;\n\t\t}\n\t}\n\n\treturn positions;\n};\n\nconst getCardRatio = ( area, attributes ) => {\n\tconst { gridcolumns } = getGridColumnsAndRows( attributes );\n\tconst { width, height, postsCount } = area;\n\tlet ratio = postsCount / height;\n\n\t// when the card is landscape and very small\n\t// we hide the content so the ratio should be bigger\n\tif ( isLandscape( area, attributes ) ) {\n\t\tratio *= 2;\n\t}\n\n\tratio *= gridcolumns / width;\n\n\treturn ratio;\n};\n\nexport const isLandscape = ( area, attributes ) => {\n\tconst { gridcolumns, gridrows } = getGridColumnsAndRows( attributes );\n\tconst { nth, width, height, initialPostsCount } = area;\n\n\tconst isLandscape = width * initialPostsCount / height > 1.33;\n\n\tif ( width / gridcolumns >= 0.5 ) {\n\t\treturn isLandscape || ( attributes.subfeature && nth === 2 );\n\t}\n\n\treturn isLandscape;\n};\n\nexport const getParametricLayoutAreaClassName = ( area, attributes ) => {\n\tconst { gridcolumns, gridrows } = getGridColumnsAndRows( attributes );\n\tconst { width, height } = area;\n\n\treturn classnames([\n\t\tgetAreaBaseClassname( area ),\n\t\tgetAreaClassnameByWidthRatio( width / gridcolumns ),\n\t\tgetAreaClassnameByHeightRatio( height / gridrows ),\n\t\tgetAreaClassnameByAspectRatio( area, attributes )\n\t]);\n};\n\nexport const getAreaBaseClassname = ( area ) => {\n\tconst { nth } = area;\n\n\treturn classnames([\n\t\t'novablocks-grid__area',\n\t\t`novablocks-grid__area--nth-${ nth }`,\n\t]);\n};\n\nexport const getAreaClassnameByAspectRatio = ( area, attributes ) => {\n\treturn classnames([\n\t\t{\n\t\t\t'novablocks-grid__area--portrait': ! isLandscape( area, attributes ),\n\t\t\t'novablocks-grid__area--landscape': isLandscape( area, attributes ),\n\t\t}\n\t]);\n};\n\nexport const getAreaClassnameByWidthRatio = ( widthRatio ) => {\n\treturn classnames([{\n\t\t'novablocks-grid__area--width-xs': widthRatio < 0.3,\n\t\t'novablocks-grid__area--width-s': 0.3 <= widthRatio && widthRatio < 0.5,\n\t\t'novablocks-grid__area--width-m': 0.5 <= widthRatio && widthRatio < 0.66,\n\t\t'novablocks-grid__area--width-l': 0.66 <= widthRatio && widthRatio < 0.80,\n\t\t'novablocks-grid__area--width-xl': 0.80 <= widthRatio && widthRatio < 0.95,\n\t\t'novablocks-grid__area--width-full': 0.95 <= widthRatio,\n\t}]);\n};\n\nexport const getAreaClassnameByHeightRatio = ( heightRatio ) => {\n\treturn classnames([{\n\t\t'novablocks-grid__area--height-xs': heightRatio < 0.34,\n\t\t'novablocks-grid__area--height-s': 0.34 <= heightRatio && heightRatio < 0.5,\n\t\t'novablocks-grid__area--height-m': 0.5 <= heightRatio && heightRatio < 0.66,\n\t\t'novablocks-grid__area--height-l': 0.66 <= heightRatio && heightRatio < 0.80,\n\t\t'novablocks-grid__area--height-xl': 0.80 <= heightRatio,\n\t}])\n};\n\nexport const getGridColumnsAndRows = ( attributes ) => {\n\treturn {\n\t\tgridcolumns: ! attributes.flipcolsrows ? attributes.gridcolumns : attributes.gridrows,\n\t\tgridrows: ! attributes.flipcolsrows ? attributes.gridrows : attributes.gridcolumns,\n\t}\n};\n\nexport const transposeMatrix = ( source ) => {\n\treturn Object.keys( source[0] ).map( function( column ) {\n\t\treturn source.map( function( row ) {\n\t\t\treturn row[column];\n\t\t} );\n\t} );\n};\n","import { transposeMatrix } from './utils';\n\n// This is the main workhorse containing the logic of our layout \"engine\".\n// Given a state, it will return a list of posts with details to handle their layout.\nexport const applyLayoutEngine = state => {\n\n\tconst debug = false;\n\n\t// Before we can get to generating the \"grid areas\" for each post (meaning start col and row plus end col and ro),\n\t// we need to do a couple of preliminary calculations.\n\t// To hold the data, we will work with matrices, uni or bidimensional, representing the actual columns and rows.\n\t// This way we gain an easier understanding of what is going on at each step of the logic.\n\t// In each matrix we will ignore index 0 since it is easier to start from 1,\n\t// the same way CSS grid columns and rows behave.\n\n\t// The order of these operation is important!\n\n\tdebug ? console.log( \"\\nGenerating a new layout...\\n\\n\"): false;\n\n\t// The \"null\" character:\n\tconst emptyChar = \"X\";\n\n\t// These are the matrices we are going to calculate:\n\t// The nth matrix: a bidimensional matrix the same size as the grid, holding in each cell what nth post should that cell belong to.\n\t// From this matrix we can extrapolate many details since the same nth value will be used to fill all the cells belonging to a post.\n\t// So we know the position and dimensions.\n\tconst nthMatrix = initBidimensionalMatrix([], state.gridcolumns, state.gridrows, emptyChar);\n\t// The image weight matrix\n\tconst imageWeightMatrix = initBidimensionalMatrix([], state.gridcolumns, state.gridrows, emptyChar);\n\t// The meta-details matrix\n\tconst metaDetailsMatrix = initBidimensionalMatrix([], state.gridcolumns, state.gridrows, emptyChar);\n\n\t// Helper matrices.\n\n\t// The columns width matrix\n\tconst widthMatrix = initUnidimensionalMatrix([], state.gridcolumns, emptyChar);\n\t// The vertical fragment size matrix\n\tconst verticalFragmentSizeMatrix = initUnidimensionalMatrix([], state.gridcolumns, emptyChar);\n\n\tlet i,j;\n\n\t// Lets start PRELIMINARY CALCULATIONS!\n\n\t/*\n\t1. Calculate the columns width matrix.\n\t   We will take into account the feature position, feature size and fragmentation value.\n\t   The fragmentation value is interpreted in it's bit format, where 1 means a \"cut\".\n\t   The fragmentation value represents the fragmentation of the remaining gridcolumns after the feature size was deducted.\n\t */\n\n\tlet widthIdx = 1;\n\t// First, mark the feature.\n\tfor (i=state.featureposition; i < state.featureposition + state.featuresize; i++) {\n\t\twidthMatrix[i] = widthIdx;\n\t}\n\n\t// Next, go from left to right in the columns width matrix, and fill each columns with the same unique number,\n\t// Taking into account the fragmentation.\n\t// And remember the positions we are int the virtual matrix without the feature.\n\tlet frgIdx = 0;\n\twidthIdx++;\n\tfor (i=1; i <= state.gridcolumns; i++) {\n\t\tif (widthMatrix[i] === emptyChar) {\n\t\t\tfrgIdx++;\n\t\t\t// If the previous position has a different number than the current one, it is clear we should increment and write.\n\t\t\tif (widthMatrix[i-1] !== widthIdx) {\n\t\t\t\twidthIdx++;\n\t\t\t} else {\n\t\t\t\t// If the previous position has the same value as the current one, we need to determine\n\t\t\t\t// if the fragmentation bit pattern imposes a \"cut\".\n\t\t\t\tconst cutMarker = 1<<(state.gridcolumns-state.featuresize-frgIdx);\n\t\t\t\t// If there is a 1 at this position, make a cut aka increase the number.\n\t\t\t\tif ((cutMarker & state.fragmentation) === cutMarker) {\n\t\t\t\t\twidthIdx++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twidthMatrix[i] = widthIdx;\n\t\t}\n\t}\n\n\tdebug ? console.log( \"The width matrix: \".padEnd(45,' ') + widthMatrix) : false;\n\n\t/*\n\t2. Calculate the image weight matrix.\n\t   We will spread the image weight range left-to-right. Each column will consume the range according to its width.\n\t   Even it is a bidimensional matrix, for now we will only generate one row and copy it.\n   */\n\tfor (i=1; i <= state.gridcolumns; i++) {\n\t\t// Determine the other end of the current column.\n\t\tlet end=i;\n\t\twhile (widthMatrix[end+1] === widthMatrix[i]) {\n\t\t\tend++;\n\t\t}\n\n\t\t// Now calculate.\n\t\tif (i === 1) {\n\t\t\timageWeightMatrix[1][i] = state.imageweightleft;\n\t\t} else if (end === state.gridcolumns) {\n\t\t\timageWeightMatrix[1][i] = state.imageweightright;\n\t\t} else {\n\t\t\timageWeightMatrix[1][i] = Math.round(state.imageweightleft - ((state.imageweightleft - state.imageweightright) * (i + end - 1) / (2 * state.gridcolumns)));\n\t\t}\n\n\t\t// Fill the entire column with the same meta-details value.\n\t\tfor (j=i; j <= end; j++) {\n\t\t\timageWeightMatrix[1][j] = imageWeightMatrix[1][i];\n\t\t}\n\t\ti=end;\n\t}\n\t// Copy the first row to all of the rest.\n\tfor (i=2; i <= state.gridrows; i++) {\n\t\timageWeightMatrix[i] = imageWeightMatrix[1].slice(); // .slice() creates a copy of the array, not reference.\n\t}\n\n\tdebug ? console.log( \"The image weight matrix: \".padEnd(45,' ') + imageWeightMatrix[1]) : false;\n\n\t/*\n\t3. Calculate the meta-details matrix.\n\t   We will spread the meta-details range left-to-right. Each column will consume the range according to its width.\n\t   Even it is a bidimensional matrix, for now we will only generate one row and copy it.\n\t */\n\tfor (i=1; i <= state.gridcolumns; i++) {\n\t\t// Determine the other end of the current column.\n\t\tlet end=i;\n\t\twhile (widthMatrix[end+1] === widthMatrix[i]) {\n\t\t\tend++;\n\t\t}\n\n\t\t// Now calculate.\n\t\tif (i === 1) {\n\t\t\tmetaDetailsMatrix[1][i] = state.metadetailsleft;\n\t\t} else if (end === state.gridcolumns) {\n\t\t\tmetaDetailsMatrix[1][i] = state.metadetailsright;\n\t\t} else {\n\t\t\tmetaDetailsMatrix[1][i] = state.metadetailsleft - ((state.metadetailsleft - state.metadetailsright) * (i + end - 1) / (2 * state.gridcolumns));\n\n\t\t\t// If we are instructed to balance MD with IW, we will multiply the MD value with the \"distance\" of the IW value from the \"center\" of the IW range.\n\t\t\tif (state.balancemdandiw && 0 !== state.imageweightleft - state.imageweightright) {\n\t\t\t\tmetaDetailsMatrix[1][i] = metaDetailsMatrix[1][i] * (Math.abs(state.imageweightleft - state.imageweightright) / 2 / imageWeightMatrix[1][i]);\n\t\t\t}\n\n\t\t\tmetaDetailsMatrix[1][i] = Math.round( metaDetailsMatrix[1][i] );\n\t\t}\n\n\t\t// Fill the entire column with the same meta-details value.\n\t\tfor (j=i; j <= end; j++) {\n\t\t\tmetaDetailsMatrix[1][j] = metaDetailsMatrix[1][i];\n\t\t}\n\t\ti=end;\n\t}\n\t// Copy the first row to all of the rest.\n\tfor (i=2; i <= state.gridrows; i++) {\n\t\tmetaDetailsMatrix[i] = metaDetailsMatrix[1].slice(); // .slice() creates a copy of the array, not reference.\n\t}\n\n\tdebug ? console.log( \"The meta-details matrix: \".padEnd(45,' ') + metaDetailsMatrix[1]) : false;\n\n\t/*\n\t4. Handle the boost feature emphasis.\n\t   We will assign the maximum meta-details and image weight value to the feature, and assign its current value to the column holding the maximum values.\n\t*/\n\tif (state.boostfeature && state.featuresize > 0) {\n\t\t// Find column with maximum meta-details value, if the feature isn't already at the max.\n\t\tlet maxMetaDetailsPos = 1,\n\t\t\tmaxImageWeightPos = 1;\n\t\tfor (i = 1; i <= state.gridcolumns; i++) {\n\t\t\tif (metaDetailsMatrix[1][i] > metaDetailsMatrix[1][maxMetaDetailsPos]) {\n\t\t\t\tmaxMetaDetailsPos = i;\n\t\t\t}\n\n\t\t\tif (imageWeightMatrix[1][i] > imageWeightMatrix[1][maxImageWeightPos]) {\n\t\t\t\tmaxImageWeightPos = i;\n\t\t\t}\n\t\t}\n\n\t\tif (maxMetaDetailsPos !== state.featureposition) {\n\t\t\t// We have something to switch.\n\t\t\tlet featureValue = metaDetailsMatrix[1][state.featureposition];\n\t\t\tlet maxValue = metaDetailsMatrix[1][maxMetaDetailsPos];\n\n\t\t\t// Go and fill each column with the switched values.\n\t\t\ti = maxMetaDetailsPos;\n\t\t\twhile (widthMatrix[i] === widthMatrix[maxMetaDetailsPos]) {\n\t\t\t\tmetaDetailsMatrix[1][i] = featureValue;\n\t\t\t\ti++;\n\t\t\t}\n\t\t\ti = state.featureposition;\n\t\t\twhile (widthMatrix[i] === widthMatrix[state.featureposition]) {\n\t\t\t\tmetaDetailsMatrix[1][i] = maxValue;\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\t// Copy the first row to all of the rest.\n\t\t\tfor (i=2; i <= state.gridrows; i++) {\n\t\t\t\tmetaDetailsMatrix[i] = metaDetailsMatrix[1].slice(); // .slice() creates a copy of the array, not reference.\n\t\t\t}\n\n\t\t\tdebug ? console.log( \"The boosted feature meta-details matrix: \".padEnd(45,' ') + metaDetailsMatrix[1]) : false;\n\t\t}\n\n\t\tif (maxImageWeightPos !== state.featureposition) {\n\t\t\t// We have something to switch.\n\t\t\tlet featureValue = imageWeightMatrix[1][state.featureposition];\n\t\t\tlet maxValue = imageWeightMatrix[1][maxImageWeightPos];\n\n\t\t\t// Go and fill each column with the switched values.\n\t\t\ti = maxImageWeightPos;\n\t\t\twhile (widthMatrix[i] === widthMatrix[maxImageWeightPos]) {\n\t\t\t\timageWeightMatrix[1][i] = featureValue;\n\t\t\t\ti++;\n\t\t\t}\n\t\t\ti = state.featureposition;\n\t\t\twhile (widthMatrix[i] === widthMatrix[state.featureposition]) {\n\t\t\t\timageWeightMatrix[1][i] = maxValue;\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\t// Copy the first row to all of the rest.\n\t\t\tfor (i=2; i <= state.gridrows; i++) {\n\t\t\t\timageWeightMatrix[i] = imageWeightMatrix[1].slice(); // .slice() creates a copy of the array, not reference.\n\t\t\t}\n\n\t\t\tdebug ? console.log( \"The boosted feature image weight matrix: \".padEnd(45,' ') + imageWeightMatrix[1]) : false;\n\t\t}\n\t}\n\n\t/*\n\t5. Determine the vertical fragment size matrix.\n\t   The fragment size will range in the number of grid rows and 1.\n\t*/\n\t// First determine the max meta-details and image weight value.\n\tlet maxMetaDetailsValue = metaDetailsMatrix[1][1],\n\t\tmaxImageWeightValue = imageWeightMatrix[1][1];\n\tfor (i = 1; i <= state.gridcolumns; i++) {\n\t\tif (metaDetailsMatrix[1][i] > maxMetaDetailsValue) {\n\t\t\tmaxMetaDetailsValue = metaDetailsMatrix[1][i];\n\t\t}\n\n\t\tif (imageWeightMatrix[1][i] > maxImageWeightValue) {\n\t\t\tmaxImageWeightValue = imageWeightMatrix[1][i];\n\t\t}\n\t}\n\n\t// For the purpose of these calculations, maxMetaDetailsValue and maxImageWeightValue can't be zero.\n\tif (maxImageWeightValue < 1) {\n\t\tmaxImageWeightValue = 1;\n\t}\n\tif (maxMetaDetailsValue < 1) {\n\t\tmaxMetaDetailsValue = 1;\n\t}\n\n\tfor (i=1; i <= state.gridcolumns; i++) {\n\t\t// Determine the other end of the current column.\n\t\tlet end=i;\n\t\twhile (widthMatrix[end+1] === widthMatrix[i]) {\n\t\t\tend++;\n\t\t}\n\n\t\t// Now calculate.\n\t\tverticalFragmentSizeMatrix[i] = Math.round((((metaDetailsMatrix[1][i] / maxMetaDetailsValue) + (imageWeightMatrix[1][i] / maxImageWeightValue)) / 2) * state.gridrows);\n\t\t// The vertical fragment size can't be more than 3 times the column width (a really tall post).\n\t\tif (verticalFragmentSizeMatrix[i] > (end - i + 1) * 3) {\n\t\t\tverticalFragmentSizeMatrix[i] = (end - i + 1) * 3;\n\t\t}\n\t\t// Also the vertical fragment size can't be less than 1.\n\t\tif (verticalFragmentSizeMatrix[i] < 1) {\n\t\t\tverticalFragmentSizeMatrix[i] = 1;\n\t\t}\n\n\t\t// If the sub feature option is active, and we have a single column for the feature, reduce the vertical fragmentation with 25%.\n\t\tif (state.subfeature && i === state.featureposition && state.featuresize > 0 && verticalFragmentSizeMatrix[i] === state.gridrows) {\n\t\t\tverticalFragmentSizeMatrix[i] = Math.floor(verticalFragmentSizeMatrix[i] * 0.75);\n\t\t}\n\n\t\t// Safety measures.\n\t\tif (verticalFragmentSizeMatrix[i] < 1) {\n\t\t\tverticalFragmentSizeMatrix[i] = 1;\n\t\t} else if (verticalFragmentSizeMatrix[i] > state.gridrows) {\n\t\t\tverticalFragmentSizeMatrix[i] = state.gridrows;\n\t\t}\n\n\t\t// Fill the entire column with the same fragment size.\n\t\tfor (j = i; j <= end; j++) {\n\t\t\tverticalFragmentSizeMatrix[j] = verticalFragmentSizeMatrix[i];\n\t\t}\n\t\ti=end;\n\t}\n\n\tdebug ? console.log( \"The vertical fragment size matrix: \".padEnd(45,' ') + verticalFragmentSizeMatrix) : false;\n\n\t/*\n\t6. Determine the nth bidimensional matrix.\n\t   Each grid cell will be filled with the nth post that cell belongs to. From this matrix we can determine the post grid coordinates,\n\t   its aspect ratio, area, etc.\n\t*/\n\n\t// We start with the first post in the list.\n\tlet currentNth = 1;\n\n\t// Start with the feature column.\n\tif (state.featuresize > 0) {\n\t\ti = 1;\n\t\twhile (i <= verticalFragmentSizeMatrix[state.featureposition]) {\n\t\t\tj = state.featureposition;\n\t\t\tdo {\n\t\t\t\tnthMatrix[i][j] = currentNth;\n\t\t\t\tj++;\n\t\t\t} while (widthMatrix[state.featureposition] === widthMatrix[j])\n\n\t\t\ti++;\n\t\t}\n\n\t\tcurrentNth++;\n\n\t\tif (i <= state.gridrows) {\n\t\t\t// We have room under the feature for a secondary feature post.\n\t\t\t// We will reduce the meta-details and image weight by 33% that of the main feature post.\n\t\t\twhile (i <= state.gridrows) {\n\t\t\t\tj = state.featureposition;\n\t\t\t\tdo {\n\t\t\t\t\tnthMatrix[i][j] = currentNth;\n\n\t\t\t\t\t// Adjust the meta-details and image weight.\n\t\t\t\t\tmetaDetailsMatrix[i][j] = Math.round(metaDetailsMatrix[i][j] * 0.66);\n\t\t\t\t\timageWeightMatrix[i][j] = Math.round(imageWeightMatrix[i][j] * 0.66);\n\n\t\t\t\t\tj++;\n\t\t\t\t} while (widthMatrix[state.featureposition] === widthMatrix[j])\n\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\tcurrentNth++;\n\t\t}\n\t}\n\n\t// Now start from the left top corner and go through each column, left to right.\n\tlet currentColumnStartCol = 1;\n\tlet currentPostStartRow;\n\twhile (currentColumnStartCol <= state.gridcolumns) {\n\t\tif (nthMatrix[1][currentColumnStartCol] !== emptyChar) {\n\t\t\tcurrentColumnStartCol++;\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Fill the current column with posts.\n\t\tcurrentPostStartRow = 1;\n\t\twhile (currentPostStartRow <= state.gridrows) {\n\t\t\ti = currentPostStartRow;\n\t\t\twhile (i <= currentPostStartRow + verticalFragmentSizeMatrix[currentColumnStartCol] - 1 && i <= state.gridrows) {\n\t\t\t\tj = currentColumnStartCol;\n\t\t\t\tdo {\n\t\t\t\t\tnthMatrix[i][j] = currentNth;\n\t\t\t\t\tj++;\n\t\t\t\t} while (widthMatrix[currentColumnStartCol] === widthMatrix[j])\n\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tcurrentNth++;\n\t\t\tcurrentPostStartRow = i;\n\t\t}\n\t}\n\n\tif (debug) {\n\t\tconsole.log(\"\\nThe nth matrix: \".padEnd(42, ' ') + '0 - ' + nthMatrix[0].join(' '));\n\t\tfor (i = 1; i < nthMatrix.length; i++) {\n\t\t\tconsole.log(' '.padEnd(41, ' ') + i + ' - ' + nthMatrix[i].join(' '));\n\t\t}\n\t}\n\n\t/*\n\t7. Handle the hierarchy crossing.\n\t   We will not cross into the feature post. We will only cross left to right, only \"over\" a post with a lower nth count.\n\t   We will only cross if the left post matches in height a post or more on the right.\n\t   The rate of consumption is related to the nth, area, IW and MD of the post being expanded and the post(s) being replaced.\n\t   Also, crossing at the top of the layout is more expensive than crossing at a lower row.\n\t*/\n\n\t// We start with the first post in the list.\n\tlet maxNth = currentNth;\n\tlet hierachyCrossingStrenth = state.hierarchycrossing;\n\n\tcurrentNth = 1;\n\n\twhile (hierachyCrossingStrenth > 0 && currentNth <= maxNth) {\n\t\tlet currentPostDetails = getNthPostDetails(currentNth, nthMatrix, metaDetailsMatrix, imageWeightMatrix);\n\t\tif (false === currentPostDetails) {\n\t\t\tcurrentNth++;\n\t\t\tcontinue;\n\t\t}\n\n\t\t// If the current post is all the way to the right edge, stop.\n\t\tif (currentPostDetails.endGridColumn === state.gridcolumns) {\n\t\t\tbreak;\n\t\t}\n\n\t\t// Now identify its right-side neighbors.\n\t\tlet topNeighborPostDetails = getNthPostDetails(nthMatrix[currentPostDetails.startGridRow][currentPostDetails.endGridColumn+1], nthMatrix, metaDetailsMatrix, imageWeightMatrix);\n\t\tlet bottomNeighborPostDetails = getNthPostDetails(nthMatrix[currentPostDetails.endGridRow][currentPostDetails.endGridColumn+1], nthMatrix, metaDetailsMatrix, imageWeightMatrix);\n\t\t// If the neighbors don't match the height in rows of the current post, skip this post from crossing.\n\t\tif (topNeighborPostDetails.startGridRow !== currentPostDetails.startGridRow || bottomNeighborPostDetails.endGridRow !== currentPostDetails.endGridRow) {\n\t\t\tcurrentNth++;\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Calculate the score of the to-be replaced post(s).\n\t\t// Each post's score correlated to its nth value. The lower the nth value the bigger the score boost.\n\t\tlet replacedPostScore = (maxNth / topNeighborPostDetails.nth) * (topNeighborPostDetails.area + topNeighborPostDetails.imageWeight + topNeighborPostDetails.metaDetails);\n\t\tif (bottomNeighborPostDetails.nth !== topNeighborPostDetails.nth) {\n\t\t\tlet counter = 1;\n\t\t\tfor (i = topNeighborPostDetails.nth+1; i <= bottomNeighborPostDetails.nth; i++) {\n\t\t\t\tconst postDetails = getNthPostDetails(i, nthMatrix, metaDetailsMatrix, imageWeightMatrix);\n\t\t\t\tif (false === postDetails) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tcounter++;\n\t\t\t\t// It is increasingly \"harder\" to replace multiple posts.\n\t\t\t\treplacedPostScore += (maxNth / postDetails.nth) * (postDetails.area + postDetails.imageWeight + postDetails.metaDetails * counter) * counter;\n\t\t\t}\n\t\t}\n\n\t\t// If the to-be replaced post(s) score is larger than the remaining hierarchy crossing strength, nothing to do.\n\t\tif (hierachyCrossingStrenth < replacedPostScore) {\n\t\t\tcurrentNth++;\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet currentPostScore = (maxNth / currentPostDetails.nth) * (currentPostDetails.area + currentPostDetails.imageWeight + currentPostDetails.metaDetails) * Math.pow(2*hierachyCrossingStrenth/50, 3);\n\t\t// If the current post score is bigger than the to-be replaced post(s) score, it's a go.\n\t\tif (currentPostScore > replacedPostScore) {\n\t\t\t// Expand the current post over the replaced ones.\n\t\t\tfor (i = topNeighborPostDetails.startGridRow; i <= bottomNeighborPostDetails.endGridRow; i++) {\n\t\t\t\tfor (j = topNeighborPostDetails.startGridColumn; j <= topNeighborPostDetails.endGridColumn; j++) {\n\t\t\t\t\tnthMatrix[i][j] = currentNth;\n\n\t\t\t\t\t// Also replace the image weight and meta-details.\n\t\t\t\t\timageWeightMatrix[i][j] = currentPostDetails.imageWeight;\n\t\t\t\t\tmetaDetailsMatrix[i][j] = currentPostDetails.metaDetails;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Decrease the crossing strength.\n\t\t\thierachyCrossingStrenth -= replacedPostScore;\n\n\t\t\t// We now have a gap in the post list. We need to renumber the posts after the replaced ones and adjust the maxnth.\n\t\t\t// The image weight and meta-details remain unchanged.\n\t\t\t// Work with the new maxNth.\n\t\t\tmaxNth = renumberNthMatrix(nthMatrix);\n\t\t}\n\n\t\tcurrentNth++;\n\t}\n\n\t// Transpose all matrices if flipcolssrows attribute is set to true\n\tconst finalNthMatrix = ! state.flipcolsrows ? nthMatrix : transposeMatrix( nthMatrix );\n\tconst finalMetaMatrix = ! state.flipcolsrows ? metaDetailsMatrix : transposeMatrix( metaDetailsMatrix );\n\tconst finalImageMatrix = ! state.flipcolsrows ? imageWeightMatrix : transposeMatrix( imageWeightMatrix );\n\n\t/*\n\t8. Finally, generate the posts list.\n\t*/\n\tconst areaColumns = getGroupedPostAreas( state, finalNthMatrix, finalMetaMatrix, finalImageMatrix );;\n\tmoveLargestColumnToStart( areaColumns );\n\n\treturn areaColumns;\n};\n\nconst moveLargestColumnToStart = ( areaColumns ) => {\n\tconst firstRowColumns = areaColumns.filter( column => column.row === 1 )\n\t                                   .sort( ( col1, col2 ) => col2.width - col1.width );\n\tconst largestColumnIndex = areaColumns.findIndex( column => column === firstRowColumns[0] );\n\tareaColumns.splice(0, 0, areaColumns.splice(largestColumnIndex, 1)[0]);\n\n\treturn areaColumns;\n};\n\nconst logMatrix = ( matrix ) =>{\n\tfor (let i = 0; i < matrix.length; i++) {\n\t\tconsole.log(' '.padEnd(41, ' ') + i + ' - ' + matrix[i].join(' '));\n\t}\n};\n\nfunction getGroupedPostAreas( state, nthMatrix, metaDetailsMatrix, imageWeightMatrix ) {\n\tlet areasArray = getAreasArray( nthMatrix, metaDetailsMatrix, imageWeightMatrix );\n\n\tmergeSimilarAreas( nthMatrix, metaDetailsMatrix, imageWeightMatrix, areasArray, state );\n\tareasArray = normalizeAreas( nthMatrix, areasArray );\n\tareasArray = areasArray.map( area => {\n\t\treturn {\n\t\t\tinitialPostsCount: area.postsCount,\n\t\t\t...area\n\t\t}\n\t} );\n\n\tlet columns = areasArray.map( area => {\n\t\treturn {\n\t\t\trow: area.row,\n\t\t\tcol: area.col,\n\t\t\twidth: area.width,\n\t\t\theight: area.height,\n\t\t\tareas: [ area ]\n\t\t}\n\t} );\n\n\t// loop through columns\n\tcolumns.forEach( currentColumn => {\n\t\t// loop through \"current\" column's areas\n\t\tcurrentColumn.areas.forEach( ( currentArea, i ) => {\n\t\t\t// loop again through columns except the current column\n\t\t\tcolumns.filter( column => column !== currentColumn ).forEach( compareColumn => {\n\t\t\t\t// loop through the \"compare\" column's areas\n\t\t\t\tcompareColumn.areas.forEach( ( compareArea, j ) => {\n\t\t\t\t\t// check if the areas have the same column and the same width\n\t\t\t\t\tif ( ! compareArea.merged &&\n\t\t\t\t\t     currentArea.col === compareArea.col &&\n\t\t\t\t\t     currentArea.width === compareArea.width &&\n\t\t\t\t\t     // and if the two areas are continuous\n\t\t\t\t\t     ( currentArea.row + currentArea.height === compareArea.row || currentArea.row === compareArea.row + compareArea.height ) ) {\n\t\t\t\t\t\t// if so, move the compared area to the current column's areas array and update the column height\n\t\t\t\t\t\tcompareArea.merged = true;\n\t\t\t\t\t\tcurrentColumn.areas.push( compareArea );\n\t\t\t\t\t\tcurrentColumn.height += compareArea.height;\n\t\t\t\t\t\tcompareColumn.areas.splice( j, 1 );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t} )\n\t} );\n\n\treturn columns.filter( randomColumn => randomColumn.areas.length > 0 );\n}\n\nfunction getNthValues( nthMatrix ) {\n\tlet values = [];\n\tlet value;\n\n\tfor ( let i = 1; i < nthMatrix.length - 1; i ++ ) {\n\t\tfor ( let j = 1; j < nthMatrix[i].length - 1; j ++ ) {\n\t\t\tvalue = nthMatrix[i][j];\n\t\t\tif ( values.indexOf( value ) === -1 ) {\n\t\t\t\tvalues.push( value );\n\t\t\t}\n\t\t}\n\t}\n\n\treturn values;\n}\n\nfunction normalizeAreas( nthMatrix, areasArray ) {\n\tconst values = getNthValues( nthMatrix );\n\tvalues.sort( ( a, b ) => {\n\t\treturn a - b;\n\t} );\n\n\tfor ( let i = 0; i < values.length; i ++ ) {\n\t\tif ( i + 1 !== values[i] ) {\n\t\t\treplaceNth( values[i], i + 1, nthMatrix );\n\t\t}\n\t}\n\n\treturn values.map( ( nth, index ) => {\n\t\tconst area = areasArray.find( area => area.nth === nth );\n\t\tarea.nth = index + 1;\n\t\treturn area;\n\t} );\n}\n\nfunction replaceNth( nth1, nth2, nthMatrix ) {\n\tfor ( let i = 1; i < nthMatrix.length - 1; i ++ ) {\n\t\tfor ( let j = 1; j < nthMatrix[i].length - 1; j ++ ) {\n\t\t\tif ( nthMatrix[i][j] === nth1 ) {\n\t\t\t\tnthMatrix[i][j] = nth2;\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst mergeSimilarAreas = ( nthMatrix, metaDetailsMatrix, imageWeightMatrix, areasArray, state ) => {\n\tlet currentPostDetails;\n\n\tfor ( let currentNth = 1; currentNth <= getMaxNth( nthMatrix ); currentNth++  ) {\n\t\tcurrentPostDetails = getNthPostDetails( currentNth, nthMatrix, metaDetailsMatrix, imageWeightMatrix );\n\t\tif ( currentPostDetails ) {\n\t\t\tmergeAreaNeighbours( currentPostDetails.startGridRow, currentPostDetails.startGridColumn, nthMatrix, metaDetailsMatrix, imageWeightMatrix, areasArray, state );\n\t\t}\n\t}\n};\n\nconst mergeAreaNeighbours = ( row, col, nthMatrix, metaDetailsMatrix, imageWeightMatrix, areasArray, state ) => {\n\tlet nth = nthMatrix[row][col];\n\tlet width = getAreaWidth( nth, nthMatrix );\n\tlet height = getAreaHeight( nth, nthMatrix );\n\tlet initialWidth = width;\n\tlet initialHeight = height;\n\tlet currentAreaIndex = -1;\n\n\tif ( Array.isArray( areasArray ) ) {\n\t\tcurrentAreaIndex = areasArray.findIndex( area => {\n\t\t\treturn area.nth === nthMatrix[row][col];\n\t\t} )\n\t}\n\n\t// Featured area should not be merged\n\tif ( nth === 1 ) {\n\t\treturn;\n\t}\n\n\tlet nextRow,\n\t\tnextCol,\n\t\tnextWidth,\n\t\tnextHeight,\n\t\tnextNth,\n\t\tnextNthStart,\n\t\tsearching = true,\n\t\tmergeable = false;\n\n\twhile ( searching ) {\n\t\tnextNth = nthMatrix[row + height][col];\n\t\tnextNthStart = getFirstOccurence( nextNth, nthMatrix );\n\t\tnextRow = nextNthStart.row;\n\t\tnextCol = nextNthStart.col;\n\n\t\tnextWidth = getAreaWidth( nextNth, nthMatrix );\n\t\tnextHeight = getAreaHeight( nextNth, nthMatrix );\n\n\t\tif ( width === nextWidth &&\n\t\t     col === nextCol &&\n\t\t     Math.abs( initialHeight - nextHeight ) <= 1 &&\n\t\t     Math.abs( metaDetailsMatrix[row][col] - metaDetailsMatrix[nextRow][col] ) <= 1 &&\n\t\t     Math.abs( imageWeightMatrix[row][col] - imageWeightMatrix[nextRow][col] ) <= 1 ) {\n\t\t\theight = height + nextHeight;\n\n\t\t\tmergeable = true;\n\n\t\t\tif ( currentAreaIndex > -1 ) {\n\t\t\t\tareasArray[currentAreaIndex].postsCount += 1;\n\t\t\t\tareasArray[currentAreaIndex].height = height;\n\t\t\t}\n\t\t} else {\n\t\t\tsearching = false;\n\t\t}\n\t}\n\n\tsearching = ! mergeable;\n\n\twhile ( searching && ! state.flipcolsrows ) {\n\t\tnextNth = nthMatrix[row][col + width];\n\t\tnextNthStart = getFirstOccurence( nextNth, nthMatrix );\n\t\tnextRow = nextNthStart.row;\n\t\tnextCol = nextNthStart.col;\n\n\t\tnextWidth = getAreaWidth( nextNth, nthMatrix );\n\t\tnextHeight = getAreaHeight( nextNth, nthMatrix );\n\n\t\tif ( height === nextHeight &&\n\t\t     row === nextRow &&\n\t\t     Math.abs( initialWidth - nextWidth ) <= 1 &&\n\t\t     Math.abs( metaDetailsMatrix[row][col] - metaDetailsMatrix[row][nextCol] ) <= 1 &&\n\t\t     Math.abs( imageWeightMatrix[row][col] - imageWeightMatrix[row][nextCol] ) <= 1 ) {\n\t\t\twidth = width + nextWidth;\n\n\t\t\tmergeable = true;\n\n\t\t\tif ( currentAreaIndex > -1 ) {\n\t\t\t\tareasArray[currentAreaIndex].postsCount += 1;\n\t\t\t\tareasArray[currentAreaIndex].width = width;\n\t\t\t}\n\t\t} else {\n\t\t\tsearching = false;\n\t\t}\n\t}\n\n\tfillArea( nthMatrix, row, col, width, height );\n};\n\nconst fillArea = ( nthMatrix, row, col, width, height ) => {\n\tfor (let i = row; i < row + height; i++) {\n\t\tfor (let j = col; j < col + width; j++) {\n\t\t\tnthMatrix[i][j] = nthMatrix[row][col];\n\t\t}\n\t}\n};\n\nconst getFirstOccurence = ( nth, nthMatrix ) => {\n\tfor ( let i = 0; i < nthMatrix.length; i++ ) {\n\t\tfor ( let j = 0; j < nthMatrix[i].length; j++ ) {\n\t\t\tif ( nthMatrix[i][j] === nth ) {\n\t\t\t\treturn {\n\t\t\t\t\trow: i,\n\t\t\t\t\tcol: j,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\treturn {};\n};\n\nconst getAreaWidth = ( nth, nthMatrix ) => {\n\tconst { row, col } = getFirstOccurence( nth, nthMatrix );\n\tlet width = 1;\n\n\twhile ( nth === nthMatrix[row][col + width] ) {\n\t\twidth = width + 1;\n\t}\n\n\treturn width;\n};\n\n\n\nconst getAreaHeight = ( nth, nthMatrix ) => {\n\tconst { row, col } = getFirstOccurence( nth, nthMatrix );\n\tlet height = 1;\n\n\twhile ( \"undefined\" !== typeof nthMatrix[row + height] && nth === nthMatrix[row + height][col] ) {\n\t\theight = height + 1;\n\t}\n\n\treturn height;\n};\n\nconst renumberNthMatrix = (nthMatrix) => {\n\tlet newNth = 1;\n\tlet postDetails;\n\n\tfor (let nth = 1; nth <= getMaxNth(nthMatrix); nth++) {\n\t\t// If we can't find a nth post, it means it was removed and we need to adjust.\n\t\tpostDetails = getNthPostDetails(nth, nthMatrix);\n\t\tif (false === postDetails) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (postDetails.nth > newNth) {\n\t\t\t// Change the current post's nth.\n\t\t\tfor (let i = postDetails.startGridRow; i <= postDetails.endGridRow; i++) {\n\t\t\t\tfor (let j = postDetails.startGridColumn; j <= postDetails.endGridColumn; j++) {\n\t\t\t\t\tnthMatrix[i][j] = newNth;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tnewNth++;\n\t}\n\n\t// Return the maxNth.\n\treturn newNth - 1;\n}\n\nconst getMaxNth = (nthMatrix) => {\n\tlet maxNth = 0;\n\tfor (let i = 1; i < nthMatrix.length; i++) {\n\t\tfor (let j = 1; j < nthMatrix[i].length; j++) {\n\t\t\tif (nthMatrix[i][j] > maxNth) {\n\t\t\t\tmaxNth = nthMatrix[i][j];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn maxNth;\n}\n\nconst getAreasArray = ( nthMatrix, metaDetailsMatrix, imageWeightMatrix ) => {\n\n\tlet currentPostDetails;\n\tlet areasArray = [];\n\n\tfor ( let currentNth = 1; currentNth <= getMaxNth( nthMatrix ); currentNth++  ) {\n\t\tcurrentPostDetails = getNthPostDetails( currentNth, nthMatrix, metaDetailsMatrix, imageWeightMatrix );\n\n\t\tif ( currentPostDetails ) {\n\n\t\t\tareasArray.push( {\n\t\t\t\tnth: currentPostDetails.nth,\n\t\t\t\tcol: currentPostDetails.startGridColumn,\n\t\t\t\trow: currentPostDetails.startGridRow,\n\t\t\t\twidth: currentPostDetails.endGridColumn - currentPostDetails.startGridColumn + 1,\n\t\t\t\theight: currentPostDetails.endGridRow - currentPostDetails.startGridRow + 1,\n\t\t\t\tmetaDetails: currentPostDetails.metaDetails,\n\t\t\t\timageWeight: currentPostDetails.imageWeight,\n\t\t\t\tpostsCount: 1,\n\t\t\t} )\n\t\t}\n\t}\n\n\treturn areasArray;\n};\n\nconst getNthPostDetails = (nth, nthMatrix, metaDetailsMatrix = false, imageWeightMatrix = false) => {\n\tlet postDetails = false;\n\n\t// Go through the nthMatrix and search for the currentNth value.\n\tfor (let i = 1; i < nthMatrix.length; i++) {\n\t\tfor (let j = 1; j < nthMatrix[i].length; j++) {\n\t\t\tif (nthMatrix[i][j] === nth) {\n\t\t\t\t// Found the left top corner.\n\t\t\t\tpostDetails = {\n\t\t\t\t\t'nth': nth,\n\t\t\t\t\t'startGridColumn': j,\n\t\t\t\t\t'startGridRow': i,\n\t\t\t\t\t'endGridColumn': j,\n\t\t\t\t\t'endGridRow': i,\n\t\t\t\t\t'metaDetails': metaDetailsMatrix ? metaDetailsMatrix[i][j] : false,\n\t\t\t\t\t'imageWeight': imageWeightMatrix ? imageWeightMatrix[i][j] :false,\n\t\t\t\t\t'area': 1,\n\t\t\t\t};\n\n\t\t\t\t// Find the right bottom corner.\n\t\t\t\twhile (j < nthMatrix[i].length && nthMatrix[i][j] === nthMatrix[i][j+1]) {\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\tpostDetails.endGridColumn = j;\n\t\t\t\twhile (i < nthMatrix.length && nthMatrix[i][j] === nthMatrix[i+1][j]) {\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t\tpostDetails.endGridRow = i;\n\n\t\t\t\t// Calculate the area.\n\t\t\t\tpostDetails.area = (postDetails.endGridRow - postDetails.startGridRow + 1) * (postDetails.endGridColumn - postDetails.startGridColumn + 1);\n\n\t\t\t\treturn postDetails;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn postDetails;\n}\n\nconst initUnidimensionalMatrix = (matrix, length, character = \"X\") => {\n\t// The 0 index will be filled with a different character for easier logic.\n\tmatrix.push(\"/\");\n\n\t// Go to equal the length, since the 0 index will be ignored.\n\t// Fill with \"null\" entries with the provided character.\n\tfor (let i = 1; i <= length; i++) {\n\t\tmatrix.push(character);\n\t}\n\n\t// Put an extra entry for easier logic.\n\tmatrix.push(\"/\");\n\n\treturn matrix;\n}\n\nconst initBidimensionalMatrix = (matrix, width, height, nullChar) => {\n\t// Put in a guard row, at index 0.\n\tmatrix.push(initUnidimensionalMatrix([], width, \"/\"));\n\n\t// Go to equal the width, since the 0 index will be ignored.\n\tfor (let i = 0; i < height; i++) {\n\t\tmatrix.push(initUnidimensionalMatrix([], width, nullChar));\n\t}\n\t// Put in an extra guard row.\n\tmatrix.push(initUnidimensionalMatrix([], width, \"/\"));\n\n\treturn matrix;\n}\n","import classnames from \"classnames\";\nimport { getCardMediaPaddingTop, debounce, below } from \"../../utils\";\nimport { applyLayoutEngine } from \"../../components/grid-generator/layoutEngine\";\nimport {\n\tgetAreaBaseClassname,\n\tgetAreaClassnameByAspectRatio,\n\tgetAreaClassnameByHeightRatio,\n\tgetAreaClassnameByWidthRatio,\n\tgetGridStyle,\n\tgetGridColumnsAndRows\n} from \"../../components/grid-generator/utils\";\n\nimport {\n\tredistributeCardsInAreas,\n\tisLandscape,\n} from \"../../components/grid-generator/utils\";\n\n(function($, window, undefined) {\n\n\tconst defaultBlockWidth = 1152; // magic\n\n\t$( '.novablocks-grid' ).each( function( i, block ) {\n\t\tconst $grid = $( block );\n\t\tconst $block = $grid.closest( '.novablocks-block' );\n\t\tconst $cards = $grid.closest( '.novablocks-collection__cards' );\n\t\tconst $posts = $grid.children( '.novablocks-card' );\n\t\tconst attributes = $grid.data();\n\t\tconst cardsCount = $posts.length;\n\n\t\tlet addedCards;\n\n\t\tblock.style.setProperty( '--card-media-padding', attributes.imagepadding );\n\t\tblock.style.setProperty( '--card-media-padding-top', getCardMediaPaddingTop( attributes.thumbnailaspectratio ) );\n\t\tblock.style.setProperty( '--card-media-object-fit', attributes.imageresizing === 'cropped' ? 'cover' : 'scale-down' );\n\n\t\tif ( attributes.layoutstyle !== 'parametric' ) {\n\t\t\t$grid.removeClass( 'novablocks-grid' );\n\t\t\t$grid.addClass( 'novablocks-collection__layout' );\n\t\t\t$grid.addClass( `novablocks-grid__area--${ attributes.islandscape ? 'landscape' : 'portrait' }` );\n\t\t\t$grid.addClass( getAreaClassnameByWidthRatio( 1 / attributes.columns ) );\n\t\t\treturn;\n\t\t}\n\n\t\tconst $title = $block.find( '.novablocks-collection__title' ).detach();\n\t\tconst $subtitle = $block.find( '.novablocks-collection__subtitle' ).detach();\n\n\t\tfunction createLayout() {\n\n\t\t\tlet blockWidth = $grid.outerWidth();\n\n\t\t\t$posts.detach();\n\t\t\t$grid.empty();\n\n\t\t\t$block.find( '.js-collection-element-clone' ).remove();\n\n\t\t\taddedCards = 0;\n\n\t\t\tlet areaColumns = applyLayoutEngine( attributes );\n\t\t\tlet columnsCount = areaColumns.length;\n\t\t\tlet firstSet = Math.floor( ( columnsCount - 1 ) / 2 );\n\t\t\tlet secondSet = columnsCount - 1 - firstSet;\n\n\t\t\tif ( below( 'lap' ) ) {\n\n\t\t\t\tfor ( let i = 0; i < firstSet; i++ ) {\n\t\t\t\t\tremoveSmallestColumn( areaColumns );\n\t\t\t\t}\n\n\t\t\t\tif ( below( 'tablet' ) ) {\n\n\t\t\t\t\tfor ( let i = 0; i < secondSet; i++ ) {\n\t\t\t\t\t\tremoveSmallestColumn( areaColumns );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tredistributeCardsInAreas( areaColumns, cardsCount, attributes );\n\n\t\t\tlet gridcolumns = attributes.flipcolsrows ? attributes.gridrows : attributes.gridcolumns;\n\t\t\tlet gridrows = attributes.flipcolsrows ? attributes.gridcolumns : attributes.gridrows;\n\n\t\t\tlet maxcolumns = areaColumns.reduce( ( acc, column ) => {\n\t\t\t\treturn Math.max( acc, column.col + column.width - 1 );\n\t\t\t}, 0);\n\n\t\t\tlet maxrows = areaColumns.reduce( ( acc, column ) => {\n\t\t\t\treturn Math.max( acc, column.row + column.height - 1 );\n\t\t\t}, 0);\n\n\t\t\tgridcolumns = Math.min( gridcolumns, maxcolumns );\n\t\t\tgridrows = Math.min( gridrows, maxrows );\n\n\t\t\tconst compiledAttributes = Object.assign( {}, attributes, {\n\t\t\t\tgridcolumns: attributes.flipcolsrows ? gridrows : gridcolumns,\n\t\t\t\tgridrows: attributes.flipcolsrows ? gridcolumns : gridrows,\n\t\t\t} );\n\n\t\t\t$grid.css( getGridStyle( compiledAttributes ) );\n\n\t\t\tif ( below( 'lap' ) || attributes.headerposition === 0 ) {\n\t\t\t\t$title.clone().addClass( 'js-collection-element-clone' ).insertBefore( $cards );\n\t\t\t\t$subtitle.clone().addClass( 'js-collection-element-clone' ).insertBefore( $cards );\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < areaColumns.length; i++ ) {\n\t\t\t\tconst areaColumn = areaColumns[i];\n\t\t\t\tconst { areas, row, col, width, height } = areaColumn;\n\n\t\t\t\tconst $column = $( '<div class=\"novablocks-grid__column\">' );\n\t\t\t\t$column.css( 'grid-area', `${ row } / ${ col } / span ${ height } / span ${ width }` );\n\t\t\t\t$column.attr( 'data-area', `${ row } / ${ col } / span ${ height } / span ${ width }` );\n\n\t\t\t\tfor ( let j = 0; j < areas.length; j++ ) {\n\t\t\t\t\tconst area = areas[j];\n\t\t\t\t\tconst blockWidthRatio = Math.min( 1, blockWidth / defaultBlockWidth );\n\t\t\t\t\tconst areaClassName = getAreaClassname( area, attributes, blockWidthRatio );\n\n\t\t\t\t\taddedCards += area.postsCount;\n\n\t\t\t\t\tconst $area = $( `<div class=\"${ areaClassName }\">` );\n\n\t\t\t\t\tArray.from( Array( area.postsCount ).keys() ).map( i => {\n\t\t\t\t\t\tconst $gridItem = $( '<div class=\"novablocks-grid__item\">' );\n\t\t\t\t\t\tconst $card = $posts.eq( addedCards - area.postsCount + i );\n\t\t\t\t\t\tconst landscape = isLandscape( area, attributes );\n\n\t\t\t\t\t\t$card.toggleClass( 'novablocks-card--landscape', !! landscape );\n\t\t\t\t\t\t$card.toggleClass( 'novablocks-card--portrait', ! landscape );\n\n\t\t\t\t\t\t$card.appendTo( $gridItem );\n\n\t\t\t\t\t\tif ( ! below( 'lap' ) && attributes.headerposition === addedCards - area.postsCount + i + 1 ) {\n\t\t\t\t\t\t\tconst $header = $( '<div class=\"novablocks-grid__item js-collection-element-clone\">' );\n\t\t\t\t\t\t\t$title.clone().appendTo( $header );\n\t\t\t\t\t\t\t$subtitle.clone().appendTo( $header );\n\t\t\t\t\t\t\t$header.appendTo( $area );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$gridItem.appendTo( $area );\n\t\t\t\t\t} );\n\n\t\t\t\t\t$area.appendTo( $column );\n\t\t\t\t}\n\n\t\t\t\t$column.appendTo( $grid );\n\t\t\t}\n\t\t}\n\n\t\tcreateLayout();\n\n\t\tfunction recreateLayout() {\n\t\t\t$grid.contents().replaceWith( $posts );\n\n\t\t\t$grid.css( {\n\t\t\t\tdisplay: '',\n\t\t\t\tgridTemplateColumns: '',\n\t\t\t\tgridTemplateRowss: '',\n\t\t\t} );\n\n\t\t\t$posts.removeClass( 'novablocks-card--portrait' );\n\t\t\t$posts.removeClass( 'novablocks-card--landscape' );\n\n\t\t\tcreateLayout();\n\t\t}\n\n\t\tconst onResize = debounce( recreateLayout, 100 );\n\n\t\t$( window ).on( 'resize', onResize );\n\n\t} );\n\n\tfunction getAreaClassname( area, attributes, widthRatioMultiplier = 1 ) {\n\t\tconst { width, height } = area;\n\t\tconst { gridcolumns, gridrows } = getGridColumnsAndRows( attributes );\n\n\t\treturn classnames([\n\t\t\tgetAreaBaseClassname( area ),\n\t\t\tgetAreaClassnameByWidthRatio( widthRatioMultiplier * width / gridcolumns ),\n\t\t\tgetAreaClassnameByHeightRatio( height / gridrows ),\n\t\t\tgetAreaClassnameByAspectRatio( area, attributes )\n\t\t]);\n\n\t}\n\n\tfunction removeSmallestColumn( areaColumns ) {\n\n\t\tlet data = areaColumns.map( ( area, index ) => {\n\t\t\treturn {\n\t\t\t\tarea,\n\t\t\t\tindex,\n\t\t\t}\n\t\t} );\n\n\t\tdata.sort( ( obj1, obj2 ) => {\n\t\t\treturn obj1.area.width - obj2.area.width;\n\t\t} );\n\n\t\tlet indexToRemove = data[0].index;\n\n\t\tif ( data[0].area.nth === 1 ) {\n\t\t\tindexToRemove = data[data.length].index;\n\t\t}\n\n\t\tareaColumns.splice( indexToRemove, 1 );\n\n\t\tnormalizeColumns( areaColumns );\n\t}\n\n\tfunction normalizeColumns( areaColumns ) {\n\t\tmoveColumnsToLeft( areaColumns );\n\t\tmoveColumnsToTop( areaColumns );\n\t}\n\n\tfunction moveColumnsToLeft( areaColumns ) {\n\n\t\tareaColumns.forEach( areaColumn => {\n\t\t\tlet spaceLeft = 0;\n\t\t\tlet movingLeft = true;\n\n\t\t\twhile ( movingLeft ) {\n\n\t\t\t\tconst overlapLeft = areaColumns.filter( compareColumn => compareColumn !== areaColumn ).some( compareColumn => {\n\t\t\t\t\treturn ! ( areaColumn.col + areaColumn.width - 1 < compareColumn.col ||\n\t\t\t\t\t           areaColumn.row + areaColumn.height - 1 < compareColumn.row ||\n\t\t\t\t\t           areaColumn.row > compareColumn.row + compareColumn.height - 1 ||\n\t\t\t\t\t           areaColumn.col - ( spaceLeft + 1 ) > compareColumn.col + compareColumn.width - 1 );\n\t\t\t\t} );\n\n\t\t\t\tif ( overlapLeft || areaColumn.col - spaceLeft <= 1 ) {\n\t\t\t\t\tmovingLeft = false;\n\t\t\t\t} else {\n\t\t\t\t\tspaceLeft++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tareaColumn.col = areaColumn.col - spaceLeft;\n\t\t} );\n\t}\n\n\tfunction moveColumnsToTop( areaColumns ) {\n\n\t\tareaColumns.forEach( areaColumn => {\n\t\t\tlet spaceTop = 0;\n\t\t\tlet movingTop = true;\n\n\t\t\twhile ( movingTop ) {\n\n\t\t\t\tconst overlapTop = areaColumns.filter( compareColumn => compareColumn !== areaColumn ).some( compareColumn => {\n\t\t\t\t\treturn ! ( areaColumn.col + areaColumn.width - 1 < compareColumn.col ||\n\t\t\t\t\t           areaColumn.row + areaColumn.height - 1 < compareColumn.row ||\n\t\t\t\t\t           areaColumn.row - ( spaceTop + 1 ) > compareColumn.row + compareColumn.height - 1 ||\n\t\t\t\t\t           areaColumn.col > compareColumn.col + compareColumn.width - 1 );\n\t\t\t\t} );\n\n\t\t\t\tif ( overlapTop || areaColumn.row - spaceTop <= 1 ) {\n\t\t\t\t\tmovingTop = false;\n\t\t\t\t} else {\n\t\t\t\t\tspaceTop++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tareaColumn.row = areaColumn.row - spaceTop;\n\t\t} );\n\t}\n\n})(jQuery, window);\n","// Copyright 2014 Foursquare Labs Inc. All Rights Reserved.\n\nvar fourSq = fourSq || {};\nfourSq.util = fourSq.util || {}\n\nfourSq.util.Hours = {\n  /**\n   * Pads times to be HHMM\n   * @param {string} text\n   * @return {string}\n   */\n  padTimes: function(text) {\n    // Add leading/trailing zeros to times so it's always 4 digits, like 0800\n    // Have to run each twice because they're pivoting around the separator\n    // i.e. x10-12x first matches \"x10-\" and doesn't match the rest\n    text = text.replace(/([^0-9]|^)([0-9]{3})([^0-9]|$)/g, '$10$2$3');\n    text = text.replace(/([^0-9]|^)([0-9]{3})([^0-9]|$)/g, '$10$2$3');\n    text = text.replace(/([^0-9]|^)([0-9]{2})([^0-9]|$)/g, '$1$200$3');\n    text = text.replace(/([^0-9]|^)([0-9]{2})([^0-9]|$)/g, '$1$200$3');\n    text = text.replace(/([^0-9]|^)([0-9])([^0-9]|$)/g, '$10$200$3');\n    text = text.replace(/([^0-9]|^)([0-9])([^0-9]|$)/g, '$10$200$3');\n    return text;\n  },\n\n  /**\n   * @param {Array.<number>} days\n   * @param {number} startMinutes\n   * @param {number} endMinutes\n   */\n  toTimeframe: function(days, startMinutes, endMinutes) {\n    // If we've day wrapped and end before 4am, push the ending value up 24 hours.\n    if (startMinutes >= endMinutes && endMinutes <= 240) {\n      endMinutes += 1440;\n    }\n    var startFormatted = fourSq.util.Hours.formatMinutes(startMinutes);\n    var endFormatted = fourSq.util.Hours.formatMinutes(endMinutes);\n\n    return /** @type {fourSq.api.models.hours.MachineTimeframe} */ (({\n      days: days,\n      open: [(/** @type {fourSq.api.models.hours.MachineSegment} */({\n        start: startFormatted,\n        end: endFormatted\n      }))]\n    }));\n  },\n\n  /**\n   * @param {number} minutes after minute\n   * @return {string} the hhmm format that API takes for the input hours\n   */\n  formatMinutes: function(minutes) {\n    var hh = Math.floor(minutes / 60);\n    var mm = minutes % 60;\n    var intoNextDay = ((hh % 24) !== hh);\n    hh = (hh % 24);\n    if (hh % 10 === hh) {\n      hh = '0' + hh;\n    }\n    if (intoNextDay) {\n      hh = '+' + hh;\n    }\n    if (mm % 10 === mm) {\n      mm = '0' + mm;\n    }\n    return hh + '' + mm;\n  },\n\n  /**\n   * @param {string} hoursText\n   * @param {(string|undefined)} minutesText\n   * @param {(string|undefined)} meridiem\n   * @return {number}\n   */\n  minutesAfterMidnight: function(hoursText, minutesText, meridiem) {\n    var hours = parseInt(hoursText, 10);\n    var minutes = (minutesText !== undefined) ? parseInt(minutesText, 10) : 0;\n    if (hours === 12 && meridiem) {\n      hours -= 12;\n    }\n    if (meridiem && meridiem[0] === 'p') {\n      hours += 12;\n    }\n\n    return (hours * 60) + minutes;\n  }\n}\n\nfourSq.util.HoursParser = {\n\n  /**\n   * @return {fourSq.api.models.hours.MachineHours}\n   */\n  parse: function(text) {\n    text = text.toLowerCase();\n\n    // Normalize new lines to ';'\n    text = text.replace(/\\n/g, ' ; ');\n\n    // Massage times\n    // TODO(ss): translate and do weekend/weekday subs\n    text = text.replace(/(12|12:00)?midnight/g, '1200a');\n    text = text.replace(/(12|12:00)?noon/g, '1200p');\n    text = text.replace(/(open)?\\s*24\\s*hours?/g, '1200a-1200a');\n\n    // Standardize conjunctions to '&'\n    text = text.replace(/\\s*(and|,|\\+|&)\\s*/g, '&');\n\n    // Standardize range tokens to '-'\n    text = text.replace(/\\s*(-|to|thru|through|till?|'till?|until)\\s*/g, '-');\n\n    // Standardize am/pm\n    text = text.replace(/\\s*a\\.?m?\\.?/g, 'a');\n    text = text.replace(/\\s*p\\.?m?\\.?/g, 'p');\n\n    // Not sure this happens, but add trailing zeros to things like 5:3pm\n    text = text.replace(/([0-9])(h|:|\\.)([0-9])([^0-9]|$)/g, '$1$2$30$4');\n\n    // Remove separators from times (e.g. ':')...\n    // if they both have separators\n//    text = text.replace(/([0-9]+)\\s*[^0-9]\\s*([0-9]{2})([^0-9]+?)([0-9]+)\\s*[^0-9]\\s*([0-9]{2})/g, '$1$2$3$4$5');\n    // if only the start time has a separator\n    text = text.replace(/([0-9]+)\\s*(h|:|\\.)\\s*([0-9]{2})/g, '$1$3');\n    // if only the end time has a separator\n    //text = text.replace(/([0-9]+)([^0-9ap]+?)([0-9]+)\\s*(h|:|\\.)\\s*([0-9]{2})/g, '$1$2$3$5');\n\n    text = fourSq.util.Hours.padTimes(text);\n\n    // Massage days\n    var dayCanonicals = _.map(_.range(1, 8), function(dayI) {\n      var allNames = fourSq.util.HoursParser.dayAliases(dayI);\n      var canonical = _.head(allNames); // Shortest is at the front\n      var aliases = _.tail(allNames);\n      aliases.reverse();  // Need to have the largest alias first for replacing\n      if (canonical && aliases) {\n        _.each(aliases, function(alias) {\n          text = text.replace(new RegExp(alias, 'g'), canonical);\n        });\n      }\n      return canonical;\n    });\n\n    var dayPattern = '(' + dayCanonicals.join('|') + ')';\n    var timePattern = '([0-9][0-9])([0-9][0-9])\\\\s*([ap])?';\n    var globTimePattern =  '[0-9]{4}\\\\s*[ap]?';\n    var globTimeRangePattern = '(' + globTimePattern + '[^0-9]+' + globTimePattern + ')';\n\n    // Need to establish whether days come before times (forward) or not (backward)\n    var forwardTimeframePattern = dayPattern + '.*?' + globTimeRangePattern;\n    var backwardTimeframePattern = globTimeRangePattern + '.*?' + dayPattern;\n\n    var forwardPosition = text.search(new RegExp(forwardTimeframePattern));\n    var backwardPosition = text.search(new RegExp(backwardTimeframePattern));\n\n    // If a forward pattern is found first, consider it a forward facing text\n    var isForward = (forwardPosition !== -1 && forwardPosition <= backwardPosition) || backwardPosition === -1;\n    // TODO(ss): may be better to normalize the string to be forward facing at this point\n    //           so the rest of the method would be easier to grok\n\n    // Separate out something like Mon-Thu, Sat, Sun\n    if (isForward) {\n      var ungroupedPattern = dayPattern + '&' + dayPattern + '[^&]*?' + globTimeRangePattern;\n      var ungroupedRegex = new RegExp(ungroupedPattern, 'g');\n      for (var i = 0; i < dayCanonicals.length; ++i) {\n        text = text.replace(ungroupedRegex, '$1 $3; $2 $3; ');\n      }\n    } else {\n      var ungroupedPattern = globTimeRangePattern + '([^0-9]*?)' + dayPattern + '&' + dayPattern;\n      var ungroupedRegex = new RegExp(ungroupedPattern, 'g');\n      for (var i = 0; i < dayCanonicals.length; ++i) {\n        text = text.replace(ungroupedRegex, '$1 $2 $3; $1 $4; ');\n      }\n    }\n\n    var dayRangePattern = dayPattern + '[^a-z0-9]*' + dayPattern + '?';\n    var timeRangePattern = timePattern + '[^0-9]*' + timePattern;\n    var timeframePattern = isForward ? (\n        dayRangePattern + '.*?' + timeRangePattern\n    ) : (\n        timeRangePattern + '.*?' + dayRangePattern\n    );\n    var dayTimeMatcher = new RegExp(timeframePattern, 'g');\n\n    var matches = [];\n    do {\n      var dayTimeMatch = dayTimeMatcher.exec(text);\n      if (dayTimeMatch) {\n        matches.push(dayTimeMatch);\n      }\n    } while (dayTimeMatch)\n\n    if (matches.length <= 0) {\n      // Try to find just a time range, and then we'll assume it's all days later on.\n      // First two groups are strings that won't match, to get undefined values\n      // in those slots in the regex match array.\n      var timeRangeMatcher = new RegExp('(@!ZfW#)?(@!ZfW#)?' + timeRangePattern);\n      var timeRangeMatch = timeRangeMatcher.exec(text);\n      if (timeRangeMatch) {\n        matches.push(timeRangeMatch);\n      }\n    }\n\n    var timeframes = _.map(matches, function(match) {\n      // day slots in the regex match array\n      var day1 = isForward ? match[1] : match[7];\n      var day2 = isForward ? match[2] : match[8];\n      var startDay = (day1 !== undefined) ? dayCanonicals.indexOf(day1) : 0;\n\n      var endDay = null;\n      if (day2 !== undefined) {\n        if (day1 === undefined) {\n          startDay = dayCanonicals.indexOf(day2);\n        } else {\n          endDay = dayCanonicals.indexOf(day2);\n        }\n      } else if (day1 === undefined) {\n        // If start and end days were undefined, assume 7 days a week\n        endDay = 7;\n      }\n      if (endDay === null) {\n        endDay = startDay;\n      }\n\n      if (endDay < startDay) {\n        // For case where: Sun-Tue (we start on Monday)\n        endDay += 7;\n      }\n      var days = _.map(_.range(startDay, endDay + 1), function(day) {\n        // Days start at 1 for Monday\n        return (day % 7) + 1;\n      });\n\n      // time slots in the regex match array\n      var startHour = isForward ? match[3] : match[1];\n      var startMinute = isForward ? match[4] : match[2];\n      var startMeridiem = isForward ? match[5] : match[3];\n      var endHour = isForward ? match[6] : match[4];\n      var endMinute = isForward ? match[7] : match[5];\n      var endMeridiem = isForward ? match[8] : match[6];\n      // TODO(ss): hint the meridiem based on endHour < startHour and > 4\n      var startTime = fourSq.util.Hours.minutesAfterMidnight(startHour, startMinute, startMeridiem);\n      var endTime = fourSq.util.Hours.minutesAfterMidnight(endHour, endMinute, endMeridiem);\n      return fourSq.util.Hours.toTimeframe(days, startTime, endTime);\n    });\n\n    if (timeframes.length) {\n      return /** @type {fourSq.api.models.hours.MachineHours} */ (({\n        timeframes: timeframes\n      }));\n    } else {\n      return null;\n    }\n  },\n\n  /**\n   * @param {number} day starting at 1 for monday\n   * @return {Array.<string>} all aliases of the day, sorted by length\n   */\n  dayAliases: function(day) {\n    var text = '';\n    var aliases = '';\n    switch(day) {\n      case 1: aliases = ['mondays','monday','monda','mond','mon','mo','m']; break;\n      case 2: aliases = ['tuesdays','tuesday','tuesd','tues','tue','tu']; break;\n      case 3: aliases = ['wednesdays','wednesday','wednes','wedne','wedn','wed','we','w']; break;\n      case 4: aliases = ['thursdays','thursday','thurs','thur','thu','th']; break;\n      case 5: aliases = ['fridays','friday','frida','frid','fri','fr','f']; break;\n      case 6: aliases = ['saturdays','saturday','satur','satu','sat','sa']; break;\n      case 7: aliases = ['sundays','sunday','sunda','sund','sun','su']; break;\n      default: return [];\n    }\n    return _.sortBy(aliases, function(alias) {\n      return alias.length;\n    });\n  }\n}\n\n// Remove the days in which the business is closed. The parser doesn't need those days anyways.\nfunction removeClosedDays( schedule ) {\n  var hoursString ='';\n  var lines = schedule.split('\\n');\n  for (var i=0; i< lines.length; i++) {\n    if (lines[i].includes('closed') || lines[i].includes('Closed') || !lines[i].match(/\\d+/g)) {\n      // don't add it to the list\n    } else {\n      hoursString += lines[i] + '\\n';\n    }\n  }\n\n  return hoursString;\n}\n\nexport const parseContent = function( currentValue ) {\n    currentValue = removeClosedDays(currentValue);\n    var hours = fourSq.util.HoursParser.parse(currentValue);\n    return JSON.stringify(hours);\n};\n","import { safariHeightFix } from './util';\n\n(function ($, window, undefined) {\n\n\t$( '.novablocks-advanced-gallery__grid' ).each( function( i, obj ) {\n\t\tsafariHeightFix( obj );\n\t} );\n\n})(jQuery, window);\n","import viewportObserver from \"./components/viewportObserver\";\n\nimport './blocks/announcement-bar/frontend';\nimport './blocks/google-map/frontend';\nimport './blocks/hero/frontend';\nimport './blocks/slideshow/frontend';\nimport './blocks/media/frontend';\nimport \"./blocks/posts-collection/frontend\";\nimport \"./blocks/openhours/hoursparser\";\n\nimport \"./components/advanced-gallery/frontend\";\n\n"],"sourceRoot":""}